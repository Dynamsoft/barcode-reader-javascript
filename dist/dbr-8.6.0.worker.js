'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,f){a!=Array.prototype&&a!=Object.prototype&&(a[b]=f.value)};
$jscomp.polyfill=function(a,b,f,z){if(b){f=$jscomp.global;a=a.split(".");for(z=0;z<a.length-1;z++){var x=a[z];x in f||(f[x]={});f=f[x]}a=a[a.length-1];z=f[a];b=b(z);b!=z&&null!=b&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+b++,f)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(f){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var f=a.next();$jscomp.generator.ensureIteratorResultIsObject_(f);if(f.done)this.yieldResult=f.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(f.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,f){f?this.finallyContexts_[f]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,f){try{var z=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(z);if(!z.done)return this.context_.stop_(),z;var x=z.value}catch(D){return this.context_.yieldAllIterator_=null,this.context_.throw_(D),this.nextStep_()}this.context_.yieldAllIterator_=null;f.call(this.context_,x);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function f(b){return a.throw(b)}return new Promise(function(z,x){function D(a){a.done?z(a.value):Promise.resolve(a.value).then(b,f).then(D,x)}D(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,f){var b=this;b instanceof String&&(b=String(b));var x=b.length;f=f||0;for(0>f&&(f=Math.max(f+x,0));f<x;f++){var D=b[f];if(D===a||Object.is(D,a))return!0}return!1}},"es7","es3");
(()=>{const a=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);a&&(global.self=global);var b;a&&(b=require("worker_threads"));let f=a?b.parentPort:self,z,x,D,P=!1,Y,Z,V,ca,I,Q=0,R=0;const Aa=(a,b)=>{b>Q&&(R&&Module._free(R),R=Module._malloc(b),Q=b);Module.HEAPU8.set(a.subarray(0,b),R)};let sa,Ba=new Promise(a=>{sa=a}),ta=!1,Ca=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(ta)throw"can't load wasm twice";ta=!0;J("wasm loading...");Y=
Date.now();yield new Promise(b=>{self.KModule=self.Module={locateFile:function(b){return"libDynamsoftBarcodeReader.wasm"==b?a?x+"dbr-"+D+".node.wasm":x+"dbr-"+D+(P?".full":"")+".wasm":x+b},print:a=>{J(a)},printErr:a=>{console.error(a);J(a)},onRuntimeInitialized:function(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){J("wasm initialized, cost "+(Date.now()-Y)+" ms");a||(Module=KModule);sa();b()})}};if(a){let a=Module;Module=require("./dbr-"+D+".node.wasm.js");for(let b in a)Module[b]=
a[b]}else importScripts(x+"dbr-"+D+(P?".full":"")+".wasm.js")})}),W=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield Ba;V=a.trial;ca=a.msg;Module.BarcodeReaderWasm.init(JSON.stringify(a))}),Da=()=>Module.BarcodeReaderWasm.getMinExpireTime(),Xa=()=>Module.BarcodeReaderWasm.getMaxExpireTime(),y=new Map,Ya=0;b=function(b){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const n=b.data?b.data:b;var p=n.id,l=n.instanceID,q=n.body;!Z||"decodeBuffer"!=n.type&&"decodeFileInMemory"!=
n.type||(yield I.c());switch(n.type){case "loadWasm":try{z=n.bd;x=n.engineResourcePath;P=n.bUseFullFeature;D=n.version;let a=n.dm,b=n.pk;Z=n.brtk;let q=n.bptk;Ca();let l;p=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{I=(a=>{const b=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);let e=a.dwt?Dynamsoft.Lib.Promise:self.Promise,f=a.btoa||(b?global.btoa||(a=>Buffer.from(a,"binary").toString("base64")):self.btoa),h=a.atob||(b?global.atob||
(a=>Buffer.from(a,"base64").toString("binary")):self.atob),p,q=a.product,z,l,n,y,x,C,A,G,D,ka,H=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"],I,F,J,E,P,L,R=!1,Y=e.resolve(),M=a.lf,ha,K,S,aa,Z=a.log||(()=>{}),N=a.dwt?u=>{try{a.debugLog&&a.debugLog(u)}catch(m){}}:a.debugLog||(()=>{}),ia=a.fol,Q,la,V,ca=a.sutlcb;Date.prototype.kUtilFormat=function(a){var u={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),
"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getUTCFullYear()+"").substr(4-RegExp.$1.length)));for(var b in u)(new RegExp("("+b+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?u[b]:("000"+u[b]).substr(("000"+u[b]).length-RegExp.$1.length)));return a};let ea,v=a=>a.join("");var ra=[80,88,27,82,145,164,199,211],sa=[187,87,89,128,150,44,190,213],X=[89,51,74,53,99,72,82,118],ta=[99,181,118,158,
215,103,76,117],ba=[99,51,86,105,100,71,120,108],Ea=[97,87,49,119,98,51,74,48,83,50,86,53],Fa=[81,85,86,84,76,85,100,68,84,81,32,32],W=[90,87,53,106,99,110,108,119,100,65,32,32],fa=[90,71,86,106,99,110,108,119,100,65,32,32],Na=[97,88,89,32],Aa=[29,83,122,137,5,180,157,114],Oa=[100,71,70,110,84,71,86,117,90,51,82,111];let Pa=()=>self[v(X)][v(ba)][v(Ea)]("raw",new Uint8Array(ra.concat(sa,ta,Aa)),v(Fa),!0,[v(W),v(fa)]),Qa=a.fdaa||(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[v(X)]&&
self[v(X)][v(ba)]&&self[v(X)][v(ba)][v(Ea)]){var b=h(a),u=new Uint8Array(b.length);for(let a=0;a<b.length;++a)u[a]=b.charCodeAt(a);b=u.subarray(0,12);u=u.subarray(b.length);ea||(ea=yield Pa());u=yield self[v(X)][v(ba)][v(fa)]({name:v(Fa),[v(Na)]:b,[v(Oa)]:128},ea,u);return String.fromCharCode.apply(null,new Uint8Array(u))}})),Ra=a.feab||(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[v(X)]&&self[v(X)][v(ba)]&&self[v(X)][v(ba)][v(Ea)]){var b=new Uint8Array(a.length);for(var u=
0;u<a.length;++u)b[u]=a.charCodeAt(u);u=self.crypto.getRandomValues(new Uint8Array(12));ea||(ea=yield Pa());b=yield self[v(X)][v(ba)][v(W)]({name:v(Fa),[v(Na)]:u,[v(Oa)]:128},ea,b);b=new Uint8Array(b);let e=new Uint8Array(u.length+b.length);e.set(u);e.set(b,u.length);return f(String.fromCharCode.apply(null,e))}})),Ga=a=>h(h(a.replace(/\n/g,"+").replace(/\s/g,"=")).substring(1)),Ha=a=>f(String.fromCharCode(97+25*Math.random())+f(a)).replace(/\+/g,"\n").replace(/=/g," "),O,Sa=()=>{if(O)return O;if(self.crypto){let a=
new Uint8Array(36);self.crypto.getRandomValues(a);let b="";for(let u=0;36>u;++u){let e=a[u]%36;b=10>e?b+e:b+String.fromCharCode(e+87)}return b}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})},Ba=()=>{M||self.localforage||(b?(global.localforage=require("node-localstorage").LocalStorage,global.localforage.prototype.keys=function(){let a=[];for(let b=0;b<this.length;++b)a.push(this.key(b));return a},global.localforage.createInstance=
function(a){return new M("./dynamsoftverify/"+a.name)}):!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).localforage=a()}(function(){return function ma(a,b,e){function f(r,h){if(!b[r]){if(!a[r]){var p="function"==typeof require&&require;if(!h&&p)return p(r,!0);if(m)return m(r,!0);h=Error("Cannot find module '"+
r+"'");throw h.code="MODULE_NOT_FOUND",h;}h=b[r]={exports:{}};a[r][0].call(h.exports,function(b){return f(a[r][1][b]||b)},h,h.exports,ma,a,b,e)}return b[r].exports}for(var m="function"==typeof require&&require,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,e){(function(a){function e(){q=!0;for(var a,b,e=n.length;e;){b=n;n=[];for(a=-1;++a<e;)b[a]();e=n.length}q=!1}var f=a.MutationObserver||a.WebKitMutationObserver;if(f){var h=0;f=new f(e);var m=a.document.createTextNode("");f.observe(m,{characterData:!0});
var ma=function(){m.data=h=++h%2}}else if(a.setImmediate||void 0===a.MessageChannel)ma="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){e();b.onreadystatechange=null;b.parentNode.removeChild(b);b=null};a.document.documentElement.appendChild(b)}:function(){setTimeout(e,0)};else{var p=new a.MessageChannel;p.port1.onmessage=e;ma=function(){p.port2.postMessage(0)}}var q,n=[];b.exports=function(a){1!==
n.push(a)||q||ma()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,e){function f(){}function h(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=na;this.queue=[];this.outcome=void 0;a!==f&&q(this,a)}function m(a,b,e){this.promise=a;"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"==typeof e&&(this.onRejected=e,this.callRejected=
this.otherCallRejected)}function p(a,b,e){v(function(){try{var f=b(e)}catch($a){return l.reject(a,$a)}f===a?l.reject(a,new TypeError("Cannot resolve promise with itself")):l.resolve(a,f)})}function n(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,arguments)}}function q(a,b){function e(b){h||(h=!0,l.reject(a,b))}function f(b){h||(h=!0,l.resolve(a,b))}var h=!1,m=y(function(){b(f,e)});"error"===m.status&&e(m.value)}function y(a,b){var e=
{};try{e.value=a(b),e.status="success"}catch(Za){e.status="error",e.value=Za}return e}var v=a(1),l={},z=["REJECTED"],x=["FULFILLED"],na=["PENDING"];b.exports=h;h.prototype.catch=function(a){return this.then(null,a)};h.prototype.then=function(a,b){if("function"!=typeof a&&this.state===x||"function"!=typeof b&&this.state===z)return this;var e=new this.constructor(f);this.state!==na?p(e,this.state===x?a:b,this.outcome):this.queue.push(new m(e,a,b));return e};m.prototype.callFulfilled=function(a){l.resolve(this.promise,
a)};m.prototype.otherCallFulfilled=function(a){p(this.promise,this.onFulfilled,a)};m.prototype.callRejected=function(a){l.reject(this.promise,a)};m.prototype.otherCallRejected=function(a){p(this.promise,this.onRejected,a)};l.resolve=function(a,b){var e=y(n,b);if("error"===e.status)return l.reject(a,e.value);if(e=e.value)q(a,e);else{a.state=x;a.outcome=b;e=-1;for(var f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a};l.reject=function(a,b){a.state=z;a.outcome=b;for(var e=-1,f=a.queue.length;++e<
f;)a.queue[e].callRejected(b);return a};h.resolve=function(a){return a instanceof this?a:l.resolve(new this(f),a)};h.reject=function(a){var b=new this(f);return l.reject(b,a)};h.all=function(a){function b(a,b){e.resolve(a).then(function(a){r[b]=a;++p!==h||m||(m=!0,l.resolve(n,r))},function(a){m||(m=!0,l.reject(n,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var h=a.length,m=!1;if(!h)return this.resolve([]);for(var r=
Array(h),p=0,q=-1,n=new this(f);++q<h;)b(a[q],q);return n};h.race=function(a){function b(a){e.resolve(a).then(function(a){m||(m=!0,l.resolve(p,a))},function(a){m||(m=!0,l.reject(p,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var h=a.length,m=!1;if(!h)return this.resolve([]);for(var r=-1,p=new this(f);++r<h;)b(a[r]);return p}},{1:1}],3:[function(a,b,e){b="undefined"!=typeof global?global:"undefined"!=typeof self?self:
"undefined"!=typeof window?window:{};"function"!=typeof b.Promise&&(b.Promise=a(2))},{2:2}],4:[function(a,b,p){function m(c,a){c=c||[];a=a||{};try{return new Blob(c,a)}catch(B){if("TypeError"!==B.name)throw B;for(var d=new ("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<c.length;b+=1)d.append(c[b]);return d.getBlob(a.type)}}function r(a,d){d&&a.then(function(a){d(null,a)},function(a){d(a)})}
function q(a,d,g){"function"==typeof d&&a.then(d);"function"==typeof g&&a.catch(g)}function n(a){return"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function y(a){return(new t(function(c){var d=a.transaction(S,Q),b=m([""]);d.objectStore(S).put(b,"key");d.onabort=function(a){a.preventDefault();a.stopPropagation();c(!1)};d.oncomplete=
function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);c(d||!a||43<=parseInt(a[1],10))}})).catch(function(){return!1})}function v(a){return"boolean"==typeof V?t.resolve(V):y(a).then(function(a){return V=a})}function x(a){a=T[a.name];var c={};c.promise=new t(function(a,d){c.resolve=a;c.reject=d});a.deferredOperations.push(c);a.dbReady?a.dbReady=a.dbReady.then(function(){return c.promise}):a.dbReady=c.promise}function z(a){if(a=T[a.name].deferredOperations.pop())return a.resolve(),
a.promise}function na(a,d){if(a=T[a.name].deferredOperations.pop())return a.reject(d),a.promise}function C(a,d){return new t(function(c,b){if(T[a.name]=T[a.name]||I(),a.db){if(!d)return c(a.db);x(a);a.db.close()}var g=[a.name];d&&g.push(a.version);var k=M.open.apply(M,g);d&&(k.onupgradeneeded=function(c){var d=k.result;try{d.createObjectStore(a.storeName),1>=c.oldVersion&&d.createObjectStore(S)}catch(U){if("ConstraintError"!==U.name)throw U;console.warn('The database "'+a.name+'" has been upgraded from version '+
c.oldVersion+" to version "+c.newVersion+', but the storage "'+a.storeName+'" already exists.')}});k.onerror=function(a){a.preventDefault();b(k.error)};k.onsuccess=function(){c(k.result);z(a)}})}function A(a,d){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),b=a.version>a.db.version;return(a.version<a.db.version&&(a.version!==d&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),b||c)?
(c&&(d=a.db.version+1,d>a.version&&(a.version=d)),!0):!1}function D(a){return new t(function(c,g){var d=new FileReader;d.onerror=g;d.onloadend=function(d){d=f(d.target.result||"");c({__local_forage_encoded_blob:!0,data:d,type:a.type})};d.readAsBinaryString(a)})}function ka(a){for(var c=h(a.data),g=c.length,b=new ArrayBuffer(g),B=new Uint8Array(b),k=0;k<g;k++)B[k]=c.charCodeAt(k);return m([b],{type:a.type})}function E(a){var c=this,g=c._initReady().then(function(){var a=T[c._dbInfo.name];if(a&&a.dbReady)return a.dbReady});
return q(g,a,a),g}function G(a){x(a);for(var c=T[a.name],g=c.forages,b=0;b<g.length;b++){var B=g[b];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return a.db=null,C(a,!1).then(function(c){return a.db=c,A(a)?C(a,!0):c}).then(function(d){a.db=c.db=d;for(var b=0;b<g.length;b++)g[b]._dbInfo.db=d}).catch(function(c){throw na(a,c),c;})}function da(a,d,g,b){void 0===b&&(b=1);try{var c=a.db.transaction(a.storeName,d);g(null,c)}catch(k){if(0<b&&(!a.db||"InvalidStateError"===k.name||"NotFoundError"===
k.name))return t.resolve().then(function(){if(!a.db||"NotFoundError"===k.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),C(a,!0)}).then(function(){return G(a).then(function(){da(a,d,g,b-1)})}).catch(g);g(k)}}function I(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function J(a){var c=.75*a.length;var b=a.length,w=0;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);var B=new ArrayBuffer(c),k=new Uint8Array(B);for(c=
0;c<b;c+=4){var e=ja.indexOf(a[c]);var pa=ja.indexOf(a[c+1]);var U=ja.indexOf(a[c+2]);var f=ja.indexOf(a[c+3]);k[w++]=e<<2|pa>>4;k[w++]=(15&pa)<<4|U>>2;k[w++]=(3&U)<<6|63&f}return B}function H(a){var c=new Uint8Array(a),b="";for(a=0;a<c.length;a+=3)b+=ja[c[a]>>2],b+=ja[(3&c[a])<<4|c[a+1]>>4],b+=ja[(15&c[a+1])<<2|c[a+2]>>6],b+=ja[63&c[a+2]];return 2==c.length%3?b=b.substring(0,b.length-1)+"=":1==c.length%3&&(b=b.substring(0,b.length-2)+"=="),b}function K(a,b,g,w){a.executeSql("CREATE TABLE IF NOT EXISTS "+
b.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],g,w)}function F(a,b,g,w,B,k){a.executeSql(g,w,B,function(a,c){c.code===c.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[b.storeName],function(a,d){d.rows.length?k(a,c):K(a,b,function(){a.executeSql(g,w,B,k)},k)},k):k(a,c)},k)}function L(a,b,g,w){var c=this;a=n(a);var d=new t(function(d,k){c.ready().then(function(){void 0===b&&(b=null);var e=b,B=c._dbInfo;B.serializer.serialize(b,function(b,U){U?
k(U):B.db.transaction(function(c){F(c,B,"INSERT OR REPLACE INTO "+B.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){d(e)},function(a,c){k(c)})},function(b){if(b.code===b.QUOTA_ERR){if(0<w)return void d(L.apply(c,[a,e,g,w-1]));k(b)}})})}).catch(k)});return r(d,g),d}function O(a){return new t(function(c,b){a.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(b,d){b=[];for(var g=0;g<d.rows.length;g++)b.push(d.rows.item(g).name);
c({db:a,storeNames:b})},function(a,c){b(c)})},function(a){b(a)})})}function R(a,b){var c=a.name+"/";return a.storeName!==b.storeName&&(c+=a.storeName+"/"),c}function X(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function P(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var g in b)b.hasOwnProperty(g)&&(ea(b[g])?arguments[0][g]=b[g].slice():arguments[0][g]=b[g])}return arguments[0]}var Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?
function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},M=function(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}();"undefined"==typeof e&&a(3);var t=e,S="local-forage-detect-blob-support",
V=void 0,T={},ca=Object.prototype.toString,Q="readwrite";a={_driver:"asyncStorage",_initStorage:function(a){function b(){return t.resolve()}var c=this,w={db:null};if(a)for(var e in a)w[e]=a[e];var k=T[w.name];k||(k=I(),T[w.name]=k);k.forages.push(c);c._initReady||(c._initReady=c.ready,c.ready=E);a=[];for(e=0;e<k.forages.length;e++){var f=k.forages[e];f!==c&&a.push(f._initReady().catch(b))}var pa=k.forages.slice(0);return t.all(a).then(function(){return w.db=k.db,C(w,!1)}).then(function(a){return w.db=
a,A(w,c._defaultConfig.version)?C(w,!0):a}).then(function(a){w.db=k.db=a;c._dbInfo=w;for(a=0;a<pa.length;a++){var b=pa[a];b!==c&&(b._dbInfo.db=w.db,b._dbInfo.version=w.version)}})},_support:function(){try{if(!M)return!1;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&
"undefined"!=typeof IDBKeyRange}catch(g){return!1}}(),iterate:function(a,b){var c=this,d=new t(function(b,d){c.ready().then(function(){da(c._dbInfo,"readonly",function(g,k){if(g)return d(g);try{var e=k.objectStore(c._dbInfo.storeName).openCursor(),w=1;e.onsuccess=function(){var c=e.result;if(c){var d=c.value;d&&d.__local_forage_encoded_blob&&(d=ka(d));d=a(d,c.key,w++);void 0!==d?b(d):c.continue()}else b()};e.onerror=function(){d(e.error)}}catch(Ja){d(Ja)}})}).catch(d)});return r(d,b),d},getItem:function(a,
b){var c=this;a=n(a);var d=new t(function(b,d){c.ready().then(function(){da(c._dbInfo,"readonly",function(g,e){if(g)return d(g);try{var k=e.objectStore(c._dbInfo.storeName).get(a);k.onsuccess=function(){var a=k.result;void 0===a&&(a=null);a&&a.__local_forage_encoded_blob&&(a=ka(a));b(a)};k.onerror=function(){d(k.error)}}catch(qa){d(qa)}})}).catch(d)});return r(d,b),d},setItem:function(a,b,g){var c=this;a=n(a);var d=new t(function(d,g){var e;c.ready().then(function(){return e=c._dbInfo,"[object Blob]"===
ca.call(b)?v(e.db).then(function(a){return a?b:D(b)}):b}).then(function(b){da(c._dbInfo,Q,function(e,k){if(e)return g(e);try{var w=k.objectStore(c._dbInfo.storeName);null===b&&(b=void 0);var B=w.put(b,a);k.oncomplete=function(){void 0===b&&(b=null);d(b)};k.onabort=k.onerror=function(){g(B.error?B.error:B.transaction.error)}}catch(Ka){g(Ka)}})}).catch(g)});return r(d,g),d},removeItem:function(a,b){var c=this;a=n(a);var d=new t(function(b,d){c.ready().then(function(){da(c._dbInfo,Q,function(g,e){if(g)return d(g);
try{var k=e.objectStore(c._dbInfo.storeName).delete(a);e.oncomplete=function(){b()};e.onerror=function(){d(k.error)};e.onabort=function(){d(k.error?k.error:k.transaction.error)}}catch(qa){d(qa)}})}).catch(d)});return r(d,b),d},clear:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){da(b._dbInfo,Q,function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).clear();g.oncomplete=function(){a()};g.onabort=g.onerror=function(){c(e.error?e.error:e.transaction.error)}}catch(U){c(U)}})}).catch(c)});
return r(c,a),c},length:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){da(b._dbInfo,"readonly",function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).count();e.onsuccess=function(){a(e.result)};e.onerror=function(){c(e.error)}}catch(U){c(U)}})}).catch(c)});return r(c,a),c},key:function(a,b){var c=this,d=new t(function(b,d){if(0>a)return void b(null);c.ready().then(function(){da(c._dbInfo,"readonly",function(g,e){if(g)return d(g);try{var k=!1,w=e.objectStore(c._dbInfo.storeName).openCursor();
w.onsuccess=function(){var c=w.result;if(!c)return void b(null);0===a?b(c.key):k?b(c.key):(k=!0,c.advance(a))};w.onerror=function(){d(w.error)}}catch(Ja){d(Ja)}})}).catch(d)});return r(d,b),d},keys:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){da(b._dbInfo,"readonly",function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).openCursor(),k=[];e.onsuccess=function(){var b=e.result;if(!b)return void a(k);k.push(b.key);b.continue()};e.onerror=function(){c(e.error)}}catch(qa){c(qa)}})}).catch(c)});
return r(c,a),c},dropInstance:function(a,b){b=l.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);a.name?(c=a.name===c.name&&this._dbInfo.db?t.resolve(this._dbInfo.db):C(a,!1).then(function(b){var c=T[a.name],d=c.forages;c.db=b;for(c=0;c<d.length;c++)d[c]._dbInfo.db=b;return b}),c=a.storeName?c.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;x(a);var d=T[a.name],g=d.forages;b.close();
for(b=0;b<g.length;b++){var e=g[b];e._dbInfo.db=null;e._dbInfo.version=c}return(new t(function(b,d){var g=M.open(a.name,c);g.onerror=function(a){g.result.close();d(a)};g.onupgradeneeded=function(){g.result.deleteObjectStore(a.storeName)};g.onsuccess=function(){var a=g.result;a.close();b(a)}})).then(function(a){d.db=a;for(var b=0;b<g.length;b++){var c=g[b];c._dbInfo.db=a;z(c._dbInfo)}}).catch(function(b){throw(na(a,b)||t.resolve()).catch(function(){}),b;})}}):c.then(function(b){x(a);var c=T[a.name],
d=c.forages;b.close();for(b=0;b<d.length;b++)d[b]._dbInfo.db=null;return(new t(function(b,c){var d=M.deleteDatabase(a.name);d.onerror=d.onblocked=function(a){var b=d.result;b&&b.close();c(a)};d.onsuccess=function(){var a=d.result;a&&a.close();b(a)}})).then(function(a){c.db=a;for(a=0;a<d.length;a++)z(d[a]._dbInfo)}).catch(function(b){throw(na(a,b)||t.resolve()).catch(function(){}),b;})})):c=t.reject("Invalid arguments");return r(c,b),c}};var ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
la=/^~~local_forage_type~([^~]+)~/,ba=Object.prototype.toString,Z={serialize:function(a,b){var c="";if(a&&(c=ba.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===ba.call(a.buffer))){var d,e="__lfsc__:";a instanceof ArrayBuffer?(d=a,e+="arbf"):(d=a.buffer,"[object Int8Array]"===c?e+="si08":"[object Uint8Array]"===c?e+="ui08":"[object Uint8ClampedArray]"===c?e+="uic8":"[object Int16Array]"===c?e+="si16":"[object Uint16Array]"===c?e+="ur16":"[object Int32Array]"===c?e+="si32":
"[object Uint32Array]"===c?e+="ui32":"[object Float32Array]"===c?e+="fl32":"[object Float64Array]"===c?e+="fl64":b(Error("Failed to get type for BinaryArray")));b(e+H(d))}else if("[object Blob]"===c)c=new FileReader,c.onload=function(){var c="~~local_forage_type~"+a.type+"~"+H(this.result);b("__lfsc__:blob"+c)},c.readAsArrayBuffer(a);else try{b(JSON.stringify(a))}catch(k){console.error("Couldn't convert value into a JSON string: ",a),b(null,k)}},deserialize:function(a){if("__lfsc__:"!==a.substring(0,
9))return JSON.parse(a);var b=a.substring(13);a=a.substring(9,13);if("blob"===a&&la.test(b)){var c=b.match(la);var e=c[1];b=b.substring(c[0].length)}b=J(b);switch(a){case "arbf":return b;case "blob":return m([b],{type:e});case "si08":return new Int8Array(b);case "ui08":return new Uint8Array(b);case "uic8":return new Uint8ClampedArray(b);case "si16":return new Int16Array(b);case "ur16":return new Uint16Array(b);case "si32":return new Int32Array(b);case "ui32":return new Uint32Array(b);case "fl32":return new Float32Array(b);
case "fl64":return new Float64Array(b);default:throw Error("Unkown type: "+a);}},stringToBuffer:J,bufferToString:H};p={_driver:"webSQLStorage",_initStorage:function(a){var b=this,c={db:null};if(a)for(var e in a)c[e]="string"!=typeof a[e]?a[e].toString():a[e];a=new t(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(Ua){return d(Ua)}c.db.transaction(function(e){K(e,c,function(){b._dbInfo=c;a()},function(a,b){d(b)})},d)});return c.serializer=Z,a},_support:"function"==
typeof openDatabase,iterate:function(a,b){var c=this,d=new t(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){F(c,e,"SELECT * FROM "+e.storeName,[],function(c,d){c=d.rows;d=c.length;for(var g=0;g<d;g++){var k=c.item(g),f=k.value;if(f&&(f=e.serializer.deserialize(f)),void 0!==(f=a(f,k.key,g+1)))return void b(f)}b()},function(a,b){d(b)})})}).catch(d)});return r(d,b),d},getItem:function(a,b){var c=this;a=n(a);var d=new t(function(b,d){c.ready().then(function(){var e=
c._dbInfo;e.db.transaction(function(c){F(c,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){(a=c.rows.length?c.rows.item(0).value:null)&&(a=e.serializer.deserialize(a));b(a)},function(a,b){d(b)})})}).catch(d)});return r(d,b),d},setItem:function(a,b,e){return L.apply(this,[a,b,e,1])},removeItem:function(a,b){var c=this;a=n(a);var d=new t(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){F(c,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[a],
function(){b()},function(a,b){d(b)})})}).catch(d)});return r(d,b),d},clear:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){F(b,d,"DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return r(c,a),c},length:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){F(b,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){b=c.rows.item(0).c;
a(b)},function(a,b){c(b)})})}).catch(c)});return r(c,a),c},key:function(a,b){var c=this,d=new t(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){F(c,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){a=c.rows.length?c.rows.item(0).key:null;b(a)},function(a,b){d(b)})})}).catch(d)});return r(d,b),d},keys:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){F(b,d,"SELECT key FROM "+
d.storeName,[],function(b,c){b=[];for(var d=0;d<c.rows.length;d++)b.push(c.rows.item(d).key);a(b)},function(a,b){c(b)})})}).catch(c)});return r(c,a),c},dropInstance:function(a,b){b=l.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?(new t(function(b){var d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0);b(a.storeName?{db:d,storeNames:[a.storeName]}:O(d))})).then(function(a){return new t(function(b,
c){a.db.transaction(function(d){function e(a){return new t(function(b,c){d.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var g=[],f=0,k=a.storeNames.length;f<k;f++)g.push(e(a.storeNames[f]));t.all(g).then(function(){b()}).catch(function(a){c(a)})},function(a){c(a)})})}):t.reject("Invalid arguments"),r(d,b),d}};try{var N="undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){N=!1}var ia=function(a,b){for(var c=a.length,d=0;d<
c;){var e=a[d],f=b;if(e===f||"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))return!0;d++}return!1},ea=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},W={},ha={},oa={INDEXEDDB:a,WEBSQL:p,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(a){var b={};if(a)for(var c in a)b[c]=a[c];b.keyPrefix=R(a,this._defaultConfig);try{var e=(localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1)}catch(B){e=
!0}return!e||0<localStorage.length?(this._dbInfo=b,b.serializer=Z,t.resolve()):t.reject()},_support:N,iterate:function(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,e=d.length,g=localStorage.length,f=1,h=0;h<g;h++){var m=localStorage.key(h);if(0===m.indexOf(d)){var w=localStorage.getItem(m);if(w&&(w=b.serializer.deserialize(w)),void 0!==(w=a(w,m.substring(e),f++)))return w}}});return r(d,b),d},getItem:function(a,b){var c=this;a=n(a);var d=c.ready().then(function(){var b=
c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return r(d,b),d},setItem:function(a,b,e){var c=this;a=n(a);var d=c.ready().then(function(){void 0===b&&(b=null);var d=b;return new t(function(e,g){var f=c._dbInfo;f.serializer.serialize(b,function(b,c){if(c)g(c);else try{localStorage.setItem(f.keyPrefix+a,b),e(d)}catch(ua){"QuotaExceededError"!==ua.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==ua.name||g(ua),g(ua)}})})});return r(d,e),d},removeItem:function(a,b){var c=
this;a=n(a);var d=c.ready().then(function(){localStorage.removeItem(c._dbInfo.keyPrefix+a)});return r(d,b),d},clear:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,c=localStorage.length-1;0<=c;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return r(c,a),c},length:function(a){var b=this.keys().then(function(a){return a.length});return r(b,a),b},key:function(a,b){var c=this,d=c.ready().then(function(){var b=c._dbInfo;try{var d=localStorage.key(a)}catch(Ua){d=
null}return d&&(d=d.substring(b.keyPrefix.length)),d});return r(d,b),d},keys:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=[],e=0;e<c;e++){var g=localStorage.key(e);0===g.indexOf(a.keyPrefix)&&d.push(g.substring(a.keyPrefix.length))}return d});return r(c,a),c},dropInstance:function(a,b){if(b=l.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name;a.storeName=a.storeName||c.storeName}var d,e=this;return d=
a.name?(new t(function(b){b(a.storeName?R(a,e._defaultConfig):a.name+"/")})).then(function(a){for(var b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);0===c.indexOf(a)&&localStorage.removeItem(c)}}):t.reject("Invalid arguments"),r(d,b),d}}};N=[oa.INDEXEDDB._driver,oa.WEBSQL._driver,oa.LOCALSTORAGE._driver];var aa=["dropInstance"],fa="clear getItem iterate key keys length removeItem setItem".split(" ").concat(aa),ra={description:"",driver:N.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",
version:1};N=new (function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var c in oa)if(oa.hasOwnProperty(c)){var d=oa[c],e=d._driver;this[c]=e;W[e]||this.defineDriver(d)}this._defaultConfig=P({},ra);this._config=P({},this._defaultConfig,b);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===
(void 0===a?"undefined":Y(a))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),"version"===b&&"number"!=typeof a[b])return Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new t(function(b,c){try{var d=a._driver,
e=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(e);for(var f=fa.concat("_initStorage"),g=0,h=f.length;g<h;g++){var m=f[g];if((!ia(aa,m)||a[m])&&"function"!=typeof a[m])return void c(e)}(function(){for(var b=function(a){return function(){var b=t.reject(Error("Method "+a+" is not implemented by the current driver"));return r(b,arguments[arguments.length-1]),b}},c=0,d=aa.length;c<d;c++){var e=aa[c];a[e]||(a[e]=b(e))}})();e=function(c){W[d]&&
console.info("Redefining LocalForage driver: "+d);W[d]=a;ha[d]=c;b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(e,c):e(!!a._support):e(!0)}catch(Ka){c(Ka)}});return q(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){a=W[a]?t.resolve(W[a]):t.reject(Error("Driver not found."));return q(a,b,c),a},a.prototype.getSerializer=function(a){var b=t.resolve(Z);return q(b,a),b},a.prototype.ready=function(a){var b=this,c=
b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return q(c,a,a),c},a.prototype.setDriver=function(a,b,c){function e(){g._config.driver=g.driver()}function d(a){return g._extend(a),e(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(d).catch(b)}e();return g._driverSet=t.reject(Error("No available storage method found.")),g._driverSet}
var c=0;return b()}}var g=this;ea(a)||(a=[a]);var h=this._getSupportedDrivers(a);return this._driverSet=(null!==this._driverSet?this._driverSet.catch(function(){return t.resolve()}):t.resolve()).then(function(){var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver;e();g._wrapLibraryMethodsWithReady();g._initDriver=f(h)})}).catch(function(){e();return g._driverSet=t.reject(Error("No available storage method found.")),g._driverSet}),q(this._driverSet,b,c),
this._driverSet},a.prototype.supports=function(a){return!!ha[a]},a.prototype._extend=function(a){P(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,e=a.length;c<e;c++){var d=a[c];this.supports(d)&&b.push(d)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,b=fa.length;a<b;a++)X(this,fa[a])},a.prototype.createInstance=function(b){return new a(b)},a}());b.exports=N},{3:3}]},{},[4])(4)}));M=M||self.localforage},Ca=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){Ba();
b&&(global.fetch=global.fetch||require("node-fetch"),global.crypto=global.crypto||require("crypto").webcrypto);v=a=>h(String.fromCharCode.apply(null,a).replace(/\n/g,"+").replace(/\s/g,"="));try{yield(yield M.createInstance({name:q+"jshello"})).setItem(q+"jshello","available")}catch(u){throw u;}K=yield M.createInstance({name:"dynamltsinfo"});S=O?null:f(f("v2")+String.fromCharCode(A.charCodeAt(A.length/2)+1)+f(A));aa=f(String.fromCharCode((n||y).charCodeAt(0)+10)+f(q)+f(n||y)+l+f(C));if(!O){try{let a=
yield K.getItem(S);a&&([G,E]=JSON.parse(yield Ga(a)))}catch(u){}try{null==G&&(G=Sa())}catch(u){}}ha=yield M.createInstance({name:"dynamltsuns"+f(String.fromCharCode((n||y).charCodeAt(0)+10)+f(q)+f(n||y)+l+f(C))});try{x=yield K.getItem(aa)}catch(u){}}),va,wa=u=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){va||(va=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let a={hs:n,og:y,pd:q,vm:l,dt:C||(b?"server":"browser"),ed:"javascript",cu:G,ad:A,os:JSON.stringify(D),fn:ka},
h={};if(E&&!O){let a=yield K.getItem(S);a&&([G,E]=JSON.parse(yield Ga(a)));h["lts-time"]=E}I&&(a.sp=I);F&&(a.lm=F);J&&(a.cw=J);x=yield e.race([(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let b=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");E&&!O&&(K.setItem(S,yield Ha(JSON.stringify([G,b]))),E=b);let m;var r="auth/?ext="+encodeURIComponent(f(JSON.stringify(a)));let p=!1,q=!1,l,v=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a&&!a.ok)try{let b=yield a.text();
if(b){let a=JSON.parse(b);a.errorCode&&(l=a,100<a.errorCode&&200>a.errorCode&&(x=null,q=p=!0))}}catch(ab){}});try{m=yield e.race([fetch(H[0]+r,{headers:h,cache:u?"reload":"default",mode:"cors",timeout:1E4}),new e((a,b)=>{setTimeout(b,1E4)})]),yield v(m)}catch(Ia){}if(!(E||m&&m.ok||p))try{m=yield fetch(H[1]+r,{headers:h,mode:"cors",timeout:3E4}),yield v(m)}catch(Ia){}if(!(E||m&&m.ok||p))try{m=yield fetch(H[0]+r,{headers:h,mode:"cors",timeout:3E4}),yield v(m)}catch(Ia){}l&&151==l.errorCode&&(O||K.removeItem(S),
K.removeItem(aa),G=Sa(),a.cu=G,E=void 0,r=encodeURIComponent(f(JSON.stringify(a))),m=yield fetch(H[0]+"auth/?ext="+r,{headers:h,mode:"cors",timeout:3E4}),yield v(m));(()=>{if(!m||!m.ok){q&&K.setItem(aa,"");if(l)if(111==l.errorCode)var a=l.message;else a=l.message.trim(),a.endsWith(".")||(a+="."),a=n||y?`An error occurred during authorization: ${a} Contact the site administrator for more information.`:`An error occurred during authorization: ${a} [Contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.`;
else a=n||y?"Failed to connect to the License Tracking Server: network connection error. Check your Internet connection or contact the site administrator for more information.":"Failed to connect to the License Tracking Server: network connection error. Check your Internet connection or [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.";a=Error(a);l&&l.errorCode&&(a.ltsErrorCode=l.errorCode);throw a;}})();r=yield m.text();try{E||O||(K.setItem(S,yield Ha(JSON.stringify([G,
b]))),E=b),K.setItem(aa,r)}catch(Ia){}return r}))(),new e((a,b)=>{let e;e=n||y?"Failed to connect to the License Tracking Server: network timed out. Check your Internet connection or contact the site administrator for more information.":"Failed to connect to the License Tracking Server: network timed out. Check your Internet connection or [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.";setTimeout(()=>b(Error(e)),x?3E3:15E3)})])}catch(m){p&&(a.dwt?self.console.error(m):
console.error(m)),L=m}P=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");va=null}))(),fetch(H[0]+"verify",{mode:"cors",method:"POST",body:"[]",headers:{"Content-Type":"application/json","lts-time":"options"},timeout:3E4}));yield va}),xa,ya=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){xa||(xa=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){N(G);if(x){L&&ia&&(ia(L),ia=null);var b={dm:A};p&&(b.bd=!0);b.brtk=!0;b.ls=H[0];n&&(b.hs=n);y&&(b.og=y);b.cu=G;ka&&(b.fn=ka);q&&
(b.product=q);C&&(b.dt=C);J&&(b.cw=J);D&&(b.os=JSON.stringify(D));N(x);try{if(a.dwt)b.ar=x;else{let a=JSON.parse(yield Qa(x));a.ba&&(b.ba=a.ba);a.usu&&(b.usu=a.usu);a.trial&&(b.trial=a.trial);a.its&&(b.its=a.its);1==b.trial&&a.msg?b.msg=a.msg:L?b.msg=L.message||L:a.msg&&(b.msg=a.msg);b.ar=a.in}b.bafc=!!L}catch(m){}N(b);try{yield Q(b)}catch(m){}yield Va();R||(R=!0);xa=null}else if(!R)throw Z(L.message),L;}))());yield xa}),Va=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let a=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),
b=yield V();N(b);if(b&&b<a){if(L)throw Error("Failed to connect to the License Tracking Server. The cached license has expired. Please get connected to the network as soon as possible or contact the site administrator for more information.");throw Error("Your system date and time appear to have been changed, causing the license to fail. Please correct the system data and time and try again.");}}),La=!1,Wa,Da=new e(a=>{Wa=a}),Ma=null,za=(a,b)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){Y=
Y.then(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let f=!1;try{let u=yield ha.keys();b||(La?a&&(u=u.filter(b=>b<a)):a&&u.includes(a)?u=[a]:(u=[],N("Unexpected null key")));if(u.length){La||(La=f=!0);for(let a=0;a<u.length/1E3;++a){let b=u.slice(1E3*a,1E3*a+999),m=[];for(var h=0;h<b.length;++h)m.push(yield ha.getItem(b[h]));let l=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");if(!O){K.setItem(S,yield Ha(JSON.stringify([G,l])));let a=yield K.getItem(S);a&&([G,E]=JSON.parse(yield Ga(a)))}try{const a=
{"Content-Type":"application/json"};E&&!O&&(a["lts-time"]=E);let u=f?yield new e((b,e)=>{const f=new XMLHttpRequest;f.responseType="json";f.timeout=3E4;f.onload=()=>{b({ok:!0,json:()=>f.response})};f.onerror=f.timeout=f.onabort=()=>{b({ok:!1,status:f.status})};f.upload.onloadend=()=>{Wa()};f.open("POST",H[0]+"verify",!0);for(let b in a)f.setRequestHeader(b,a[b]);f.send(JSON.stringify(m))}):yield fetch(H[0]+"verify",{mode:"cors",method:"POST",body:JSON.stringify(m),headers:a,timeout:3E4});if(u.ok){E=
l;for(h=0;h<b.length;++h)yield ha.removeItem(b[h]);(yield u.json()).handshakeUpdateTime>P&&(yield wa(!0),yield ya())}else throw Error("verify failed. Status Code: "+u.status);}catch(Ta){throw ia&&(ia(Ta),ia=null),Ta;}}ca&&ca()}}catch(ma){}}));return yield Y});return{i:a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){p=a.bd;z=a.version;l=z.split(".")[0];a.dt&&(C=a.dt);A=a.dm;n=a.pk;y=a.og;D=a.browserInfo;ka=a.deviceFriendlyName;a.ls&&a.ls.length&&(H=a.ls,1==H.length&&H.push(H[0]));I=a.sp;
F=a.lm;J=a.cw;a.lf&&(M=a.lf);a.lsu&&(G=O=a.lsu);a.fdaa&&(Qa=a.fdaa);a.feab&&(Ra=a.feab);Q=a.updateLicense;la=a.getMinExpireTime;V=a.getMaxExpireTime;a.sutlcb&&(ca=a.sutlcb);yield Ca();yield wa();yield ya();L||za(null,!0);return{ar:x,cu:G}}),c:()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){var a=new Date,b=a.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");let e=yield la(),f=yield V();f&&f<b?(yield wa(!0),yield ya()):e&&e<b&&(a.setMinutes(a.getMinutes()-6),b=a,a=null,a=b.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),
E<a&&wa().then(()=>ya()))}),s:(b,e,f,h)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a.dwt&&!e)yield za(f);else{try{let a=e.startsWith("{")&&e.endsWith("}")?yield Ra(e):e;a?yield ha.setItem(f,a):N("ept ecpt")}catch(ma){}h&&(yield za(f));Ma&&clearTimeout(Ma);Ma=setTimeout(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield za()}),36E4)}}),caret:Va,pdsf:Da}})({product:"dbr",log:J,debugLog:fa}),self.scsd=I.s,n.updateLicense=W,n.getMinExpireTime=Da,n.getMaxExpireTime=Xa,
yield I.i(n)}catch(F){if(q)Z=!1,yield y(),l=F.ltsErrorCode,ca=F.message||F;else throw F;}});let y=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let e={pk:b,dm:a};z&&(e.bd=!0);yield W(e)});Z?yield p():yield y();f.postMessage({type:"load",success:!0,version:Module.BarcodeReaderWasm.getVersion(),trial:V,ltsErrorCode:l,message:ca})}catch(e){f.postMessage({type:"load",success:!1,ltsErrorCode:e&&e.ltsErrorCode,message:e&&e.message,trial:V,stack:z&&e?e.stack:null})}break;case "createInstance":l=
Ya++;try{var C=new Module.BarcodeReaderWasm(n.bScanner,l);y.set(l,C);let b=JSON.parse(C.getRuntimeSettings());n.bScanner?(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);a||P||(b.barcodeFormatIds=235931647);C.updateRuntimeSettings(JSON.stringify(b))}catch(e){A(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0,instanceID:l}});break;case "destroy":try{y.get(l).delete(),y.delete(l)}catch(e){A(e,p);break}f.postMessage({type:"task",
id:p,body:{success:!0}});break;case "decodeBuffer":{C=Date.now();let a,b,n,x;try{a=z?Date.now():0,Aa(q.buffer,q.stride*q.height),b=z?Date.now():0,x=JSON.parse(y.get(l).decodeBufferPtr(R,q.width,q.height,q.stride,q.format)),n=Date.now()}catch(ra){A(ra,p);break}I&&I.pdsf&&(yield Promise.race([I.pdsf,new Promise(a=>{setTimeout(()=>{a();I.pdsf=null},500)})]));f.postMessage({type:"task",id:p,body:{success:!0,decodeReturn:x,buffer:q.buffer,duration:n-C}},[q.buffer.buffer]);fa(["timeWorkerGetMsg: "+C,"timeBeforeSendBufferToWasm: "+
a+" "+(a-C),"timeBeforeDecode: "+b+" "+(b-a),"timefinishDecode: "+n+" "+(n-b)].join("\n"));break}case "decodeFileInMemory":{let a,b,n;try{b=z?Date.now():0,a=JSON.parse(y.get(l).decodeFileInMemory(q.bytes)),n=z?Date.now():0}catch(la){A(la,p);break}f.postMessage({type:"task",id:p,body:{success:!0,decodeReturn:a,duration:n-b}});break}case "clearMapDecodeRecord":try{y.get(l).clearMapDecodeRecord()}catch(e){A(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "getRuntimeSettings":{let a;
try{a=y.get(l).getRuntimeSettings()}catch(h){A(h,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:a}});break}case "updateRuntimeSettings":{let a;try{a=JSON.parse(y.get(l).updateRuntimeSettings(q.settings))}catch(h){A(h,p);break}f.postMessage({type:"task",id:p,body:{success:!0,updateReturn:a}});break}case "resetRuntimeSettings":try{let a=y.get(l);a.resetRuntimeSettings();let b=JSON.parse(a.getRuntimeSettings());a.bScanner?(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0,b.barcodeZoneMinDistanceToImageBorders=
9):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);P||(b.barcodeFormatIds=235931647);a.updateRuntimeSettings(JSON.stringify(b))}catch(e){A(b,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "outputSettingsToString":{let a;try{a=y.get(l).outputSettingsToString()}catch(h){A(h,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:a}});break}case "initRuntimeSettingsWithString":{let a;try{a=JSON.parse(y.get(l).initRuntimeSettingsWithString(q.settings))}catch(h){A(h,
p);break}f.postMessage({type:"task",id:p,body:{success:!0,initReturn:a}});break}case "getIntermediateResults":{let a=[];try{var Y=y.get(l).getIntermediateResults(),Q=JSON.parse(Y,(b,e)=>"bytes"===b&&"ptr"in e&&"length"in e?(b=Module.BarcodeReaderWasm.getBytes(e.ptr,e.length),b=b.slice(0),a.push(b.buffer),b):e)}catch(h){A(h,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:Q}},a);y.get(l).freeIntermediateResults();break}case "setModeArgument":{let a;try{a=JSON.parse(y.get(l).setModeArgument(q.modeName,
q.index,q.argumentName,q.argumentValue))}catch(h){A(h,p);break}f.postMessage({type:"task",id:p,body:{success:!0,setReturn:a}});break}case "getModeArgument":{let a;try{a=JSON.parse(y.get(l).getModeArgument(q.modeName,q.index,q.argumentName))}catch(h){A(h,p);break}f.postMessage({type:"task",id:p,body:{success:!0,getReturn:a}});break}case "updateScanSettings":try{let a=y.get(l),b=q.settings;a.duplicateForgetTime=b.duplicateForgetTime;a.oneDRememberFrameCount=b.oneDRememberFrameCount;a.oneDTrustFrameCount=
b.oneDTrustFrameCount;b.frameFilter?a.setFrameFilter(JSON.stringify(b.frameFilter)):a.setFrameFilter("")}catch(e){A(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "getScanSettings":q={};try{let a=y.get(l);q.duplicateForgetTime=a.duplicateForgetTime;q.oneDRememberFrameCount=a.oneDRememberFrameCount;q.oneDTrustFrameCount=a.oneDTrustFrameCount;let b=a.getFrameFilter();b&&(q.frameFilter=JSON.parse(b))}catch(e){A(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:q}});
break;default:console.warn("Unmatched task: ",b)}})};if(a)f.on("message",b);else f.onmessage=b;let J=a=>{f.postMessage({type:"log",message:a})},fa=a=>{z&&J(a)},A=(a,b)=>{f.postMessage({type:"task",id:b,body:{success:!1,message:a.message,stack:a.stack}});setTimeout(()=>{throw a;},0)}})();
