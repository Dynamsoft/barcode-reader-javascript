'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,f){a!=Array.prototype&&a!=Object.prototype&&(a[b]=f.value)};
$jscomp.polyfill=function(a,b,f,n){if(b){f=$jscomp.global;a=a.split(".");for(n=0;n<a.length-1;n++){var w=a[n];w in f||(f[w]={});f=f[w]}a=a[a.length-1];n=f[a];b=b(n);b!=n&&null!=b&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+b++,f)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(f){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var f=a.next();$jscomp.generator.ensureIteratorResultIsObject_(f);if(f.done)this.yieldResult=f.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(f.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,f){f?this.finallyContexts_[f]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,f){try{var n=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(n);if(!n.done)return this.context_.stop_(),n;var w=n.value}catch(D){return this.context_.yieldAllIterator_=null,this.context_.throw_(D),this.nextStep_()}this.context_.yieldAllIterator_=null;f.call(this.context_,w);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function f(b){return a.throw(b)}return new Promise(function(n,w){function D(a){a.done?n(a.value):Promise.resolve(a.value).then(b,f).then(D,w)}D(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,f){var b=this;b instanceof String&&(b=String(b));var w=b.length;f=f||0;for(0>f&&(f=Math.max(f+w,0));f<w;f++){var D=b[f];if(D===a||Object.is(D,a))return!0}return!1}},"es7","es3");
(()=>{const a=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);a&&(global.self=global);var b;a&&(b=require("worker_threads"));let f=a?b.parentPort:self,n,w,D,I=!1,X,N,V,ba,Y,O=0,Z=0;const xa=(a,b)=>{b>O&&(Z&&Module._free(Z),Z=Module._malloc(b),O=b);Module.HEAPU8.set(a.subarray(0,b),Z)};let ca,ya=new Promise(a=>{ca=a});self.KModule=self.Module={locateFile:function(b){return"libDynamsoftBarcodeReader.wasm"==b?a?w+"dbr-"+D+".node.wasm":w+"dbr-"+D+(I?".full":
"")+".wasm":w+b},print:a=>{L(a)},printErr:a=>{console.error(a);L(a)},onRuntimeInitialized:function(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){L("wasm initialized, cost "+(Date.now()-X)+" ms");a||(Module=KModule);ca()})}};let za=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){L("wasm loading...");X=Date.now();if(a){let a=Module;Module=require("./dbr-"+D+".node.wasm.js");for(let b in a)Module[b]=a[b]}else importScripts(w+"dbr-"+D+(I?".full":"")+".wasm.js")}),ea=a=>
$jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield ya;V=a.trial;ba=a.msg;Module.BarcodeReaderWasm.init(JSON.stringify(a))}),Ua=()=>Module.BarcodeReaderWasm.getMinExpireTime(),Va=()=>Module.BarcodeReaderWasm.getMaxExpireTime(),x=new Map,Wa=0;b=function(b){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const m=b.data?b.data:b;var p=m.id,u=m.instanceID,q=m.body;!N||"decodeBuffer"!=m.type&&"decodeFileInMemory"!=m.type||(yield Y.c());switch(m.type){case "loadWasm":try{n=m.bd;
w=m.engineResourcePath;I=m.bUseFullFeature;D=m.version;let a=m.dm,b=m.pk;N=m.brtk;let q=m.bptk;za();let u;p=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{Y=(a=>{const b=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);let e=a.dwt?Dynamsoft.Lib.Promise:self.Promise,f=a.btoa||(b?global.btoa||(a=>Buffer.from(a,"binary").toString("base64")):self.btoa),l=a.atob||(b?global.atob||(a=>Buffer.from(a,"base64").toString("binary")):self.atob),
p,q=a.product,n,u,m,x,w,A,G,B,D,la,Q=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"],P,L,I,F,Z,J,X=!1,N=e.resolve(),K=a.lf,W,H,R,fa,Y=a.log||(()=>{}),M=a.dwt?y=>{try{a.debugLog&&a.debugLog(y)}catch(h){}}:a.debugLog||(()=>{}),ha=a.fol,O,ja,V,ba=a.sutlcb;Date.prototype.kUtilFormat=function(a){var y={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+
3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getUTCFullYear()+"").substr(4-RegExp.$1.length)));for(var b in y)(new RegExp("("+b+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?y[b]:("000"+y[b]).substr(("000"+y[b]).length-RegExp.$1.length)));return a};let da,z=a=>a.join("");var ca=[80,88,27,82,145,164,199,211],ea=[187,87,89,128,150,44,190,213],S=[89,51,74,53,99,72,82,118],wa=[99,181,118,158,215,103,76,117],aa=[99,51,86,105,100,71,120,108],Aa=[97,87,49,
119,98,51,74,48,83,50,86,53],Ba=[81,85,86,84,76,85,100,68,84,81,32,32],Ja=[90,87,53,106,99,110,108,119,100,65,32,32],Ka=[90,71,86,106,99,110,108,119,100,65,32,32],La=[97,88,89,32],xa=[29,83,122,137,5,180,157,114],Ma=[100,71,70,110,84,71,86,117,90,51,82,111];let Na=()=>self[z(S)][z(aa)][z(Aa)]("raw",new Uint8Array(ca.concat(ea,wa,xa)),z(Ba),!0,[z(Ja),z(Ka)]),Oa=a.fdaa||(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[z(S)]&&self[z(S)][z(aa)]&&self[z(S)][z(aa)][z(Aa)]){var b=l(a),
y=new Uint8Array(b.length);for(let a=0;a<b.length;++a)y[a]=b.charCodeAt(a);b=y.subarray(0,12);y=y.subarray(b.length);da||(da=yield Na());y=yield self[z(S)][z(aa)][z(Ka)]({name:z(Ba),[z(La)]:b,[z(Ma)]:128},da,y);return String.fromCharCode.apply(null,new Uint8Array(y))}})),Pa=a.feab||(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[z(S)]&&self[z(S)][z(aa)]&&self[z(S)][z(aa)][z(Aa)]){var b=new Uint8Array(a.length);for(var y=0;y<a.length;++y)b[y]=a.charCodeAt(y);y=self.crypto.getRandomValues(new Uint8Array(12));
da||(da=yield Na());b=yield self[z(S)][z(aa)][z(Ja)]({name:z(Ba),[z(La)]:y,[z(Ma)]:128},da,b);b=new Uint8Array(b);let e=new Uint8Array(y.length+b.length);e.set(y);e.set(b,y.length);return f(String.fromCharCode.apply(null,e))}})),Ca=a=>l(l(a.replace(/\n/g,"+").replace(/\s/g,"=")).substring(1)),Da=a=>f(String.fromCharCode(97+25*Math.random())+f(a)).replace(/\+/g,"\n").replace(/=/g," "),E,Qa=()=>{if(E)return E;if(self.crypto){let a=new Uint8Array(36);self.crypto.getRandomValues(a);let b="";for(let y=
0;36>y;++y){let e=a[y]%36;b=10>e?b+e:b+String.fromCharCode(e+87)}return b}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})},ya=()=>{K||self.localforage||(b?(global.localforage=require("node-localstorage").LocalStorage,global.localforage.prototype.keys=function(){let a=[];for(let b=0;b<this.length;++b)a.push(this.key(b));return a},global.localforage.createInstance=function(a){return new K("./dynamsoftverify/"+a.name)}):
!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).localforage=a()}(function(){return function ka(a,b,e){function f(r,h){if(!b[r]){if(!a[r]){var p="function"==typeof require&&require;if(!h&&p)return p(r,!0);if(l)return l(r,!0);h=Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h;}h=b[r]={exports:{}};
a[r][0].call(h.exports,function(b){return f(a[r][1][b]||b)},h,h.exports,ka,a,b,e)}return b[r].exports}for(var l="function"==typeof require&&require,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,e){(function(a){function e(){q=!0;for(var a,b,e=m.length;e;){b=m;m=[];for(a=-1;++a<e;)b[a]();e=m.length}q=!1}var f=a.MutationObserver||a.WebKitMutationObserver;if(f){var h=0;f=new f(e);var l=a.document.createTextNode("");f.observe(l,{characterData:!0});var ka=function(){l.data=h=++h%2}}else if(a.setImmediate||
void 0===a.MessageChannel)ka="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){e();b.onreadystatechange=null;b.parentNode.removeChild(b);b=null};a.document.documentElement.appendChild(b)}:function(){setTimeout(e,0)};else{var p=new a.MessageChannel;p.port1.onmessage=e;ka=function(){p.port2.postMessage(0)}}var q,m=[];b.exports=function(a){1!==m.push(a)||q||ka()}}).call(this,"undefined"!=typeof global?
global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,e){function f(){}function h(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=ma;this.queue=[];this.outcome=void 0;a!==f&&q(this,a)}function l(a,b,e){this.promise=a;"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"==typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function p(a,b,e){z(function(){try{var f=
b(e)}catch(Za){return n.reject(a,Za)}f===a?n.reject(a,new TypeError("Cannot resolve promise with itself")):n.resolve(a,f)})}function m(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,arguments)}}function q(a,b){function e(b){h||(h=!0,n.reject(a,b))}function f(b){h||(h=!0,n.resolve(a,b))}var h=!1,l=x(function(){b(f,e)});"error"===l.status&&e(l.value)}function x(a,b){var e={};try{e.value=a(b),e.status="success"}catch(Ya){e.status=
"error",e.value=Ya}return e}var z=a(1),n={},u=["REJECTED"],w=["FULFILLED"],ma=["PENDING"];b.exports=h;h.prototype.catch=function(a){return this.then(null,a)};h.prototype.then=function(a,b){if("function"!=typeof a&&this.state===w||"function"!=typeof b&&this.state===u)return this;var e=new this.constructor(f);this.state!==ma?p(e,this.state===w?a:b,this.outcome):this.queue.push(new l(e,a,b));return e};l.prototype.callFulfilled=function(a){n.resolve(this.promise,a)};l.prototype.otherCallFulfilled=function(a){p(this.promise,
this.onFulfilled,a)};l.prototype.callRejected=function(a){n.reject(this.promise,a)};l.prototype.otherCallRejected=function(a){p(this.promise,this.onRejected,a)};n.resolve=function(a,b){var e=x(m,b);if("error"===e.status)return n.reject(a,e.value);if(e=e.value)q(a,e);else{a.state=w;a.outcome=b;e=-1;for(var f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a};n.reject=function(a,b){a.state=u;a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callRejected(b);return a};h.resolve=function(a){return a instanceof
this?a:n.resolve(new this(f),a)};h.reject=function(a){var b=new this(f);return n.reject(b,a)};h.all=function(a){function b(a,b){e.resolve(a).then(function(a){r[b]=a;++p!==h||l||(l=!0,n.resolve(m,r))},function(a){l||(l=!0,n.reject(m,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var h=a.length,l=!1;if(!h)return this.resolve([]);for(var r=Array(h),p=0,q=-1,m=new this(f);++q<h;)b(a[q],q);return m};h.race=function(a){function b(a){e.resolve(a).then(function(a){l||
(l=!0,n.resolve(p,a))},function(a){l||(l=!0,n.reject(p,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var h=a.length,l=!1;if(!h)return this.resolve([]);for(var r=-1,p=new this(f);++r<h;)b(a[r]);return p}},{1:1}],3:[function(a,b,e){b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"function"!=typeof b.Promise&&(b.Promise=a(2))},{2:2}],4:[function(a,b,p){function h(c,
a){c=c||[];a=a||{};try{return new Blob(c,a)}catch(C){if("TypeError"!==C.name)throw C;for(var d=new ("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<c.length;b+=1)d.append(c[b]);return d.getBlob(a.type)}}function r(a,d){d&&a.then(function(a){d(null,a)},function(a){d(a)})}function q(a,d,g){"function"==typeof d&&a.then(d);"function"==typeof g&&a.catch(g)}function m(a){return"string"!=
typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function n(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function x(a){return(new t(function(c){var d=a.transaction(R,O),b=h([""]);d.objectStore(R).put(b,"key");d.onabort=function(a){a.preventDefault();a.stopPropagation();c(!1)};d.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);c(d||!a||43<=parseInt(a[1],
10))}})).catch(function(){return!1})}function z(a){return"boolean"==typeof V?t.resolve(V):x(a).then(function(a){return V=a})}function u(a){a=T[a.name];var c={};c.promise=new t(function(a,d){c.resolve=a;c.reject=d});a.deferredOperations.push(c);a.dbReady?a.dbReady=a.dbReady.then(function(){return c.promise}):a.dbReady=c.promise}function w(a){if(a=T[a.name].deferredOperations.pop())return a.resolve(),a.promise}function ma(a,d){if(a=T[a.name].deferredOperations.pop())return a.reject(d),a.promise}function A(a,
d){return new t(function(c,b){if(T[a.name]=T[a.name]||H(),a.db){if(!d)return c(a.db);u(a);a.db.close()}var g=[a.name];d&&g.push(a.version);var k=K.open.apply(K,g);d&&(k.onupgradeneeded=function(c){var d=k.result;try{d.createObjectStore(a.storeName),1>=c.oldVersion&&d.createObjectStore(R)}catch(U){if("ConstraintError"!==U.name)throw U;console.warn('The database "'+a.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+a.storeName+'" already exists.')}});
k.onerror=function(a){a.preventDefault();b(k.error)};k.onsuccess=function(){c(k.result);w(a)}})}function G(a,d){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),b=a.version>a.db.version;return(a.version<a.db.version&&(a.version!==d&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),b||c)?(c&&(d=a.db.version+1,d>a.version&&(a.version=d)),!0):!1}function Xa(a){return new t(function(c,g){var d=
new FileReader;d.onerror=g;d.onloadend=function(d){d=f(d.target.result||"");c({__local_forage_encoded_blob:!0,data:d,type:a.type})};d.readAsBinaryString(a)})}function D(a){for(var c=l(a.data),g=c.length,b=new ArrayBuffer(g),C=new Uint8Array(b),k=0;k<g;k++)C[k]=c.charCodeAt(k);return h([b],{type:a.type})}function la(a){var c=this,g=c._initReady().then(function(){var a=T[c._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return q(g,a,a),g}function F(a){u(a);for(var c=T[a.name],g=c.forages,b=0;b<g.length;b++){var C=
g[b];C._dbInfo.db&&(C._dbInfo.db.close(),C._dbInfo.db=null)}return a.db=null,A(a,!1).then(function(c){return a.db=c,G(a)?A(a,!0):c}).then(function(d){a.db=c.db=d;for(var b=0;b<g.length;b++)g[b]._dbInfo.db=d}).catch(function(c){throw ma(a,c),c;})}function B(a,d,g,b){void 0===b&&(b=1);try{var c=a.db.transaction(a.storeName,d);g(null,c)}catch(k){if(0<b&&(!a.db||"InvalidStateError"===k.name||"NotFoundError"===k.name))return t.resolve().then(function(){if(!a.db||"NotFoundError"===k.name&&!a.db.objectStoreNames.contains(a.storeName)&&
a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),A(a,!0)}).then(function(){return F(a).then(function(){B(a,d,g,b-1)})}).catch(g);g(k)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function I(a){var c=.75*a.length;var b=a.length,v=0;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);var C=new ArrayBuffer(c),k=new Uint8Array(C);for(c=0;c<b;c+=4){var e=ia.indexOf(a[c]);var pa=ia.indexOf(a[c+1]);var U=ia.indexOf(a[c+2]);var f=ia.indexOf(a[c+3]);k[v++]=e<<
2|pa>>4;k[v++]=(15&pa)<<4|U>>2;k[v++]=(3&U)<<6|63&f}return C}function P(a){var c=new Uint8Array(a),b="";for(a=0;a<c.length;a+=3)b+=ia[c[a]>>2],b+=ia[(3&c[a])<<4|c[a+1]>>4],b+=ia[(15&c[a+1])<<2|c[a+2]>>6],b+=ia[63&c[a+2]];return 2==c.length%3?b=b.substring(0,b.length-1)+"=":1==c.length%3&&(b=b.substring(0,b.length-2)+"=="),b}function J(a,b,g,v){a.executeSql("CREATE TABLE IF NOT EXISTS "+b.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],g,v)}function E(a,b,g,v,C,k){a.executeSql(g,v,C,function(a,
c){c.code===c.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[b.storeName],function(a,d){d.rows.length?k(a,c):J(a,b,function(){a.executeSql(g,v,C,k)},k)},k):k(a,c)},k)}function L(a,b,g,v){var c=this;a=m(a);var d=new t(function(d,k){c.ready().then(function(){void 0===b&&(b=null);var C=b,e=c._dbInfo;e.serializer.serialize(b,function(b,U){U?k(U):e.db.transaction(function(c){E(c,e,"INSERT OR REPLACE INTO "+e.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){d(C)},
function(a,c){k(c)})},function(b){if(b.code===b.QUOTA_ERR){if(0<v)return void d(L.apply(c,[a,C,g,v-1]));k(b)}})})}).catch(k)});return r(d,g),d}function Q(a){return new t(function(c,b){a.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(b,d){b=[];for(var g=0;g<d.rows.length;g++)b.push(d.rows.item(g).name);c({db:a,storeNames:b})},function(a,c){b(c)})},function(a){b(a)})})}function S(a,b){var c=a.name+"/";return a.storeName!==
b.storeName&&(c+=a.storeName+"/"),c}function X(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function N(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var g in b)b.hasOwnProperty(g)&&(da(b[g])?arguments[0][g]=b[g].slice():arguments[0][g]=b[g])}return arguments[0]}var Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&
a!==Symbol.prototype?"symbol":typeof a},K=function(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}();"undefined"==typeof e&&a(3);var t=e,R="local-forage-detect-blob-support",V=void 0,T={},ba=Object.prototype.toString,O="readwrite";a={_driver:"asyncStorage",_initStorage:function(a){function b(){return t.resolve()}
var c=this,v={db:null};if(a)for(var e in a)v[e]=a[e];var k=T[v.name];k||(k=H(),T[v.name]=k);k.forages.push(c);c._initReady||(c._initReady=c.ready,c.ready=la);a=[];for(e=0;e<k.forages.length;e++){var f=k.forages[e];f!==c&&a.push(f._initReady().catch(b))}var pa=k.forages.slice(0);return t.all(a).then(function(){return v.db=k.db,A(v,!1)}).then(function(a){return v.db=a,G(v,c._defaultConfig.version)?A(v,!0):a}).then(function(a){v.db=k.db=a;c._dbInfo=v;for(a=0;a<pa.length;a++){var b=pa[a];b!==c&&(b._dbInfo.db=
v.db,b._dbInfo.version=v.version)}})},_support:function(){try{if(!K)return!1;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(g){return!1}}(),iterate:function(a,b){var c=this,d=new t(function(b,d){c.ready().then(function(){B(c._dbInfo,
"readonly",function(g,k){if(g)return d(g);try{var e=k.objectStore(c._dbInfo.storeName).openCursor(),v=1;e.onsuccess=function(){var c=e.result;if(c){var d=c.value;d&&d.__local_forage_encoded_blob&&(d=D(d));d=a(d,c.key,v++);void 0!==d?b(d):c.continue()}else b()};e.onerror=function(){d(e.error)}}catch(Fa){d(Fa)}})}).catch(d)});return r(d,b),d},getItem:function(a,b){var c=this;a=m(a);var d=new t(function(b,d){c.ready().then(function(){B(c._dbInfo,"readonly",function(g,e){if(g)return d(g);try{var k=e.objectStore(c._dbInfo.storeName).get(a);
k.onsuccess=function(){var a=k.result;void 0===a&&(a=null);a&&a.__local_forage_encoded_blob&&(a=D(a));b(a)};k.onerror=function(){d(k.error)}}catch(qa){d(qa)}})}).catch(d)});return r(d,b),d},setItem:function(a,b,g){var c=this;a=m(a);var d=new t(function(d,g){var e;c.ready().then(function(){return e=c._dbInfo,"[object Blob]"===ba.call(b)?z(e.db).then(function(a){return a?b:Xa(b)}):b}).then(function(b){B(c._dbInfo,O,function(e,k){if(e)return g(e);try{var v=k.objectStore(c._dbInfo.storeName);null===b&&
(b=void 0);var C=v.put(b,a);k.oncomplete=function(){void 0===b&&(b=null);d(b)};k.onabort=k.onerror=function(){g(C.error?C.error:C.transaction.error)}}catch(Ga){g(Ga)}})}).catch(g)});return r(d,g),d},removeItem:function(a,b){var c=this;a=m(a);var d=new t(function(b,d){c.ready().then(function(){B(c._dbInfo,O,function(g,e){if(g)return d(g);try{var k=e.objectStore(c._dbInfo.storeName).delete(a);e.oncomplete=function(){b()};e.onerror=function(){d(k.error)};e.onabort=function(){d(k.error?k.error:k.transaction.error)}}catch(qa){d(qa)}})}).catch(d)});
return r(d,b),d},clear:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){B(b._dbInfo,O,function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).clear();g.oncomplete=function(){a()};g.onabort=g.onerror=function(){c(e.error?e.error:e.transaction.error)}}catch(U){c(U)}})}).catch(c)});return r(c,a),c},length:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){B(b._dbInfo,"readonly",function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).count();
e.onsuccess=function(){a(e.result)};e.onerror=function(){c(e.error)}}catch(U){c(U)}})}).catch(c)});return r(c,a),c},key:function(a,b){var c=this,d=new t(function(b,d){if(0>a)return void b(null);c.ready().then(function(){B(c._dbInfo,"readonly",function(g,e){if(g)return d(g);try{var k=!1,v=e.objectStore(c._dbInfo.storeName).openCursor();v.onsuccess=function(){var c=v.result;if(!c)return void b(null);0===a?b(c.key):k?b(c.key):(k=!0,c.advance(a))};v.onerror=function(){d(v.error)}}catch(Fa){d(Fa)}})}).catch(d)});
return r(d,b),d},keys:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){B(b._dbInfo,"readonly",function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).openCursor(),k=[];e.onsuccess=function(){var b=e.result;if(!b)return void a(k);k.push(b.key);b.continue()};e.onerror=function(){c(e.error)}}catch(qa){c(qa)}})}).catch(c)});return r(c,a),c},dropInstance:function(a,b){b=n.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||
c.name,a.storeName=a.storeName||c.storeName);a.name?(c=a.name===c.name&&this._dbInfo.db?t.resolve(this._dbInfo.db):A(a,!1).then(function(b){var c=T[a.name],d=c.forages;c.db=b;for(c=0;c<d.length;c++)d[c]._dbInfo.db=b;return b}),c=a.storeName?c.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;u(a);var d=T[a.name],g=d.forages;b.close();for(b=0;b<g.length;b++){var e=g[b];e._dbInfo.db=null;e._dbInfo.version=c}return(new t(function(b,d){var g=K.open(a.name,c);g.onerror=function(a){g.result.close();
d(a)};g.onupgradeneeded=function(){g.result.deleteObjectStore(a.storeName)};g.onsuccess=function(){var a=g.result;a.close();b(a)}})).then(function(a){d.db=a;for(var b=0;b<g.length;b++){var c=g[b];c._dbInfo.db=a;w(c._dbInfo)}}).catch(function(b){throw(ma(a,b)||t.resolve()).catch(function(){}),b;})}}):c.then(function(b){u(a);var c=T[a.name],d=c.forages;b.close();for(b=0;b<d.length;b++)d[b]._dbInfo.db=null;return(new t(function(b,c){var d=K.deleteDatabase(a.name);d.onerror=d.onblocked=function(a){var b=
d.result;b&&b.close();c(a)};d.onsuccess=function(){var a=d.result;a&&a.close();b(a)}})).then(function(a){c.db=a;for(a=0;a<d.length;a++)w(d[a]._dbInfo)}).catch(function(b){throw(ma(a,b)||t.resolve()).catch(function(){}),b;})})):c=t.reject("Invalid arguments");return r(c,b),c}};var ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ja=/^~~local_forage_type~([^~]+)~/,aa=Object.prototype.toString,Y={serialize:function(a,b){var c="";if(a&&(c=aa.call(a)),a&&("[object ArrayBuffer]"===
c||a.buffer&&"[object ArrayBuffer]"===aa.call(a.buffer))){var d,e="__lfsc__:";a instanceof ArrayBuffer?(d=a,e+="arbf"):(d=a.buffer,"[object Int8Array]"===c?e+="si08":"[object Uint8Array]"===c?e+="ui08":"[object Uint8ClampedArray]"===c?e+="uic8":"[object Int16Array]"===c?e+="si16":"[object Uint16Array]"===c?e+="ur16":"[object Int32Array]"===c?e+="si32":"[object Uint32Array]"===c?e+="ui32":"[object Float32Array]"===c?e+="fl32":"[object Float64Array]"===c?e+="fl64":b(Error("Failed to get type for BinaryArray")));
b(e+P(d))}else if("[object Blob]"===c)c=new FileReader,c.onload=function(){var c="~~local_forage_type~"+a.type+"~"+P(this.result);b("__lfsc__:blob"+c)},c.readAsArrayBuffer(a);else try{b(JSON.stringify(a))}catch(k){console.error("Couldn't convert value into a JSON string: ",a),b(null,k)}},deserialize:function(a){if("__lfsc__:"!==a.substring(0,9))return JSON.parse(a);var b=a.substring(13);a=a.substring(9,13);if("blob"===a&&ja.test(b)){var c=b.match(ja);var e=c[1];b=b.substring(c[0].length)}b=I(b);switch(a){case "arbf":return b;
case "blob":return h([b],{type:e});case "si08":return new Int8Array(b);case "ui08":return new Uint8Array(b);case "uic8":return new Uint8ClampedArray(b);case "si16":return new Int16Array(b);case "ur16":return new Uint16Array(b);case "si32":return new Int32Array(b);case "ui32":return new Uint32Array(b);case "fl32":return new Float32Array(b);case "fl64":return new Float64Array(b);default:throw Error("Unkown type: "+a);}},stringToBuffer:I,bufferToString:P};p={_driver:"webSQLStorage",_initStorage:function(a){var b=
this,c={db:null};if(a)for(var e in a)c[e]="string"!=typeof a[e]?a[e].toString():a[e];a=new t(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(Sa){return d(Sa)}c.db.transaction(function(e){J(e,c,function(){b._dbInfo=c;a()},function(a,b){d(b)})},d)});return c.serializer=Y,a},_support:"function"==typeof openDatabase,iterate:function(a,b){var c=this,d=new t(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){E(c,e,"SELECT * FROM "+
e.storeName,[],function(c,d){c=d.rows;d=c.length;for(var g=0;g<d;g++){var k=c.item(g),f=k.value;if(f&&(f=e.serializer.deserialize(f)),void 0!==(f=a(f,k.key,g+1)))return void b(f)}b()},function(a,b){d(b)})})}).catch(d)});return r(d,b),d},getItem:function(a,b){var c=this;a=m(a);var d=new t(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){E(c,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){(a=c.rows.length?c.rows.item(0).value:null)&&(a=e.serializer.deserialize(a));
b(a)},function(a,b){d(b)})})}).catch(d)});return r(d,b),d},setItem:function(a,b,e){return L.apply(this,[a,b,e,1])},removeItem:function(a,b){var c=this;a=m(a);var d=new t(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){E(c,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return r(d,b),d},clear:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){E(b,
d,"DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return r(c,a),c},length:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){E(b,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){b=c.rows.item(0).c;a(b)},function(a,b){c(b)})})}).catch(c)});return r(c,a),c},key:function(a,b){var c=this,d=new t(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){E(c,e,"SELECT key FROM "+
e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){a=c.rows.length?c.rows.item(0).key:null;b(a)},function(a,b){d(b)})})}).catch(d)});return r(d,b),d},keys:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){E(b,d,"SELECT key FROM "+d.storeName,[],function(b,c){b=[];for(var d=0;d<c.rows.length;d++)b.push(c.rows.item(d).key);a(b)},function(a,b){c(b)})})}).catch(c)});return r(c,a),c},dropInstance:function(a,b){b=n.apply(this,arguments);
var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?(new t(function(b){var d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0);b(a.storeName?{db:d,storeNames:[a.storeName]}:Q(d))})).then(function(a){return new t(function(b,c){a.db.transaction(function(d){function e(a){return new t(function(b,c){d.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var g=[],f=0,k=a.storeNames.length;f<
k;f++)g.push(e(a.storeNames[f]));t.all(g).then(function(){b()}).catch(function(a){c(a)})},function(a){c(a)})})}):t.reject("Invalid arguments"),r(d,b),d}};try{var M="undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){M=!1}var ha=function(a,b){for(var c=a.length,d=0;d<c;){var e=a[d],f=b;if(e===f||"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))return!0;d++}return!1},da=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},
W={},fa={},na={INDEXEDDB:a,WEBSQL:p,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(a){var b={};if(a)for(var c in a)b[c]=a[c];b.keyPrefix=S(a,this._defaultConfig);try{var e=(localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1)}catch(C){e=!0}return!e||0<localStorage.length?(this._dbInfo=b,b.serializer=Y,t.resolve()):t.reject()},_support:M,iterate:function(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,
e=d.length,g=localStorage.length,f=1,h=0;h<g;h++){var l=localStorage.key(h);if(0===l.indexOf(d)){var v=localStorage.getItem(l);if(v&&(v=b.serializer.deserialize(v)),void 0!==(v=a(v,l.substring(e),f++)))return v}}});return r(d,b),d},getItem:function(a,b){var c=this;a=m(a);var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return r(d,b),d},setItem:function(a,b,e){var c=this;a=m(a);var d=c.ready().then(function(){void 0===
b&&(b=null);var d=b;return new t(function(e,g){var f=c._dbInfo;f.serializer.serialize(b,function(b,c){if(c)g(c);else try{localStorage.setItem(f.keyPrefix+a,b),e(d)}catch(ra){"QuotaExceededError"!==ra.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==ra.name||g(ra),g(ra)}})})});return r(d,e),d},removeItem:function(a,b){var c=this;a=m(a);var d=c.ready().then(function(){localStorage.removeItem(c._dbInfo.keyPrefix+a)});return r(d,b),d},clear:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,
c=localStorage.length-1;0<=c;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return r(c,a),c},length:function(a){var b=this.keys().then(function(a){return a.length});return r(b,a),b},key:function(a,b){var c=this,d=c.ready().then(function(){var b=c._dbInfo;try{var d=localStorage.key(a)}catch(Sa){d=null}return d&&(d=d.substring(b.keyPrefix.length)),d});return r(d,b),d},keys:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=
[],e=0;e<c;e++){var g=localStorage.key(e);0===g.indexOf(a.keyPrefix)&&d.push(g.substring(a.keyPrefix.length))}return d});return r(c,a),c},dropInstance:function(a,b){if(b=n.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name;a.storeName=a.storeName||c.storeName}var d,e=this;return d=a.name?(new t(function(b){b(a.storeName?S(a,e._defaultConfig):a.name+"/")})).then(function(a){for(var b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);0===c.indexOf(a)&&
localStorage.removeItem(c)}}):t.reject("Invalid arguments"),r(d,b),d}}};M=[na.INDEXEDDB._driver,na.WEBSQL._driver,na.LOCALSTORAGE._driver];var ca=["dropInstance"],ea="clear getItem iterate key keys length removeItem setItem".split(" ").concat(ca),oa={description:"",driver:M.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};M=new (function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var c in na)if(na.hasOwnProperty(c)){var d=
na[c],e=d._driver;this[c]=e;W[e]||this.defineDriver(d)}this._defaultConfig=N({},oa);this._config=N({},this._defaultConfig,b);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":Z(a))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,
"_")),"version"===b&&"number"!=typeof a[b])return Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new t(function(b,c){try{var d=a._driver,e=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(e);for(var f=ea.concat("_initStorage"),g=0,h=f.length;g<
h;g++){var l=f[g];if((!ha(ca,l)||a[l])&&"function"!=typeof a[l])return void c(e)}(function(){for(var b=function(a){return function(){var b=t.reject(Error("Method "+a+" is not implemented by the current driver"));return r(b,arguments[arguments.length-1]),b}},c=0,d=ca.length;c<d;c++){var e=ca[c];a[e]||(a[e]=b(e))}})();e=function(c){W[d]&&console.info("Redefining LocalForage driver: "+d);W[d]=a;fa[d]=c;b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(e,c):e(!!a._support):
e(!0)}catch(Ga){c(Ga)}});return q(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){a=W[a]?t.resolve(W[a]):t.reject(Error("Driver not found."));return q(a,b,c),a},a.prototype.getSerializer=function(a){var b=t.resolve(Y);return q(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return q(c,a,a),c},a.prototype.setDriver=function(a,b,c){function e(){g._config.driver=
g.driver()}function d(a){return g._extend(a),e(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(d).catch(b)}e();return g._driverSet=t.reject(Error("No available storage method found.")),g._driverSet}var c=0;return b()}}var g=this;da(a)||(a=[a]);var h=this._getSupportedDrivers(a);return this._driverSet=(null!==this._driverSet?this._driverSet.catch(function(){return t.resolve()}):
t.resolve()).then(function(){var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver;e();g._wrapLibraryMethodsWithReady();g._initDriver=f(h)})}).catch(function(){e();return g._driverSet=t.reject(Error("No available storage method found.")),g._driverSet}),q(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!fa[a]},a.prototype._extend=function(a){N(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,e=a.length;c<
e;c++){var d=a[c];this.supports(d)&&b.push(d)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,b=ea.length;a<b;a++)X(this,ea[a])},a.prototype.createInstance=function(b){return new a(b)},a}());b.exports=M},{3:3}]},{},[4])(4)}));K=K||self.localforage},za=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){ya();b&&(global.fetch=global.fetch||require("node-fetch"),global.crypto=global.crypto||require("crypto").webcrypto);z=a=>l(String.fromCharCode.apply(null,a).replace(/\n/g,
"+").replace(/\s/g,"="));try{yield(yield K.createInstance({name:q+"jshello"})).setItem(q+"jshello","available")}catch(y){throw y;}H=yield K.createInstance({name:"dynamltsinfo"});R=E?null:f(f("v2")+String.fromCharCode(G.charCodeAt(G.length/2)+1)+f(G));fa=f(String.fromCharCode((m||x).charCodeAt(0)+10)+f(q)+f(m||x)+u+f(A));if(!E){try{let a=yield H.getItem(R);a&&([B,F]=JSON.parse(yield Ca(a)))}catch(y){}try{null==B&&(B=Qa())}catch(y){}}W=yield K.createInstance({name:"dynamltsuns"+f(String.fromCharCode((m||
x).charCodeAt(0)+10)+f(q)+f(m||x)+u+f(A))});try{w=yield H.getItem(fa)}catch(y){}}),oa,sa=y=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){oa||(oa=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let a={hs:m,og:x,pd:q,vm:u,dt:A||(b?"server":"browser"),ed:"javascript",cu:B,ad:G,os:JSON.stringify(D),fn:la},l={};if(F&&!E){let a=yield H.getItem(R);a&&([B,F]=JSON.parse(yield Ca(a)));l["lts-time"]=F}P&&(a.sp=P);L&&(a.lm=L);I&&(a.cw=I);w=yield e.race([(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let b=
(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");F&&!E&&(H.setItem(R,yield Da(JSON.stringify([B,b]))),F=b);let h;var r="auth/?ext="+encodeURIComponent(f(JSON.stringify(a)));let p=!1,q=!1,n,u=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a&&!a.ok)try{let b=yield a.text();if(b){let a=JSON.parse(b);a.errorCode&&(n=a,100<a.errorCode&&200>a.errorCode&&(w=null,q=p=!0))}}catch(ab){}});try{h=yield e.race([fetch(Q[0]+r,{headers:l,cache:y?"reload":"default",mode:"cors",timeout:1E4}),new e((a,
b)=>{setTimeout(b,1E4)})]),yield u(h)}catch(Ea){}if(!(F||h&&h.ok||p))try{h=yield fetch(Q[1]+r,{headers:l,mode:"cors",timeout:3E4}),yield u(h)}catch(Ea){}if(!(F||h&&h.ok||p))try{h=yield fetch(Q[0]+r,{headers:l,mode:"cors",timeout:3E4}),yield u(h)}catch(Ea){}n&&151==n.errorCode&&(E||H.removeItem(R),H.removeItem(fa),B=Qa(),a.cu=B,F=void 0,r=encodeURIComponent(f(JSON.stringify(a))),h=yield fetch(Q[0]+"auth/?ext="+r,{headers:l,mode:"cors",timeout:3E4}),yield u(h));(()=>{if(!h||!h.ok){q&&H.setItem(fa,"");
if(n)if(111==n.errorCode)var a=n.message;else a=n.message.trim(),a.endsWith(".")||(a+="."),a=m||x?`An error occurred during authorization: ${a} Contact the site administrator for more information.`:`An error occurred during authorization: ${a} [Contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.`;else a=m||x?"Failed to connect to the License Tracking Server: network connection error. Check your Internet connection or contact the site administrator for more information.":
"Failed to connect to the License Tracking Server: network connection error. Check your Internet connection or [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.";a=Error(a);n&&n.errorCode&&(a.ltsErrorCode=n.errorCode);throw a;}})();r=yield h.text();try{F||E||(H.setItem(R,yield Da(JSON.stringify([B,b]))),F=b),H.setItem(fa,r)}catch(Ea){}return r}))(),new e((a,b)=>{let e;e=m||x?"Failed to connect to the License Tracking Server: network timed out. Check your Internet connection or contact the site administrator for more information.":
"Failed to connect to the License Tracking Server: network timed out. Check your Internet connection or [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.";setTimeout(()=>b(Error(e)),w?3E3:15E3)})])}catch(h){p&&(a.dwt?self.console.error(h):console.error(h)),J=h}Z=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");oa=null}))());yield oa}),ta,ua=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){ta||(ta=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){M(B);
if(w){J&&ha&&(ha(J),ha=null);var b={dm:G};p&&(b.bd=!0);b.brtk=!0;b.ls=Q[0];m&&(b.hs=m);x&&(b.og=x);b.cu=B;la&&(b.fn=la);q&&(b.product=q);A&&(b.dt=A);I&&(b.cw=I);D&&(b.os=JSON.stringify(D));M(w);try{if(a.dwt)b.ar=w;else{let a=JSON.parse(yield Oa(w));a.ba&&(b.ba=a.ba);a.usu&&(b.usu=a.usu);a.trial&&(b.trial=a.trial);a.its&&(b.its=a.its);1==b.trial&&a.msg?b.msg=a.msg:J?b.msg=J.message||J:a.msg&&(b.msg=a.msg);b.ar=a.in}b.bafc=!!J}catch(h){}M(b);try{yield O(b)}catch(h){}yield Ta();X||(X=!0);ta=null}else if(!X)throw Y(J.message),
J;}))());yield ta}),Ta=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let a=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),b=yield V();M(b);if(b&&b<a){if(J)throw Error("Failed to connect to the License Tracking Server. The cached license has expired. Please get connected to the network as soon as possible or contact the site administrator for more information.");throw Error("Your system date and time appear to have been changed, causing the license to fail. Please correct the system data and time and try again.");
}}),Ha=!1,Ia=null,va=(a,b)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){N=N.then(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let l=yield W.keys();b||(Ha?a&&(l=l.filter(b=>b<a)):a&&l.includes(a)?l=[a]:(l=[],M("Unexpected null key")));if(l.length){Ha||(Ha=!0);for(let a=0;a<l.length/1E3;++a){let b=l.slice(1E3*a,1E3*a+999);var e=[];for(var f=0;f<b.length;++f)e.push(yield W.getItem(b[f]));let h=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");if(!E){H.setItem(R,yield Da(JSON.stringify([B,
h])));let a=yield H.getItem(R);a&&([B,F]=JSON.parse(yield Ca(a)))}try{f={"Content-Type":"application/json"};F&&!E&&(f["lts-time"]=F);let a=yield fetch(Q[0]+"verify",{mode:"cors",method:"POST",body:JSON.stringify(e),headers:f,timeout:3E4});if(a.ok){F=h;for(e=0;e<b.length;++e)yield W.removeItem(b[e]);(yield a.json()).handshakeUpdateTime>Z&&(yield sa(!0),yield ua())}else throw Error("verify failed. Status Code: "+a.status);}catch(Ra){throw ha&&(ha(Ra),ha=null),Ra;}}ba&&ba()}}catch(ka){}}));return yield N});
return{i:a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){p=a.bd;n=a.version;u=n.split(".")[0];a.dt&&(A=a.dt);G=a.dm;m=a.pk;x=a.og;D=a.browserInfo;la=a.deviceFriendlyName;a.ls&&a.ls.length&&(Q=a.ls,1==Q.length&&Q.push(Q[0]));P=a.sp;L=a.lm;I=a.cw;a.lf&&(K=a.lf);a.lsu&&(B=E=a.lsu);a.fdaa&&(Oa=a.fdaa);a.feab&&(Pa=a.feab);O=a.updateLicense;ja=a.getMinExpireTime;V=a.getMaxExpireTime;a.sutlcb&&(ba=a.sutlcb);yield za();yield sa();yield ua();J||va(null,!0);return{ar:w,cu:B}}),c:()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){var a=
new Date,b=a.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");let e=yield ja(),f=yield V();f&&f<b?(yield sa(!0),yield ua()):e&&e<b&&(a.setMinutes(a.getMinutes()-6),b=a,a=null,a=b.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),F<a&&sa().then(()=>ua()))}),s:(b,e,f,l)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a.dwt&&!e)yield va(f);else{try{let a=e.startsWith("{")&&e.endsWith("}")?yield Pa(e):e;a?yield W.setItem(f,a):M("ept ecpt")}catch(ka){}l&&(yield va(f));Ia&&clearTimeout(Ia);Ia=setTimeout(()=>
$jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield va()}),36E4)}}),caret:Ta}})({product:"dbr",log:L,debugLog:wa}),self.scsd=Y.s,m.updateLicense=ea,m.getMinExpireTime=Ua,m.getMaxExpireTime=Va,yield Y.i(m)}catch(P){if(q)N=!1,yield x(),u=P.ltsErrorCode,ba=P.message||P;else throw P;}});let x=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let e={pk:b,dm:a};n&&(e.bd=!0);yield ea(e)});N?yield p():yield x();f.postMessage({type:"load",success:!0,version:Module.BarcodeReaderWasm.getVersion(),
trial:V,ltsErrorCode:u,message:ba})}catch(e){f.postMessage({type:"load",success:!1,ltsErrorCode:e&&e.ltsErrorCode,message:e&&e.message,trial:V,stack:n&&e?e.stack:null})}break;case "createInstance":u=Wa++;try{var G=new Module.BarcodeReaderWasm(m.bScanner,u);x.set(u,G);let b=JSON.parse(G.getRuntimeSettings());m.bScanner?(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);a||I||(b.barcodeFormatIds=235931647);G.updateRuntimeSettings(JSON.stringify(b))}catch(e){A(e,
p);break}f.postMessage({type:"task",id:p,body:{success:!0,instanceID:u}});break;case "destroy":try{x.get(u).delete(),x.delete(u)}catch(e){A(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "decodeBuffer":{G=n?Date.now():0;let a,b,m,w;try{a=n?Date.now():0,xa(q.buffer,q.stride*q.height),b=n?Date.now():0,w=JSON.parse(x.get(u).decodeBufferPtr(Z,q.width,q.height,q.stride,q.format)),m=n?Date.now():0}catch($a){A($a,p);break}f.postMessage({type:"task",id:p,body:{success:!0,decodeReturn:w,
buffer:q.buffer,duration:m-b}},[q.buffer.buffer]);wa(["timeWorkerGetMsg: "+G,"timeBeforeSendBufferToWasm: "+a+" "+(a-G),"timeBeforeDecode: "+b+" "+(b-a),"timefinishDecode: "+m+" "+(m-b)].join("\n"));break}case "decodeFileInMemory":{let a,b,m;try{b=n?Date.now():0,a=JSON.parse(x.get(u).decodeFileInMemory(q.bytes)),m=n?Date.now():0}catch(ja){A(ja,p);break}f.postMessage({type:"task",id:p,body:{success:!0,decodeReturn:a,duration:m-b}});break}case "clearMapDecodeRecord":try{x.get(u).clearMapDecodeRecord()}catch(e){A(e,
p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "getRuntimeSettings":{let a;try{a=x.get(u).getRuntimeSettings()}catch(l){A(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:a}});break}case "updateRuntimeSettings":{let a;try{a=JSON.parse(x.get(u).updateRuntimeSettings(q.settings))}catch(l){A(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,updateReturn:a}});break}case "resetRuntimeSettings":try{let a=x.get(u);a.resetRuntimeSettings();let b=JSON.parse(a.getRuntimeSettings());
a.bScanner?(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0,b.barcodeZoneMinDistanceToImageBorders=9):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);I||(b.barcodeFormatIds=235931647);a.updateRuntimeSettings(JSON.stringify(b))}catch(e){A(b,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "outputSettingsToString":{let a;try{a=x.get(u).outputSettingsToString()}catch(l){A(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:a}});break}case "initRuntimeSettingsWithString":{let a;
try{a=JSON.parse(x.get(u).initRuntimeSettingsWithString(q.settings))}catch(l){A(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,initReturn:a}});break}case "getIntermediateResults":{let a=[];try{var X=x.get(u).getIntermediateResults(),O=JSON.parse(X,(b,e)=>"bytes"===b&&"ptr"in e&&"length"in e?(b=Module.BarcodeReaderWasm.getBytes(e.ptr,e.length),b=b.slice(0),a.push(b.buffer),b):e)}catch(l){A(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:O}},a);x.get(u).freeIntermediateResults();
break}case "setModeArgument":{let a;try{a=JSON.parse(x.get(u).setModeArgument(q.modeName,q.index,q.argumentName,q.argumentValue))}catch(l){A(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,setReturn:a}});break}case "getModeArgument":{let a;try{a=JSON.parse(x.get(u).getModeArgument(q.modeName,q.index,q.argumentName))}catch(l){A(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,getReturn:a}});break}case "updateScanSettings":try{let a=x.get(u),b=q.settings;a.duplicateForgetTime=
b.duplicateForgetTime;a.oneDRememberFrameCount=b.oneDRememberFrameCount;a.oneDTrustFrameCount=b.oneDTrustFrameCount;b.frameFilter?a.setFrameFilter(JSON.stringify(b.frameFilter)):a.setFrameFilter("")}catch(e){A(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "getScanSettings":q={};try{let a=x.get(u);q.duplicateForgetTime=a.duplicateForgetTime;q.oneDRememberFrameCount=a.oneDRememberFrameCount;q.oneDTrustFrameCount=a.oneDTrustFrameCount;let b=a.getFrameFilter();b&&(q.frameFilter=
JSON.parse(b))}catch(e){A(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:q}});break;default:console.warn("Unmatched task: ",b)}})};if(a)f.on("message",b);else f.onmessage=b;let L=a=>{f.postMessage({type:"log",message:a})},wa=a=>{n&&L(a)},A=(a,b)=>{f.postMessage({type:"task",id:b,body:{success:!1,message:a.message,stack:a.stack}});setTimeout(()=>{throw a;},0)}})();
