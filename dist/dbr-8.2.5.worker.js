'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,f){a!=Array.prototype&&a!=Object.prototype&&(a[b]=f.value)};
$jscomp.polyfill=function(a,b,f,z){if(b){f=$jscomp.global;a=a.split(".");for(z=0;z<a.length-1;z++){var w=a[z];w in f||(f[w]={});f=f[w]}a=a[a.length-1];z=f[a];b=b(z);b!=z&&null!=b&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+b++,f)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(f){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var f=a.next();$jscomp.generator.ensureIteratorResultIsObject_(f);if(f.done)this.yieldResult=f.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(f.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,f){f?this.finallyContexts_[f]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,f){try{var z=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(z);if(!z.done)return this.context_.stop_(),z;var w=z.value}catch(D){return this.context_.yieldAllIterator_=null,this.context_.throw_(D),this.nextStep_()}this.context_.yieldAllIterator_=null;f.call(this.context_,w);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function f(b){return a.throw(b)}return new Promise(function(z,w){function D(a){a.done?z(a.value):Promise.resolve(a.value).then(b,f).then(D,w)}D(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,f){var b=this;b instanceof String&&(b=String(b));var w=b.length;f=f||0;for(0>f&&(f=Math.max(f+w,0));f<w;f++){var D=b[f];if(D===a||Object.is(D,a))return!0}return!1}},"es7","es3");
(()=>{const a=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);a&&(global.self=global);var b;a&&(b=require("worker_threads"));let f=a?b.parentPort:self,z,w,D,Z=!1,O,da,K,V,W,ea=0,P=0;const za=(a,b)=>{b>ea&&(P&&Module._free(P),P=Module._malloc(b),ea=b);Module.HEAPU8.set(a.subarray(0,b),P)};let fa,Aa=new Promise(a=>{fa=a});self.KModule=self.Module={locateFile:function(b){return"libDynamsoftBarcodeReader.wasm"==b?a?w+"dbr-"+D+".node.wasm":w+"dbr-"+D+(Z?
".full":"")+".wasm":w+b},print:a=>{H(a)},printErr:a=>{console.error(a);H(a)},onRuntimeInitialized:function(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){H("wasm initialized, cost "+(Date.now()-O)+" ms");a||(Module=KModule);fa()})}};let Va=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){H("wasm loading...");O=Date.now();if(a){let a=Module;Module=require("./dbr-"+D+".node.wasm.js");for(let b in a)Module[b]=a[b]}else importScripts(w+"dbr-"+D+(Z?".full":"")+".wasm.js")}),
ha=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield Aa;K=a.trial;V=a.msg;Module.BarcodeReaderWasm.init(JSON.stringify(a))}),Wa=()=>Module.BarcodeReaderWasm.getMinExpireTime(),Xa=()=>Module.BarcodeReaderWasm.getMaxExpireTime(),x=new Map,Ya=0;b=function(b){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const p=b.data?b.data:b;var n=p.id,u=p.instanceID,l=p.body;!da||"decodeBuffer"!=p.type&&"decodeFileInMemory"!=p.type||(yield W.c());switch(p.type){case "loadWasm":try{z=
p.bd;w=p.engineResourcePath;Z=p.bUseFullFeature;D=p.version;let a=p.dm,b=p.pk;da=p.brtk;let l=p.bptk;Va();let u;n=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{W=(a=>{const b=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);let e=a.dwt?Dynamsoft.Lib.Promise:self.Promise,f=a.btoa||(b?global.btoa||(a=>Buffer.from(a,"binary").toString("base64")):self.btoa),h=a.atob||(b?global.atob||(a=>Buffer.from(a,"base64").toString("binary")):self.atob),
n,l=a.product,z,u,p,x,w,A,F,L,D,E=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"],M,Q,H,G,Z,J,P=!1,O=e.resolve(),X=a.lf,la,I,aa,ia,da=a.log||(()=>{}),Y=a.dwt?y=>{try{a.debugLog&&a.debugLog(y)}catch(m){}}:a.debugLog||(()=>{}),ba=a.fol,W,ea,K,V=a.sutlcb;Date.prototype.kUtilFormat=function(a){var y={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+
3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getUTCFullYear()+"").substr(4-RegExp.$1.length)));for(var b in y)(new RegExp("("+b+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?y[b]:("000"+y[b]).substr(("000"+y[b]).length-RegExp.$1.length)));return a};let N,t=a=>a.join("");var fa=[80,88,27,82,145,164,199,211],ha=[187,87,89,128,150,44,190,213],R=[89,51,74,53,99,72,82,118],Ba=[99,181,118,158,215,103,76,117],S=[99,51,86,105,100,71,120,108],Ca=[97,87,49,
119,98,51,74,48,83,50,86,53],Da=[81,85,86,84,76,85,100,68,84,81,32,32],ka=[90,87,53,106,99,110,108,119,100,65,32,32],Ka=[90,71,86,106,99,110,108,119,100,65,32,32],La=[97,88,89,32],za=[29,83,122,137,5,180,157,114],Ma=[100,71,70,110,84,71,86,117,90,51,82,111];let Na=()=>self[t(R)][t(S)][t(Ca)]("raw",new Uint8Array(fa.concat(ha,Ba,za)),t(Da),!0,[t(ka),t(Ka)]),Oa=a.fdaa||(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[t(R)]&&self[t(R)][t(S)]&&self[t(R)][t(S)][t(Ca)]){var b=h(a),y=
new Uint8Array(b.length);for(let a=0;a<b.length;++a)y[a]=b.charCodeAt(a);b=y.subarray(0,12);y=y.subarray(b.length);N||(N=yield Na());y=yield self[t(R)][t(S)][t(Ka)]({name:t(Da),[t(La)]:b,[t(Ma)]:128},N,y);return String.fromCharCode.apply(null,new Uint8Array(y))}})),Pa=a.feab||(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[t(R)]&&self[t(R)][t(S)]&&self[t(R)][t(S)][t(Ca)]){var b=new Uint8Array(a.length);for(var y=0;y<a.length;++y)b[y]=a.charCodeAt(y);y=self.crypto.getRandomValues(new Uint8Array(12));
N||(N=yield Na());b=yield self[t(R)][t(S)][t(ka)]({name:t(Da),[t(La)]:y,[t(Ma)]:128},N,b);b=new Uint8Array(b);let e=new Uint8Array(y.length+b.length);e.set(y);e.set(b,y.length);return f(String.fromCharCode.apply(null,e))}})),ra=a=>h(h(a.replace(/\n/g,"+").replace(/\s/g,"=")).substring(1)),Ea=a=>f(String.fromCharCode(97+25*Math.random())+f(a)).replace(/\+/g,"\n").replace(/=/g," "),Qa,sa=a.gu||(()=>{if(self.crypto){let a=new Uint8Array(36);self.crypto.getRandomValues(a);let b="";for(let y=0;36>y;++y){let e=
a[y]%36;b=10>e?b+e:b+String.fromCharCode(e+87)}return b}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}),ca={ltsErrorAndCacheExpire:"Failed to connect to the License Tracking Server. The cached license has expired. Please get connected to the network as soon as possible or contact the site administrator for more information.",publicTrialNetworkTimeout:"Failed to connect to the License Tracking Server: network timed out. Check your Internet connection or [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.",
networkTimeout:"Failed to connect to the License Tracking Server: network timed out. Check your Internet connection or contact the site administrator for more information.",publicTrialFailConnect:"Failed to connect to the License Tracking Server: network connection error. Check your Internet connection or [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.",failConnect:"Failed to connect to the License Tracking Server: network connection error. Check your Internet connection or contact the site administrator for more information.",
checkLocalTime:"Your system date and time appear to have been changed, causing the license to fail. Please correct the system data and time and try again."},Ta=()=>{X||self.localforage||(b?(global.localforage=require("node-localstorage").LocalStorage,global.localforage.prototype.keys=function(){let a=[];for(let b=0;b<this.length;++b)a.push(this.key(b));return a},global.localforage.createInstance=function(a){return new X("./dynamsoftverify/"+a.name)}):!function(a){"object"==typeof exports&&"undefined"!=
typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).localforage=a()}(function(){return function na(a,b,e){function f(q,h){if(!b[q]){if(!a[q]){var n="function"==typeof require&&require;if(!h&&n)return n(q,!0);if(m)return m(q,!0);h=Error("Cannot find module '"+q+"'");throw h.code="MODULE_NOT_FOUND",h;}h=b[q]={exports:{}};a[q][0].call(h.exports,function(b){return f(a[q][1][b]||
b)},h,h.exports,na,a,b,e)}return b[q].exports}for(var m="function"==typeof require&&require,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,e){(function(a){function e(){l=!0;for(var a,b,e=p.length;e;){b=p;p=[];for(a=-1;++a<e;)b[a]();e=p.length}l=!1}var f=a.MutationObserver||a.WebKitMutationObserver;if(f){var h=0;f=new f(e);var m=a.document.createTextNode("");f.observe(m,{characterData:!0});var na=function(){m.data=h=++h%2}}else if(a.setImmediate||void 0===a.MessageChannel)na="document"in a&&
"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){e();b.onreadystatechange=null;b.parentNode.removeChild(b);b=null};a.document.documentElement.appendChild(b)}:function(){setTimeout(e,0)};else{var n=new a.MessageChannel;n.port1.onmessage=e;na=function(){n.port2.postMessage(0)}}var l,p=[];b.exports=function(a){1!==p.push(a)||l||na()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:
"undefined"!=typeof window?window:{})},{}],2:[function(a,b,e){function f(){}function h(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=z;this.queue=[];this.outcome=void 0;a!==f&&p(this,a)}function m(a,b,e){this.promise=a;"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"==typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function n(a,b,e){x(function(){try{var f=b(e)}catch($a){return B.reject(a,
$a)}f===a?B.reject(a,new TypeError("Cannot resolve promise with itself")):B.resolve(a,f)})}function l(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,arguments)}}function p(a,b){function e(b){h||(h=!0,B.reject(a,b))}function f(b){h||(h=!0,B.resolve(a,b))}var h=!1,m=t(function(){b(f,e)});"error"===m.status&&e(m.value)}function t(a,b){var e={};try{e.value=a(b),e.status="success"}catch(Za){e.status="error",e.value=Za}return e}var x=
a(1),B={},ma=["REJECTED"],u=["FULFILLED"],z=["PENDING"];b.exports=h;h.prototype.catch=function(a){return this.then(null,a)};h.prototype.then=function(a,b){if("function"!=typeof a&&this.state===u||"function"!=typeof b&&this.state===ma)return this;var e=new this.constructor(f);this.state!==z?n(e,this.state===u?a:b,this.outcome):this.queue.push(new m(e,a,b));return e};m.prototype.callFulfilled=function(a){B.resolve(this.promise,a)};m.prototype.otherCallFulfilled=function(a){n(this.promise,this.onFulfilled,
a)};m.prototype.callRejected=function(a){B.reject(this.promise,a)};m.prototype.otherCallRejected=function(a){n(this.promise,this.onRejected,a)};B.resolve=function(a,b){var e=t(l,b);if("error"===e.status)return B.reject(a,e.value);if(e=e.value)p(a,e);else{a.state=u;a.outcome=b;e=-1;for(var f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a};B.reject=function(a,b){a.state=ma;a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callRejected(b);return a};h.resolve=function(a){return a instanceof
this?a:B.resolve(new this(f),a)};h.reject=function(a){var b=new this(f);return B.reject(b,a)};h.all=function(a){function b(a,b){e.resolve(a).then(function(a){q[b]=a;++n!==h||m||(m=!0,B.resolve(l,q))},function(a){m||(m=!0,B.reject(l,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var h=a.length,m=!1;if(!h)return this.resolve([]);for(var q=Array(h),n=0,p=-1,l=new this(f);++p<h;)b(a[p],p);return l};h.race=function(a){function b(a){e.resolve(a).then(function(a){m||
(m=!0,B.resolve(n,a))},function(a){m||(m=!0,B.reject(n,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var h=a.length,m=!1;if(!h)return this.resolve([]);for(var q=-1,n=new this(f);++q<h;)b(a[q]);return n}},{1:1}],3:[function(a,b,e){b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"function"!=typeof b.Promise&&(b.Promise=a(2))},{2:2}],4:[function(a,b,n){function m(c,
a){c=c||[];a=a||{};try{return new Blob(c,a)}catch(C){if("TypeError"!==C.name)throw C;for(var d=new ("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<c.length;b+=1)d.append(c[b]);return d.getBlob(a.type)}}function q(a,d){d&&a.then(function(a){d(null,a)},function(a){d(a)})}function p(a,d,g){"function"==typeof d&&a.then(d);"function"==typeof g&&a.catch(g)}function l(a){return"string"!=
typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function B(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function t(a){return(new r(function(c){var d=a.transaction(V,S),b=m([""]);d.objectStore(V).put(b,"key");d.onabort=function(a){a.preventDefault();a.stopPropagation();c(!1)};d.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);c(d||!a||43<=parseInt(a[1],
10))}})).catch(function(){return!1})}function x(a){return"boolean"==typeof W?r.resolve(W):t(a).then(function(a){return W=a})}function u(a){a=T[a.name];var c={};c.promise=new r(function(a,d){c.resolve=a;c.reject=d});a.deferredOperations.push(c);a.dbReady?a.dbReady=a.dbReady.then(function(){return c.promise}):a.dbReady=c.promise}function z(a){if(a=T[a.name].deferredOperations.pop())return a.resolve(),a.promise}function ma(a,d){if(a=T[a.name].deferredOperations.pop())return a.reject(d),a.promise}function w(a,
d){return new r(function(c,b){if(T[a.name]=T[a.name]||H(),a.db){if(!d)return c(a.db);u(a);a.db.close()}var g=[a.name];d&&g.push(a.version);var k=K.open.apply(K,g);d&&(k.onupgradeneeded=function(c){var d=k.result;try{d.createObjectStore(a.storeName),1>=c.oldVersion&&d.createObjectStore(V)}catch(U){if("ConstraintError"!==U.name)throw U;console.warn('The database "'+a.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+a.storeName+'" already exists.')}});
k.onerror=function(a){a.preventDefault();b(k.error)};k.onsuccess=function(){c(k.result);z(a)}})}function A(a,d){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),b=a.version>a.db.version;return(a.version<a.db.version&&(a.version!==d&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),b||c)?(c&&(d=a.db.version+1,d>a.version&&(a.version=d)),!0):!1}function L(a){return new r(function(c,g){var d=
new FileReader;d.onerror=g;d.onloadend=function(d){d=f(d.target.result||"");c({__local_forage_encoded_blob:!0,data:d,type:a.type})};d.readAsBinaryString(a)})}function D(a){for(var c=h(a.data),g=c.length,b=new ArrayBuffer(g),C=new Uint8Array(b),k=0;k<g;k++)C[k]=c.charCodeAt(k);return m([b],{type:a.type})}function F(a){var c=this,g=c._initReady().then(function(){var a=T[c._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return p(g,a,a),g}function G(a){u(a);for(var c=T[a.name],g=c.forages,b=0;b<g.length;b++){var C=
g[b];C._dbInfo.db&&(C._dbInfo.db.close(),C._dbInfo.db=null)}return a.db=null,w(a,!1).then(function(c){return a.db=c,A(a)?w(a,!0):c}).then(function(d){a.db=c.db=d;for(var b=0;b<g.length;b++)g[b]._dbInfo.db=d}).catch(function(c){throw ma(a,c),c;})}function M(a,d,g,b){void 0===b&&(b=1);try{var c=a.db.transaction(a.storeName,d);g(null,c)}catch(k){if(0<b&&(!a.db||"InvalidStateError"===k.name||"NotFoundError"===k.name))return r.resolve().then(function(){if(!a.db||"NotFoundError"===k.name&&!a.db.objectStoreNames.contains(a.storeName)&&
a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),w(a,!0)}).then(function(){return G(a).then(function(){M(a,d,g,b-1)})}).catch(g);g(k)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function I(a){var c=.75*a.length;var b=a.length,v=0;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);var C=new ArrayBuffer(c),k=new Uint8Array(C);for(c=0;c<b;c+=4){var e=ja.indexOf(a[c]);var pa=ja.indexOf(a[c+1]);var U=ja.indexOf(a[c+2]);var f=ja.indexOf(a[c+3]);k[v++]=e<<
2|pa>>4;k[v++]=(15&pa)<<4|U>>2;k[v++]=(3&U)<<6|63&f}return C}function Q(a){var c=new Uint8Array(a),b="";for(a=0;a<c.length;a+=3)b+=ja[c[a]>>2],b+=ja[(3&c[a])<<4|c[a+1]>>4],b+=ja[(15&c[a+1])<<2|c[a+2]>>6],b+=ja[63&c[a+2]];return 2==c.length%3?b=b.substring(0,b.length-1)+"=":1==c.length%3&&(b=b.substring(0,b.length-2)+"=="),b}function J(a,b,g,v){a.executeSql("CREATE TABLE IF NOT EXISTS "+b.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],g,v)}function E(a,b,g,v,C,k){a.executeSql(g,v,C,function(a,
c){c.code===c.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[b.storeName],function(a,d){d.rows.length?k(a,c):J(a,b,function(){a.executeSql(g,v,C,k)},k)},k):k(a,c)},k)}function P(a,b,g,v){var c=this;a=l(a);var d=new r(function(d,k){c.ready().then(function(){void 0===b&&(b=null);var C=b,e=c._dbInfo;e.serializer.serialize(b,function(b,U){U?k(U):e.db.transaction(function(c){E(c,e,"INSERT OR REPLACE INTO "+e.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){d(C)},
function(a,c){k(c)})},function(b){if(b.code===b.QUOTA_ERR){if(0<v)return void d(P.apply(c,[a,C,g,v-1]));k(b)}})})}).catch(k)});return q(d,g),d}function X(a){return new r(function(c,b){a.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(b,d){b=[];for(var g=0;g<d.rows.length;g++)b.push(d.rows.item(g).name);c({db:a,storeNames:b})},function(a,c){b(c)})},function(a){b(a)})})}function R(a,b){var c=a.name+"/";return a.storeName!==
b.storeName&&(c+=a.storeName+"/"),c}function Z(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function O(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var g in b)b.hasOwnProperty(g)&&(ia(b[g])?arguments[0][g]=b[g].slice():arguments[0][g]=b[g])}return arguments[0]}var aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&
a!==Symbol.prototype?"symbol":typeof a},K=function(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}();"undefined"==typeof e&&a(3);var r=e,V="local-forage-detect-blob-support",W=void 0,T={},ea=Object.prototype.toString,S="readwrite";a={_driver:"asyncStorage",_initStorage:function(a){function b(){return r.resolve()}
var c=this,v={db:null};if(a)for(var e in a)v[e]=a[e];var k=T[v.name];k||(k=H(),T[v.name]=k);k.forages.push(c);c._initReady||(c._initReady=c.ready,c.ready=F);a=[];for(e=0;e<k.forages.length;e++){var f=k.forages[e];f!==c&&a.push(f._initReady().catch(b))}var pa=k.forages.slice(0);return r.all(a).then(function(){return v.db=k.db,w(v,!1)}).then(function(a){return v.db=a,A(v,c._defaultConfig.version)?w(v,!0):a}).then(function(a){v.db=k.db=a;c._dbInfo=v;for(a=0;a<pa.length;a++){var b=pa[a];b!==c&&(b._dbInfo.db=
v.db,b._dbInfo.version=v.version)}})},_support:function(){try{if(!K)return!1;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(g){return!1}}(),iterate:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){M(c._dbInfo,
"readonly",function(g,k){if(g)return d(g);try{var e=k.objectStore(c._dbInfo.storeName).openCursor(),v=1;e.onsuccess=function(){var c=e.result;if(c){var d=c.value;d&&d.__local_forage_encoded_blob&&(d=D(d));d=a(d,c.key,v++);void 0!==d?b(d):c.continue()}else b()};e.onerror=function(){d(e.error)}}catch(Ga){d(Ga)}})}).catch(d)});return q(d,b),d},getItem:function(a,b){var c=this;a=l(a);var d=new r(function(b,d){c.ready().then(function(){M(c._dbInfo,"readonly",function(g,e){if(g)return d(g);try{var k=e.objectStore(c._dbInfo.storeName).get(a);
k.onsuccess=function(){var a=k.result;void 0===a&&(a=null);a&&a.__local_forage_encoded_blob&&(a=D(a));b(a)};k.onerror=function(){d(k.error)}}catch(qa){d(qa)}})}).catch(d)});return q(d,b),d},setItem:function(a,b,g){var c=this;a=l(a);var d=new r(function(d,g){var e;c.ready().then(function(){return e=c._dbInfo,"[object Blob]"===ea.call(b)?x(e.db).then(function(a){return a?b:L(b)}):b}).then(function(b){M(c._dbInfo,S,function(e,k){if(e)return g(e);try{var v=k.objectStore(c._dbInfo.storeName);null===b&&
(b=void 0);var C=v.put(b,a);k.oncomplete=function(){void 0===b&&(b=null);d(b)};k.onabort=k.onerror=function(){g(C.error?C.error:C.transaction.error)}}catch(Ha){g(Ha)}})}).catch(g)});return q(d,g),d},removeItem:function(a,b){var c=this;a=l(a);var d=new r(function(b,d){c.ready().then(function(){M(c._dbInfo,S,function(g,e){if(g)return d(g);try{var k=e.objectStore(c._dbInfo.storeName).delete(a);e.oncomplete=function(){b()};e.onerror=function(){d(k.error)};e.onabort=function(){d(k.error?k.error:k.transaction.error)}}catch(qa){d(qa)}})}).catch(d)});
return q(d,b),d},clear:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){M(b._dbInfo,S,function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).clear();g.oncomplete=function(){a()};g.onabort=g.onerror=function(){c(e.error?e.error:e.transaction.error)}}catch(U){c(U)}})}).catch(c)});return q(c,a),c},length:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){M(b._dbInfo,"readonly",function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).count();
e.onsuccess=function(){a(e.result)};e.onerror=function(){c(e.error)}}catch(U){c(U)}})}).catch(c)});return q(c,a),c},key:function(a,b){var c=this,d=new r(function(b,d){if(0>a)return void b(null);c.ready().then(function(){M(c._dbInfo,"readonly",function(g,e){if(g)return d(g);try{var k=!1,v=e.objectStore(c._dbInfo.storeName).openCursor();v.onsuccess=function(){var c=v.result;if(!c)return void b(null);0===a?b(c.key):k?b(c.key):(k=!0,c.advance(a))};v.onerror=function(){d(v.error)}}catch(Ga){d(Ga)}})}).catch(d)});
return q(d,b),d},keys:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){M(b._dbInfo,"readonly",function(d,g){if(d)return c(d);try{var e=g.objectStore(b._dbInfo.storeName).openCursor(),k=[];e.onsuccess=function(){var b=e.result;if(!b)return void a(k);k.push(b.key);b.continue()};e.onerror=function(){c(e.error)}}catch(qa){c(qa)}})}).catch(c)});return q(c,a),c},dropInstance:function(a,b){b=B.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||
c.name,a.storeName=a.storeName||c.storeName);a.name?(c=a.name===c.name&&this._dbInfo.db?r.resolve(this._dbInfo.db):w(a,!1).then(function(b){var c=T[a.name],d=c.forages;c.db=b;for(c=0;c<d.length;c++)d[c]._dbInfo.db=b;return b}),c=a.storeName?c.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;u(a);var d=T[a.name],g=d.forages;b.close();for(b=0;b<g.length;b++){var e=g[b];e._dbInfo.db=null;e._dbInfo.version=c}return(new r(function(b,d){var g=K.open(a.name,c);g.onerror=function(a){g.result.close();
d(a)};g.onupgradeneeded=function(){g.result.deleteObjectStore(a.storeName)};g.onsuccess=function(){var a=g.result;a.close();b(a)}})).then(function(a){d.db=a;for(var b=0;b<g.length;b++){var c=g[b];c._dbInfo.db=a;z(c._dbInfo)}}).catch(function(b){throw(ma(a,b)||r.resolve()).catch(function(){}),b;})}}):c.then(function(b){u(a);var c=T[a.name],d=c.forages;b.close();for(b=0;b<d.length;b++)d[b]._dbInfo.db=null;return(new r(function(b,c){var d=K.deleteDatabase(a.name);d.onerror=d.onblocked=function(a){var b=
d.result;b&&b.close();c(a)};d.onsuccess=function(){var a=d.result;a&&a.close();b(a)}})).then(function(a){c.db=a;for(a=0;a<d.length;a++)z(d[a]._dbInfo)}).catch(function(b){throw(ma(a,b)||r.resolve()).catch(function(){}),b;})})):c=r.reject("Invalid arguments");return q(c,b),c}};var ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ca=/^~~local_forage_type~([^~]+)~/,da=Object.prototype.toString,ba={serialize:function(a,b){var c="";if(a&&(c=da.call(a)),a&&("[object ArrayBuffer]"===
c||a.buffer&&"[object ArrayBuffer]"===da.call(a.buffer))){var d,e="__lfsc__:";a instanceof ArrayBuffer?(d=a,e+="arbf"):(d=a.buffer,"[object Int8Array]"===c?e+="si08":"[object Uint8Array]"===c?e+="ui08":"[object Uint8ClampedArray]"===c?e+="uic8":"[object Int16Array]"===c?e+="si16":"[object Uint16Array]"===c?e+="ur16":"[object Int32Array]"===c?e+="si32":"[object Uint32Array]"===c?e+="ui32":"[object Float32Array]"===c?e+="fl32":"[object Float64Array]"===c?e+="fl64":b(Error("Failed to get type for BinaryArray")));
b(e+Q(d))}else if("[object Blob]"===c)c=new FileReader,c.onload=function(){var c="~~local_forage_type~"+a.type+"~"+Q(this.result);b("__lfsc__:blob"+c)},c.readAsArrayBuffer(a);else try{b(JSON.stringify(a))}catch(k){console.error("Couldn't convert value into a JSON string: ",a),b(null,k)}},deserialize:function(a){if("__lfsc__:"!==a.substring(0,9))return JSON.parse(a);var b=a.substring(13);a=a.substring(9,13);if("blob"===a&&ca.test(b)){var c=b.match(ca);var e=c[1];b=b.substring(c[0].length)}b=I(b);switch(a){case "arbf":return b;
case "blob":return m([b],{type:e});case "si08":return new Int8Array(b);case "ui08":return new Uint8Array(b);case "uic8":return new Uint8ClampedArray(b);case "si16":return new Int16Array(b);case "ur16":return new Uint16Array(b);case "si32":return new Int32Array(b);case "ui32":return new Uint32Array(b);case "fl32":return new Float32Array(b);case "fl64":return new Float64Array(b);default:throw Error("Unkown type: "+a);}},stringToBuffer:I,bufferToString:Q};n={_driver:"webSQLStorage",_initStorage:function(a){var b=
this,c={db:null};if(a)for(var e in a)c[e]="string"!=typeof a[e]?a[e].toString():a[e];a=new r(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(Sa){return d(Sa)}c.db.transaction(function(e){J(e,c,function(){b._dbInfo=c;a()},function(a,b){d(b)})},d)});return c.serializer=ba,a},_support:"function"==typeof openDatabase,iterate:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){E(c,e,"SELECT * FROM "+
e.storeName,[],function(c,d){c=d.rows;d=c.length;for(var g=0;g<d;g++){var k=c.item(g),f=k.value;if(f&&(f=e.serializer.deserialize(f)),void 0!==(f=a(f,k.key,g+1)))return void b(f)}b()},function(a,b){d(b)})})}).catch(d)});return q(d,b),d},getItem:function(a,b){var c=this;a=l(a);var d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){E(c,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){(a=c.rows.length?c.rows.item(0).value:null)&&(a=e.serializer.deserialize(a));
b(a)},function(a,b){d(b)})})}).catch(d)});return q(d,b),d},setItem:function(a,b,e){return P.apply(this,[a,b,e,1])},removeItem:function(a,b){var c=this;a=l(a);var d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){E(c,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return q(d,b),d},clear:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){E(b,
d,"DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return q(c,a),c},length:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){E(b,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){b=c.rows.item(0).c;a(b)},function(a,b){c(b)})})}).catch(c)});return q(c,a),c},key:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){E(c,e,"SELECT key FROM "+
e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){a=c.rows.length?c.rows.item(0).key:null;b(a)},function(a,b){d(b)})})}).catch(d)});return q(d,b),d},keys:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){E(b,d,"SELECT key FROM "+d.storeName,[],function(b,c){b=[];for(var d=0;d<c.rows.length;d++)b.push(c.rows.item(d).key);a(b)},function(a,b){c(b)})})}).catch(c)});return q(c,a),c},dropInstance:function(a,b){b=B.apply(this,arguments);
var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?(new r(function(b){var d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0);b(a.storeName?{db:d,storeNames:[a.storeName]}:X(d))})).then(function(a){return new r(function(b,c){a.db.transaction(function(d){function e(a){return new r(function(b,c){d.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var g=[],f=0,k=a.storeNames.length;f<
k;f++)g.push(e(a.storeNames[f]));r.all(g).then(function(){b()}).catch(function(a){c(a)})},function(a){c(a)})})}):r.reject("Invalid arguments"),q(d,b),d}};try{var N="undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){N=!1}var la=function(a,b){for(var c=a.length,d=0;d<c;){var e=a[d],f=b;if(e===f||"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))return!0;d++}return!1},ia=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},
Y={},ka={},oa={INDEXEDDB:a,WEBSQL:n,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(a){var b={};if(a)for(var c in a)b[c]=a[c];b.keyPrefix=R(a,this._defaultConfig);try{var e=(localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1)}catch(C){e=!0}return!e||0<localStorage.length?(this._dbInfo=b,b.serializer=ba,r.resolve()):r.reject()},_support:N,iterate:function(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,
e=d.length,g=localStorage.length,f=1,h=0;h<g;h++){var m=localStorage.key(h);if(0===m.indexOf(d)){var v=localStorage.getItem(m);if(v&&(v=b.serializer.deserialize(v)),void 0!==(v=a(v,m.substring(e),f++)))return v}}});return q(d,b),d},getItem:function(a,b){var c=this;a=l(a);var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return q(d,b),d},setItem:function(a,b,e){var c=this;a=l(a);var d=c.ready().then(function(){void 0===
b&&(b=null);var d=b;return new r(function(e,g){var f=c._dbInfo;f.serializer.serialize(b,function(b,c){if(c)g(c);else try{localStorage.setItem(f.keyPrefix+a,b),e(d)}catch(ta){"QuotaExceededError"!==ta.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==ta.name||g(ta),g(ta)}})})});return q(d,e),d},removeItem:function(a,b){var c=this;a=l(a);var d=c.ready().then(function(){localStorage.removeItem(c._dbInfo.keyPrefix+a)});return q(d,b),d},clear:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,
c=localStorage.length-1;0<=c;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return q(c,a),c},length:function(a){var b=this.keys().then(function(a){return a.length});return q(b,a),b},key:function(a,b){var c=this,d=c.ready().then(function(){var b=c._dbInfo;try{var d=localStorage.key(a)}catch(Sa){d=null}return d&&(d=d.substring(b.keyPrefix.length)),d});return q(d,b),d},keys:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=
[],e=0;e<c;e++){var g=localStorage.key(e);0===g.indexOf(a.keyPrefix)&&d.push(g.substring(a.keyPrefix.length))}return d});return q(c,a),c},dropInstance:function(a,b){if(b=B.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name;a.storeName=a.storeName||c.storeName}var d,e=this;return d=a.name?(new r(function(b){b(a.storeName?R(a,e._defaultConfig):a.name+"/")})).then(function(a){for(var b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);0===c.indexOf(a)&&
localStorage.removeItem(c)}}):r.reject("Invalid arguments"),q(d,b),d}}};N=[oa.INDEXEDDB._driver,oa.WEBSQL._driver,oa.LOCALSTORAGE._driver];var fa=["dropInstance"],ha="clear getItem iterate key keys length removeItem setItem".split(" ").concat(fa),Ba={description:"",driver:N.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};N=new (function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var c in oa)if(oa.hasOwnProperty(c)){var d=
oa[c],e=d._driver;this[c]=e;Y[e]||this.defineDriver(d)}this._defaultConfig=O({},Ba);this._config=O({},this._defaultConfig,b);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":aa(a))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,
"_")),"version"===b&&"number"!=typeof a[b])return Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new r(function(b,c){try{var d=a._driver,e=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(e);for(var f=ha.concat("_initStorage"),g=0,h=f.length;g<
h;g++){var m=f[g];if((!la(fa,m)||a[m])&&"function"!=typeof a[m])return void c(e)}(function(){for(var b=function(a){return function(){var b=r.reject(Error("Method "+a+" is not implemented by the current driver"));return q(b,arguments[arguments.length-1]),b}},c=0,d=fa.length;c<d;c++){var e=fa[c];a[e]||(a[e]=b(e))}})();e=function(c){Y[d]&&console.info("Redefining LocalForage driver: "+d);Y[d]=a;ka[d]=c;b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(e,c):e(!!a._support):
e(!0)}catch(Ha){c(Ha)}});return p(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){a=Y[a]?r.resolve(Y[a]):r.reject(Error("Driver not found."));return p(a,b,c),a},a.prototype.getSerializer=function(a){var b=r.resolve(ba);return p(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return p(c,a,a),c},a.prototype.setDriver=function(a,b,c){function e(){g._config.driver=
g.driver()}function d(a){return g._extend(a),e(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(d).catch(b)}e();return g._driverSet=r.reject(Error("No available storage method found.")),g._driverSet}var c=0;return b()}}var g=this;ia(a)||(a=[a]);var h=this._getSupportedDrivers(a);return this._driverSet=(null!==this._driverSet?this._driverSet.catch(function(){return r.resolve()}):
r.resolve()).then(function(){var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver;e();g._wrapLibraryMethodsWithReady();g._initDriver=f(h)})}).catch(function(){e();return g._driverSet=r.reject(Error("No available storage method found.")),g._driverSet}),p(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!ka[a]},a.prototype._extend=function(a){O(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,e=a.length;c<
e;c++){var d=a[c];this.supports(d)&&b.push(d)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,b=ha.length;a<b;a++)Z(this,ha[a])},a.prototype.createInstance=function(b){return new a(b)},a}());b.exports=N},{3:3}]},{},[4])(4)}));X=X||self.localforage},Aa=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){Ta();b&&(global.fetch=global.fetch||require("node-fetch"),global.crypto=global.crypto||require("crypto").webcrypto);t=a=>h(String.fromCharCode.apply(null,a).replace(/\n/g,
"+").replace(/\s/g,"="));try{yield(yield X.createInstance({name:l+"jshello"})).setItem(l+"jshello","available")}catch(y){throw y;}I=yield X.createInstance({name:"dynamltsinfo"});aa=f(f("v2")+String.fromCharCode(A.charCodeAt(A.length/2)+1)+f(A));ia=f(String.fromCharCode((p||x).charCodeAt(0)+10)+f(l)+f(p||x)+u);try{let a=yield I.getItem(aa);a&&([F,G]=JSON.parse(yield ra(a)))}catch(y){}try{null==F&&(F=Qa||sa())}catch(y){}la=yield X.createInstance({name:"dynamltsuns"+f(String.fromCharCode((p||x).charCodeAt(0)+
10)+f(F)+f(l))});try{w=yield I.getItem(ia)}catch(y){}}),ua,va=y=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){ua||(ua=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let a={hs:p,og:x,pd:l,vm:u,dt:b?"server":"browser",ed:"javascript",cu:F,ad:A,os:JSON.stringify(L),fn:D},h={};if(G){let a=yield I.getItem(aa);a&&([F,G]=JSON.parse(yield ra(a)));h["lts-time"]=G}M&&(a.sp=M);Q&&(a.lm=Q);H&&(a.cw=H);w=yield e.race([(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let b=
(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");G&&(I.setItem(aa,yield Ea(JSON.stringify([F,b]))),G=b);let m;var q="auth/?ext="+encodeURIComponent(f(JSON.stringify(a)));let l=!1,n=!1,t,u=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a&&!a.ok)try{let b=yield a.text();if(b){let a=JSON.parse(b);a.errorCode&&(t=a,100<a.errorCode&&200>a.errorCode&&(w=null,n=l=!0))}}catch(bb){}});try{m=yield e.race([fetch(E[0]+q,{headers:h,cache:y?"reload":"default",mode:"cors",timeout:1E4}),new e((a,
b)=>{setTimeout(b,1E4)})]),yield u(m)}catch(Fa){}if(!(G||m&&m.ok||l))try{m=yield fetch(E[1]+q,{headers:h,mode:"cors",timeout:3E4}),yield u(m)}catch(Fa){}if(!(G||m&&m.ok||l))try{m=yield fetch(E[0]+q,{headers:h,mode:"cors",timeout:3E4}),yield u(m)}catch(Fa){}t&&151==t.errorCode&&(I.removeItem(aa),I.removeItem(ia),F=sa(),a.cu=F,G=void 0,q=encodeURIComponent(f(JSON.stringify(a))),m=yield fetch(E[0]+"auth/?ext="+q,{headers:h,mode:"cors",timeout:3E4}),yield u(m));(()=>{if(!m||!m.ok){n&&I.setItem(ia,"");
if(t)if(111==t.errorCode)var a=t.message;else a=t.message.trim(),a.endsWith(".")||(a+="."),a=p||x?`An error occurred during authorization: ${a} Contact the site administrator for more information.`:`An error occurred during authorization: ${a} [contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.`;else a=p||x?ca.failConnect:ca.publicTrialFailConnect;a=Error(a);t&&t.errorCode&&(a.ltsErrorCode=t.errorCode);throw a;}})();q=yield m.text();try{G||(I.setItem(aa,yield Ea(JSON.stringify([F,
b]))),G=b),I.setItem(ia,q)}catch(Fa){}return q}))(),new e((a,b)=>{let e;e=p||x?ca.networkTimeout:ca.publicTrialNetworkTimeout;setTimeout(()=>b(Error(e)),w?3E3:15E3)})])}catch(m){n&&(a.dwt?self.console.error(m):console.error(m)),J=m}Z=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");ua=null}))());yield ua}),wa,xa=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){wa||(wa=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){Y(F);if(w){J&&ba&&(ba(J),ba=null);var b={dm:A};n&&(b.bd=
!0);b.brtk=!0;b.ls=E[0];p&&(b.hs=p);x&&(b.og=x);b.cu=F;D&&(b.fn=D);l&&(b.product=l);H&&(b.cw=H);L&&(b.os=JSON.stringify(L));Y(w);try{if(a.dwt)b.ar=w;else{let a=JSON.parse(yield Oa(w));a.ba&&(b.ba=a.ba);a.usu&&(b.usu=a.usu);a.trial&&(b.trial=a.trial);a.its&&(b.its=a.its);1==b.trial&&a.msg?b.msg=a.msg:J?b.msg=J.message||J:a.msg&&(b.msg=a.msg);b.ar=a.in}b.bafc=!!J}catch(m){}Y(b);try{yield W(b)}catch(m){}yield Ua();P||(P=!0);wa=null}else if(!P)throw da(J.message),J;}))());yield wa}),Ua=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let a=
(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),b=yield K();Y(b);if(b&&b<a){if(J)throw Error(ca.ltsErrorAndCacheExpire);throw Error(ca.checkLocalTime);}}),Ia=!1,Ja=null,ya=(a,b)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){O=O.then(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let f=yield la.keys();b||(Ia?a&&(f=f.filter(b=>b<a)):a&&f.includes(a)?f=[a]:(f=[],Y("Unexpected null key")));if(f.length){Ia||(Ia=!0);for(let a=0;a<f.length/1E3;++a){let b=f.slice(1E3*a,1E3*
a+999);var e=[];for(let a=0;a<b.length;++a)e.push(yield la.getItem(b[a]));let h=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");I.setItem(aa,yield Ea(JSON.stringify([F,h])));{let a=yield I.getItem(aa);a&&([F,G]=JSON.parse(yield ra(a)))}try{let a=yield fetch(E[0]+"verify",{mode:"cors",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json","lts-time":G},timeout:3E4});if(a.ok){G=h;for(e=0;e<b.length;++e)yield la.removeItem(b[e]);(yield a.json()).handshakeUpdateTime>Z&&(yield va(!0),
yield xa())}else throw Error("verify failed. Status Code: "+a.status);}catch(Ra){throw ba&&(ba(Ra),ba=null),Ra;}}V&&V()}}catch(B){}}));return yield O});return{i:a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){n=a.bd;z=a.version;u=z.split(".")[0];A=a.dm;p=a.pk;x=a.og;L=a.browserInfo;D=a.deviceFriendlyName;a.ls&&a.ls.length&&(E=a.ls,1==E.length&&E.push(E[0]));M=a.sp;Q=a.lm;H=a.cw;a.lf&&(X=a.lf);a.pu&&(Qa=a.pu);a.gu&&(sa=a.gu);a.fdaa&&(Oa=a.fdaa);a.feab&&(Pa=a.feab);W=a.updateLicense;ea=
a.getMinExpireTime;K=a.getMaxExpireTime;a.sutlcb&&(V=a.sutlcb);yield Aa();yield va();yield xa();J||ya(null,!0);return{ar:w,cu:F}}),c:()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){var a=new Date,b=a.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");let e=yield ea(),f=yield K();f&&f<b?(yield va(!0),yield xa()):e&&e<b&&(a.setMinutes(a.getMinutes()-6),b=a,a=null,a=b.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),G<a&&va().then(()=>xa()))}),s:(b,e,f,h)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a.dwt&&
!e)yield ya(f);else{try{let a=e.startsWith("{")&&e.endsWith("}")?yield Pa(e):e;yield la.setItem(f,a)}catch(na){}h&&(yield ya(f));Ja&&clearTimeout(Ja);Ja=setTimeout(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield ya()}),36E4)}}),gcu:a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let b=f(f("v2")+String.fromCharCode(a.charCodeAt(a.length/2)+1)+f(a)),e;try{Ta();t=a=>h(String.fromCharCode.apply(null,a).replace(/\n/g,"+").replace(/\s/g,"="));let a=yield(yield X.createInstance({name:"dynamltsinfo"})).getItem(b);
a&&([e]=JSON.parse(yield ra(a)))}catch(B){}e||(e=sa());return e}),mem:ca,caret:Ua}})({product:"dbr",log:H,debugLog:ka}),self.scsd=W.s,p.updateLicense=ha,p.getMinExpireTime=Wa,p.getMaxExpireTime=Xa,yield W.i(p)}catch(Q){if(l)da=!1,yield x(),u=Q.ltsErrorCode,V=Q.message||Q;else throw Q;}});let x=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let e={pk:b,dm:a};z&&(e.bd=!0);yield ha(e)});da?yield n():yield x();f.postMessage({type:"load",success:!0,version:Module.BarcodeReaderWasm.getVersion(),
trial:K,ltsErrorCode:u,message:V})}catch(e){f.postMessage({type:"load",success:!1,ltsErrorCode:e&&e.ltsErrorCode,message:e&&e.message,trial:K,stack:z&&e?e.stack:null})}break;case "createInstance":u=Ya++;try{var L=new Module.BarcodeReaderWasm(p.bScanner,u);x.set(u,L);let b=JSON.parse(L.getRuntimeSettings());p.bScanner?(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);a||Z||(b.barcodeFormatIds=235931647);L.updateRuntimeSettings(JSON.stringify(b))}catch(e){A(e,
n);break}f.postMessage({type:"task",id:n,body:{success:!0,instanceID:u}});break;case "destroy":try{x.get(u).delete(),x.delete(u)}catch(e){A(e,n);break}f.postMessage({type:"task",id:n,body:{success:!0}});break;case "decodeBuffer":{L=z?Date.now():0;let a,b,p,w;try{a=z?Date.now():0,za(l.buffer,l.stride*l.height),b=z?Date.now():0,w=JSON.parse(x.get(u).decodeBufferPtr(P,l.width,l.height,l.stride,l.format)),p=z?Date.now():0}catch(ab){A(ab,n);break}f.postMessage({type:"task",id:n,body:{success:!0,decodeReturn:w,
buffer:l.buffer}},[l.buffer.buffer]);ka(["timeWorkerGetMsg: "+L,"timeBeforeSendBufferToWasm: "+a+" "+(a-L),"timeBeforeDecode: "+b+" "+(b-a),"timefinishDecode: "+p+" "+(p-b)].join("\n"));break}case "decodeFileInMemory":{let a;try{a=JSON.parse(x.get(u).decodeFileInMemory(l.bytes))}catch(h){A(h,n);break}f.postMessage({type:"task",id:n,body:{success:!0,decodeReturn:a}});break}case "clearMapDecodeRecord":try{x.get(u).clearMapDecodeRecord()}catch(e){A(e,n);break}f.postMessage({type:"task",id:n,body:{success:!0}});
break;case "getRuntimeSettings":{let a;try{a=x.get(u).getRuntimeSettings()}catch(h){A(h,n);break}f.postMessage({type:"task",id:n,body:{success:!0,results:a}});break}case "updateRuntimeSettings":{let a;try{a=JSON.parse(x.get(u).updateRuntimeSettings(l.settings))}catch(h){A(h,n);break}f.postMessage({type:"task",id:n,body:{success:!0,updateReturn:a}});break}case "resetRuntimeSettings":try{let a=x.get(u);a.resetRuntimeSettings();let b=JSON.parse(a.getRuntimeSettings());a.bScanner?(b.localizationModes=
[2,0,0,0,0,0,0,0],b.deblurLevel=0,b.barcodeZoneMinDistanceToImageBorders=9):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);Z||(b.barcodeFormatIds=235931647);a.updateRuntimeSettings(JSON.stringify(b))}catch(e){A(b,n);break}f.postMessage({type:"task",id:n,body:{success:!0}});break;case "outputSettingsToString":{let a;try{a=x.get(u).outputSettingsToString()}catch(h){A(h,n);break}f.postMessage({type:"task",id:n,body:{success:!0,results:a}});break}case "initRuntimeSettingsWithString":{let a;
try{a=JSON.parse(x.get(u).initRuntimeSettingsWithString(l.settings))}catch(h){A(h,n);break}f.postMessage({type:"task",id:n,body:{success:!0,initReturn:a}});break}case "getIntermediateResults":{let a=[];try{var O=x.get(u).getIntermediateResults(),ea=JSON.parse(O,(b,e)=>"bytes"===b&&"ptr"in e&&"length"in e?(b=Module.BarcodeReaderWasm.getBytes(e.ptr,e.length),b=b.slice(0),a.push(b.buffer),b):e)}catch(h){A(h,n);break}f.postMessage({type:"task",id:n,body:{success:!0,results:ea}},a);x.get(u).freeIntermediateResults();
break}case "setModeArgument":{let a;try{a=JSON.parse(x.get(u).setModeArgument(l.modeName,l.index,l.argumentName,l.argumentValue))}catch(h){A(h,n);break}f.postMessage({type:"task",id:n,body:{success:!0,setReturn:a}});break}case "getModeArgument":{let a;try{a=JSON.parse(x.get(u).getModeArgument(l.modeName,l.index,l.argumentName))}catch(h){A(h,n);break}f.postMessage({type:"task",id:n,body:{success:!0,getReturn:a}});break}case "updateScanSettings":try{let a=x.get(u),b=l.settings;a.duplicateForgetTime=
b.duplicateForgetTime;a.oneDRememberFrameCount=b.oneDRememberFrameCount;a.oneDTrustFrameCount=b.oneDTrustFrameCount;b.frameFilter?a.setFrameFilter(JSON.stringify(b.frameFilter)):a.setFrameFilter("")}catch(e){A(e,n);break}f.postMessage({type:"task",id:n,body:{success:!0}});break;case "getScanSettings":l={};try{let a=x.get(u);l.duplicateForgetTime=a.duplicateForgetTime;l.oneDRememberFrameCount=a.oneDRememberFrameCount;l.oneDTrustFrameCount=a.oneDTrustFrameCount;let b=a.getFrameFilter();b&&(l.frameFilter=
JSON.parse(b))}catch(e){A(e,n);break}f.postMessage({type:"task",id:n,body:{success:!0,results:l}});break;default:console.warn("Unmatched task: ",b)}})};if(a)f.on("message",b);else f.onmessage=b;let H=a=>{f.postMessage({type:"log",message:a})},ka=a=>{z&&H(a)},A=(a,b)=>{f.postMessage({type:"task",id:b,body:{success:!1,message:a.message,stack:a.stack}});setTimeout(()=>{throw a;},0)}})();
