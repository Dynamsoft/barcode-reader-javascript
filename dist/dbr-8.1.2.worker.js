'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,g){a!=Array.prototype&&a!=Object.prototype&&(a[b]=g.value)};
$jscomp.polyfill=function(a,b,g,l){if(b){g=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var q=a[l];q in g||(g[q]={});g=g[q]}a=a[a.length-1];l=g[a];b=b(l);b!=l&&null!=b&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function g(a){return a instanceof q?a:new q(function(b,v){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var l=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){l(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var g=a[b];a[b]=null;try{g()}catch(w){this.asyncThrow_(w)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var q=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(M){b.reject(M)}};q.prototype.createResolveAndReject_=function(){function a(a){return function(v){g||(g=!0,a.call(b,v))}}var b=this,g=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};q.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof q)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};q.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(M){this.reject_(M);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};q.prototype.reject_=function(a){this.settle_(2,a)};q.prototype.fulfill_=function(a){this.settle_(1,a)};q.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};q.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)D.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var D=new b;q.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};q.prototype.settleSameAsThenable_=function(a,b){var g=this.createResolveAndReject_();try{a.call(b,g.resolve,g.reject)}catch(w){g.reject(w)}};q.prototype.then=function(a,b){function g(a,b){return"function"==typeof a?function(b){try{l(a(b))}catch(W){v(W)}}:b}var l,v,z=new q(function(a,b){l=a;v=b});this.callWhenSettled_(g(a,l),g(b,v));return z};
q.prototype.catch=function(a){return this.then(void 0,a)};q.prototype.callWhenSettled_=function(a,b){function g(){switch(l.state_){case 1:a(l.result_);break;case 2:b(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?D.asyncExecute(g):this.onSettledCallbacks_.push(g)};q.resolve=g;q.reject=function(a){return new q(function(b,g){g(a)})};q.race=function(a){return new q(function(b,l){for(var q=$jscomp.makeIterator(a),v=q.next();!v.done;v=q.next())g(v.value).callWhenSettled_(b,
l)})};q.all=function(a){var b=$jscomp.makeIterator(a),l=b.next();return l.done?g([]):new q(function(a,q){function v(b){return function(g){w[b]=g;C--;0==C&&a(w)}}var w=[],C=0;do w.push(void 0),C++,g(l.value).callWhenSettled_(v(w.length-1),q),l=b.next();while(!l.done)})};return q},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(g){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+b++,g)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(g){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var g=a.next();$jscomp.generator.ensureIteratorResultIsObject_(g);if(g.done)this.yieldResult=g.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(g.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,g){g?this.finallyContexts_[g]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,g){try{var l=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(l);if(!l.done)return this.context_.stop_(),l;var q=l.value}catch(D){return this.context_.yieldAllIterator_=null,this.context_.throw_(D),this.nextStep_()}this.context_.yieldAllIterator_=null;g.call(this.context_,q);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function g(b){return a.throw(b)}return new Promise(function(l,q){function D(a){a.done?l(a.value):Promise.resolve(a.value).then(b,g).then(D,q)}D(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
(()=>{const a=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);let b;a&&(b=require("worker_threads"));let g=a?b.parentPort:self,l,q,D,v,z,M,w,Q,R,K=!1,C,V,W,H=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"],xa,ka,pa,S,E,ya,T,qa=!1,za=!1,ha=!1,Aa=Promise.resolve();a||!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=
typeof global?global:"undefined"!=typeof self?self:this).localforage=a()}(function(){return function x(a,b,g){function f(I,k){if(!b[I]){if(!a[I]){var u="function"==typeof require&&require;if(!k&&u)return u(I,!0);if(d)return d(I,!0);k=Error("Cannot find module '"+I+"'");throw k.code="MODULE_NOT_FOUND",k;}k=b[I]={exports:{}};a[I][0].call(k.exports,function(b){return f(a[I][1][b]||b)},k,k.exports,x,a,b,g)}return b[I].exports}for(var d="function"==typeof require&&require,p=0;p<g.length;p++)f(g[p]);return f}({1:[function(a,
b,g){(function(a){function f(){p=!0;for(var a,b,f=l.length;f;){b=l;l=[];for(a=-1;++a<f;)b[a]();f=l.length}p=!1}var d=a.MutationObserver||a.WebKitMutationObserver;if(d){var g=0;d=new d(f);var x=a.document.createTextNode("");d.observe(x,{characterData:!0});var k=function(){x.data=g=++g%2}}else if(a.setImmediate||void 0===a.MessageChannel)k="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){f();
b.onreadystatechange=null;b.parentNode.removeChild(b);b=null};a.document.documentElement.appendChild(b)}:function(){setTimeout(f,0)};else{var u=new a.MessageChannel;u.port1.onmessage=f;k=function(){u.port2.postMessage(0)}}var p,l=[];b.exports=function(a){1!==l.push(a)||p||k()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,g){function f(){}function d(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");
this.state=y;this.queue=[];this.outcome=void 0;a!==f&&k(this,a)}function p(a,b,f){this.promise=a;"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"==typeof f&&(this.onRejected=f,this.callRejected=this.otherCallRejected)}function l(a,b,f){r(function(){try{var d=b(f)}catch(Ka){return n.reject(a,Ka)}d===a?n.reject(a,new TypeError("Cannot resolve promise with itself")):n.resolve(a,d)})}function q(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&
"function"==typeof b)return function(){b.apply(a,arguments)}}function k(a,b){function f(b){k||(k=!0,n.reject(a,b))}function d(b){k||(k=!0,n.resolve(a,b))}var k=!1,g=u(function(){b(d,f)});"error"===g.status&&f(g.value)}function u(a,b){var f={};try{f.value=a(b),f.status="success"}catch(Ja){f.status="error",f.value=Ja}return f}var r=a(1),n={},w=["REJECTED"],v=["FULFILLED"],y=["PENDING"];b.exports=d;d.prototype.catch=function(a){return this.then(null,a)};d.prototype.then=function(a,b){if("function"!=
typeof a&&this.state===v||"function"!=typeof b&&this.state===w)return this;var d=new this.constructor(f);this.state!==y?l(d,this.state===v?a:b,this.outcome):this.queue.push(new p(d,a,b));return d};p.prototype.callFulfilled=function(a){n.resolve(this.promise,a)};p.prototype.otherCallFulfilled=function(a){l(this.promise,this.onFulfilled,a)};p.prototype.callRejected=function(a){n.reject(this.promise,a)};p.prototype.otherCallRejected=function(a){l(this.promise,this.onRejected,a)};n.resolve=function(a,
b){var f=u(q,b);if("error"===f.status)return n.reject(a,f.value);if(f=f.value)k(a,f);else{a.state=v;a.outcome=b;f=-1;for(var d=a.queue.length;++f<d;)a.queue[f].callFulfilled(b)}return a};n.reject=function(a,b){a.state=w;a.outcome=b;for(var f=-1,d=a.queue.length;++f<d;)a.queue[f].callRejected(b);return a};d.resolve=function(a){return a instanceof this?a:n.resolve(new this(f),a)};d.reject=function(a){var b=new this(f);return n.reject(b,a)};d.all=function(a){function b(a,b){d.resolve(a).then(function(a){p[b]=
a;++u!==k||g||(g=!0,n.resolve(l,p))},function(a){g||(g=!0,n.reject(l,a))})}var d=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var k=a.length,g=!1;if(!k)return this.resolve([]);for(var p=Array(k),u=0,I=-1,l=new this(f);++I<k;)b(a[I],I);return l};d.race=function(a){function b(a){d.resolve(a).then(function(a){g||(g=!0,n.resolve(u,a))},function(a){g||(g=!0,n.reject(u,a))})}var d=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));
var k=a.length,g=!1;if(!k)return this.resolve([]);for(var p=-1,u=new this(f);++p<k;)b(a[p]);return u}},{1:1}],3:[function(a,b,g){b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"function"!=typeof b.Promise&&(b.Promise=a(2))},{2:2}],4:[function(a,b,g){function f(c,a){c=c||[];a=a||{};try{return new Blob(c,a)}catch(A){if("TypeError"!==A.name)throw A;for(var e=new ("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:
"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<c.length;b+=1)e.append(c[b]);return e.getBlob(a.type)}}function d(c,a){a&&c.then(function(c){a(null,c)},function(c){a(c)})}function p(c,a,h){"function"==typeof a&&c.then(a);"function"==typeof h&&c.catch(h)}function l(c){return"string"!=typeof c&&(console.warn(c+" used as a key, but it is not a string."),c=String(c)),c}function n(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-
1]}function k(c){return(new t(function(a){var e=c.transaction(S,N),b=f([""]);e.objectStore(S).put(b,"key");e.onabort=function(c){c.preventDefault();c.stopPropagation();a(!1)};e.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);a(e||!c||43<=parseInt(c[1],10))}})).catch(function(){return!1})}function u(c){return"boolean"==typeof T?t.resolve(T):k(c).then(function(c){return T=c})}function q(c){c=J[c.name];var a={};a.promise=new t(function(c,e){a.resolve=
c;a.reject=e});c.deferredOperations.push(a);c.dbReady?c.dbReady=c.dbReady.then(function(){return a.promise}):c.dbReady=a.promise}function r(c){if(c=J[c.name].deferredOperations.pop())return c.resolve(),c.promise}function w(c,a){if(c=J[c.name].deferredOperations.pop())return c.reject(a),c.promise}function v(c,a){return new t(function(e,b){if(J[c.name]=J[c.name]||F(),c.db){if(!a)return e(c.db);q(c);c.db.close()}var h=[c.name];a&&h.push(c.version);var m=K.open.apply(K,h);a&&(m.onupgradeneeded=function(a){var e=
m.result;try{e.createObjectStore(c.storeName),1>=a.oldVersion&&e.createObjectStore(S)}catch(U){if("ConstraintError"!==U.name)throw U;console.warn('The database "'+c.name+'" has been upgraded from version '+a.oldVersion+" to version "+a.newVersion+', but the storage "'+c.storeName+'" already exists.')}});m.onerror=function(a){a.preventDefault();b(m.error)};m.onsuccess=function(){e(m.result);r(c)}})}function y(a,e){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),b=a.version>a.db.version;
return(a.version<a.db.version&&(a.version!==e&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),b||c)?(c&&(e=a.db.version+1,e>a.version&&(a.version=e)),!0):!1}function C(a){return new t(function(c,h){var e=new FileReader;e.onerror=h;e.onloadend=function(e){e=btoa(e.target.result||"");c({__local_forage_encoded_blob:!0,data:e,type:a.type})};e.readAsBinaryString(a)})}function B(a){for(var c=atob(a.data),h=c.length,
b=new ArrayBuffer(h),A=new Uint8Array(b),m=0;m<h;m++)A[m]=c.charCodeAt(m);return f([b],{type:a.type})}function D(a){var c=this,h=c._initReady().then(function(){var a=J[c._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return p(h,a,a),h}function E(a){q(a);for(var c=J[a.name],h=c.forages,b=0;b<h.length;b++){var A=h[b];A._dbInfo.db&&(A._dbInfo.db.close(),A._dbInfo.db=null)}return a.db=null,v(a,!1).then(function(c){return a.db=c,y(a)?v(a,!0):c}).then(function(e){a.db=c.db=e;for(var b=0;b<h.length;b++)h[b]._dbInfo.db=
e}).catch(function(c){throw w(a,c),c;})}function z(a,e,h,b){void 0===b&&(b=1);try{var c=a.db.transaction(a.storeName,e);h(null,c)}catch(m){if(0<b&&(!a.db||"InvalidStateError"===m.name||"NotFoundError"===m.name))return t.resolve().then(function(){if(!a.db||"NotFoundError"===m.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),v(a,!0)}).then(function(){return E(a).then(function(){z(a,e,h,b-1)})}).catch(h);h(m)}}function F(){return{forages:[],
db:null,dbReady:null,deferredOperations:[]}}function H(a){var c=.75*a.length;var h=a.length,b=0;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);var A=new ArrayBuffer(c),m=new Uint8Array(A);for(c=0;c<h;c+=4){var d=Y.indexOf(a[c]);var f=Y.indexOf(a[c+1]);var U=Y.indexOf(a[c+2]);var k=Y.indexOf(a[c+3]);m[b++]=d<<2|f>>4;m[b++]=(15&f)<<4|U>>2;m[b++]=(3&U)<<6|63&k}return A}function G(a){var c=new Uint8Array(a),h="";for(a=0;a<c.length;a+=3)h+=Y[c[a]>>2],h+=Y[(3&c[a])<<4|c[a+1]>>4],h+=Y[(15&c[a+1])<<
2|c[a+2]>>6],h+=Y[63&c[a+2]];return 2==c.length%3?h=h.substring(0,h.length-1)+"=":1==c.length%3&&(h=h.substring(0,h.length-2)+"=="),h}function M(a,e,h,b){a.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],h,b)}function X(a,e,h,b,d,m){a.executeSql(h,b,d,function(a,c){c.code===c.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(a,A){A.rows.length?m(a,c):M(a,e,function(){a.executeSql(h,
b,d,m)},m)},m):m(a,c)},m)}function Q(a,b,h,Ba){var c=this;a=l(a);var e=new t(function(e,m){c.ready().then(function(){void 0===b&&(b=null);var d=b,f=c._dbInfo;f.serializer.serialize(b,function(b,A){A?m(A):f.db.transaction(function(c){X(c,f,"INSERT OR REPLACE INTO "+f.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){e(d)},function(a,c){m(c)})},function(b){if(b.code===b.QUOTA_ERR){if(0<Ba)return void e(Q.apply(c,[a,d,h,Ba-1]));m(b)}})})}).catch(m)});return d(e,h),e}function W(a){return new t(function(c,
b){a.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(b,e){b=[];for(var h=0;h<e.rows.length;h++)b.push(e.rows.item(h).name);c({db:a,storeNames:b})},function(a,c){b(c)})},function(a){b(a)})})}function R(a,b){var c=a.name+"/";return a.storeName!==b.storeName&&(c+=a.storeName+"/"),c}function Z(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function O(){for(var a=
1;a<arguments.length;a++){var b=arguments[a];if(b)for(var h in b)b.hasOwnProperty(h)&&(ea(b[h])?arguments[0][h]=b[h].slice():arguments[0][h]=b[h])}return arguments[0]}var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},K=function(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=
typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}();"undefined"==typeof Promise&&a(3);var t=Promise,S="local-forage-detect-blob-support",T=void 0,J={},da=Object.prototype.toString,N="readwrite";a={_driver:"asyncStorage",_initStorage:function(a){function c(){return t.resolve()}var b=this,d={db:null};if(a)for(var f in a)d[f]=a[f];var m=J[d.name];m||(m=F(),J[d.name]=m);m.forages.push(b);b._initReady||(b._initReady=
b.ready,b.ready=D);a=[];for(f=0;f<m.forages.length;f++){var k=m.forages[f];k!==b&&a.push(k._initReady().catch(c))}var g=m.forages.slice(0);return t.all(a).then(function(){return d.db=m.db,v(d,!1)}).then(function(a){return d.db=a,y(d,b._defaultConfig.version)?v(d,!0):a}).then(function(a){d.db=m.db=a;b._dbInfo=d;for(a=0;a<g.length;a++){var c=g[a];c!==b&&(c._dbInfo.db=d.db,c._dbInfo.version=d.version)}})},_support:function(){try{if(!K)return!1;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&
!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(h){return!1}}(),iterate:function(a,b){var c=this,e=new t(function(b,e){c.ready().then(function(){z(c._dbInfo,"readonly",function(h,d){if(h)return e(h);try{var m=d.objectStore(c._dbInfo.storeName).openCursor(),f=1;m.onsuccess=function(){var c=m.result;if(c){var e=c.value;
e&&e.__local_forage_encoded_blob&&(e=B(e));e=a(e,c.key,f++);void 0!==e?b(e):c.continue()}else b()};m.onerror=function(){e(m.error)}}catch(sa){e(sa)}})}).catch(e)});return d(e,b),e},getItem:function(a,b){var c=this;a=l(a);var e=new t(function(b,e){c.ready().then(function(){z(c._dbInfo,"readonly",function(h,d){if(h)return e(h);try{var m=d.objectStore(c._dbInfo.storeName).get(a);m.onsuccess=function(){var a=m.result;void 0===a&&(a=null);a&&a.__local_forage_encoded_blob&&(a=B(a));b(a)};m.onerror=function(){e(m.error)}}catch(la){e(la)}})}).catch(e)});
return d(e,b),e},setItem:function(a,b,h){var c=this;a=l(a);var e=new t(function(e,h){var d;c.ready().then(function(){return d=c._dbInfo,"[object Blob]"===da.call(b)?u(d.db).then(function(a){return a?b:C(b)}):b}).then(function(b){z(c._dbInfo,N,function(d,m){if(d)return h(d);try{var f=m.objectStore(c._dbInfo.storeName);null===b&&(b=void 0);var A=f.put(b,a);m.oncomplete=function(){void 0===b&&(b=null);e(b)};m.onabort=m.onerror=function(){h(A.error?A.error:A.transaction.error)}}catch(ta){h(ta)}})}).catch(h)});
return d(e,h),e},removeItem:function(a,b){var c=this;a=l(a);var e=new t(function(b,e){c.ready().then(function(){z(c._dbInfo,N,function(h,d){if(h)return e(h);try{var m=d.objectStore(c._dbInfo.storeName).delete(a);d.oncomplete=function(){b()};d.onerror=function(){e(m.error)};d.onabort=function(){e(m.error?m.error:m.transaction.error)}}catch(la){e(la)}})}).catch(e)});return d(e,b),e},clear:function(a){var c=this,b=new t(function(a,b){c.ready().then(function(){z(c._dbInfo,N,function(e,h){if(e)return b(e);
try{var d=h.objectStore(c._dbInfo.storeName).clear();h.oncomplete=function(){a()};h.onabort=h.onerror=function(){b(d.error?d.error:d.transaction.error)}}catch(U){b(U)}})}).catch(b)});return d(b,a),b},length:function(a){var c=this,b=new t(function(a,b){c.ready().then(function(){z(c._dbInfo,"readonly",function(e,h){if(e)return b(e);try{var d=h.objectStore(c._dbInfo.storeName).count();d.onsuccess=function(){a(d.result)};d.onerror=function(){b(d.error)}}catch(U){b(U)}})}).catch(b)});return d(b,a),b},
key:function(a,b){var c=this,e=new t(function(b,e){if(0>a)return void b(null);c.ready().then(function(){z(c._dbInfo,"readonly",function(h,d){if(h)return e(h);try{var f=!1,m=d.objectStore(c._dbInfo.storeName).openCursor();m.onsuccess=function(){var c=m.result;if(!c)return void b(null);0===a?b(c.key):f?b(c.key):(f=!0,c.advance(a))};m.onerror=function(){e(m.error)}}catch(sa){e(sa)}})}).catch(e)});return d(e,b),e},keys:function(a){var c=this,b=new t(function(a,b){c.ready().then(function(){z(c._dbInfo,
"readonly",function(e,h){if(e)return b(e);try{var d=h.objectStore(c._dbInfo.storeName).openCursor(),f=[];d.onsuccess=function(){var c=d.result;if(!c)return void a(f);f.push(c.key);c.continue()};d.onerror=function(){b(d.error)}}catch(la){b(la)}})}).catch(b)});return d(b,a),b},dropInstance:function(a,b){b=n.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);a.name?(c=a.name===c.name&&this._dbInfo.db?t.resolve(this._dbInfo.db):
v(a,!1).then(function(b){var c=J[a.name],e=c.forages;c.db=b;for(c=0;c<e.length;c++)e[c]._dbInfo.db=b;return b}),c=a.storeName?c.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;q(a);var e=J[a.name],h=e.forages;b.close();for(b=0;b<h.length;b++){var d=h[b];d._dbInfo.db=null;d._dbInfo.version=c}return(new t(function(b,e){var h=K.open(a.name,c);h.onerror=function(a){h.result.close();e(a)};h.onupgradeneeded=function(){h.result.deleteObjectStore(a.storeName)};h.onsuccess=
function(){var a=h.result;a.close();b(a)}})).then(function(a){e.db=a;for(var b=0;b<h.length;b++){var c=h[b];c._dbInfo.db=a;r(c._dbInfo)}}).catch(function(b){throw(w(a,b)||t.resolve()).catch(function(){}),b;})}}):c.then(function(b){q(a);var c=J[a.name],e=c.forages;b.close();for(b=0;b<e.length;b++)e[b]._dbInfo.db=null;return(new t(function(b,c){var e=K.deleteDatabase(a.name);e.onerror=e.onblocked=function(a){var b=e.result;b&&b.close();c(a)};e.onsuccess=function(){var a=e.result;a&&a.close();b(a)}})).then(function(a){c.db=
a;for(a=0;a<e.length;a++)r(e[a]._dbInfo)}).catch(function(b){throw(w(a,b)||t.resolve()).catch(function(){}),b;})})):c=t.reject("Invalid arguments");return d(c,b),c}};var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aa=/^~~local_forage_type~([^~]+)~/,ba=Object.prototype.toString,V={serialize:function(a,b){var c="";if(a&&(c=ba.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===ba.call(a.buffer))){var e,d="__lfsc__:";a instanceof ArrayBuffer?(e=a,d+="arbf"):
(e=a.buffer,"[object Int8Array]"===c?d+="si08":"[object Uint8Array]"===c?d+="ui08":"[object Uint8ClampedArray]"===c?d+="uic8":"[object Int16Array]"===c?d+="si16":"[object Uint16Array]"===c?d+="ur16":"[object Int32Array]"===c?d+="si32":"[object Uint32Array]"===c?d+="ui32":"[object Float32Array]"===c?d+="fl32":"[object Float64Array]"===c?d+="fl64":b(Error("Failed to get type for BinaryArray")));b(d+G(e))}else if("[object Blob]"===c)c=new FileReader,c.onload=function(){var c="~~local_forage_type~"+a.type+
"~"+G(this.result);b("__lfsc__:blob"+c)},c.readAsArrayBuffer(a);else try{b(JSON.stringify(a))}catch(m){console.error("Couldn't convert value into a JSON string: ",a),b(null,m)}},deserialize:function(a){if("__lfsc__:"!==a.substring(0,9))return JSON.parse(a);var b=a.substring(13);a=a.substring(9,13);if("blob"===a&&aa.test(b)){var c=b.match(aa);var d=c[1];b=b.substring(c[0].length)}b=H(b);switch(a){case "arbf":return b;case "blob":return f([b],{type:d});case "si08":return new Int8Array(b);case "ui08":return new Uint8Array(b);
case "uic8":return new Uint8ClampedArray(b);case "si16":return new Int16Array(b);case "ur16":return new Uint16Array(b);case "si32":return new Int32Array(b);case "ui32":return new Uint32Array(b);case "fl32":return new Float32Array(b);case "fl64":return new Float64Array(b);default:throw Error("Unkown type: "+a);}},stringToBuffer:H,bufferToString:G};g={_driver:"webSQLStorage",_initStorage:function(a){var b=this,c={db:null};if(a)for(var d in a)c[d]="string"!=typeof a[d]?a[d].toString():a[d];a=new t(function(a,
e){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(Ca){return e(Ca)}c.db.transaction(function(d){M(d,c,function(){b._dbInfo=c;a()},function(a,b){e(b)})},e)});return c.serializer=V,a},_support:"function"==typeof openDatabase,iterate:function(a,b){var c=this,e=new t(function(b,e){c.ready().then(function(){var d=c._dbInfo;d.db.transaction(function(c){X(c,d,"SELECT * FROM "+d.storeName,[],function(c,e){c=e.rows;e=c.length;for(var h=0;h<e;h++){var f=c.item(h),m=f.value;if(m&&
(m=d.serializer.deserialize(m)),void 0!==(m=a(m,f.key,h+1)))return void b(m)}b()},function(a,b){e(b)})})}).catch(e)});return d(e,b),e},getItem:function(a,b){var c=this;a=l(a);var e=new t(function(b,e){c.ready().then(function(){var d=c._dbInfo;d.db.transaction(function(c){X(c,d,"SELECT * FROM "+d.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){(a=c.rows.length?c.rows.item(0).value:null)&&(a=d.serializer.deserialize(a));b(a)},function(a,b){e(b)})})}).catch(e)});return d(e,b),e},setItem:function(a,
b,d){return Q.apply(this,[a,b,d,1])},removeItem:function(a,b){var c=this;a=l(a);var e=new t(function(b,e){c.ready().then(function(){var d=c._dbInfo;d.db.transaction(function(c){X(c,d,"DELETE FROM "+d.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){e(b)})})}).catch(e)});return d(e,b),e},clear:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var e=b._dbInfo;e.db.transaction(function(b){X(b,e,"DELETE FROM "+e.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});
return d(c,a),c},length:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var e=b._dbInfo;e.db.transaction(function(b){X(b,e,"SELECT COUNT(key) as c FROM "+e.storeName,[],function(b,c){b=c.rows.item(0).c;a(b)},function(a,b){c(b)})})}).catch(c)});return d(c,a),c},key:function(a,b){var c=this,e=new t(function(b,e){c.ready().then(function(){var d=c._dbInfo;d.db.transaction(function(c){X(c,d,"SELECT key FROM "+d.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){a=c.rows.length?
c.rows.item(0).key:null;b(a)},function(a,b){e(b)})})}).catch(e)});return d(e,b),e},keys:function(a){var b=this,c=new t(function(a,c){b.ready().then(function(){var e=b._dbInfo;e.db.transaction(function(b){X(b,e,"SELECT key FROM "+e.storeName,[],function(b,c){b=[];for(var e=0;e<c.rows.length;e++)b.push(c.rows.item(e).key);a(b)},function(a,b){c(b)})})}).catch(c)});return d(c,a),c},dropInstance:function(a,b){b=n.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||
c.name,a.storeName=a.storeName||c.storeName);var e,f=this;return e=a.name?(new t(function(b){var e=a.name===c.name?f._dbInfo.db:openDatabase(a.name,"","",0);b(a.storeName?{db:e,storeNames:[a.storeName]}:W(e))})).then(function(a){return new t(function(b,c){a.db.transaction(function(e){function d(a){return new t(function(b,c){e.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var f=[],h=0,k=a.storeNames.length;h<k;h++)f.push(d(a.storeNames[h]));t.all(f).then(function(){b()}).catch(function(a){c(a)})},
function(a){c(a)})})}):t.reject("Invalid arguments"),d(e,b),e}};try{var ia="undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){ia=!1}var ha=function(a,b){for(var c=a.length,e=0;e<c;){var d=a[e],f=b;if(d===f||"number"==typeof d&&"number"==typeof f&&isNaN(d)&&isNaN(f))return!0;e++}return!1},ea=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},ma={},fa={},ja={INDEXEDDB:a,WEBSQL:g,LOCALSTORAGE:{_driver:"localStorageWrapper",
_initStorage:function(a){var b={};if(a)for(var c in a)b[c]=a[c];b.keyPrefix=R(a,this._defaultConfig);try{var d=(localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1)}catch(A){d=!0}return!d||0<localStorage.length?(this._dbInfo=b,b.serializer=V,t.resolve()):t.reject()},_support:ia,iterate:function(a,b){var c=this,e=c.ready().then(function(){for(var b=c._dbInfo,e=b.keyPrefix,d=e.length,f=localStorage.length,h=1,k=0;k<f;k++){var g=localStorage.key(k);
if(0===g.indexOf(e)){var p=localStorage.getItem(g);if(p&&(p=b.serializer.deserialize(p)),void 0!==(p=a(p,g.substring(d),h++)))return p}}});return d(e,b),e},getItem:function(a,b){var c=this;a=l(a);var e=c.ready().then(function(){var b=c._dbInfo,e=localStorage.getItem(b.keyPrefix+a);return e&&(e=b.serializer.deserialize(e)),e});return d(e,b),e},setItem:function(a,b,f){var c=this;a=l(a);var e=c.ready().then(function(){void 0===b&&(b=null);var e=b;return new t(function(d,f){var h=c._dbInfo;h.serializer.serialize(b,
function(b,c){if(c)f(c);else try{localStorage.setItem(h.keyPrefix+a,b),d(e)}catch(oa){"QuotaExceededError"!==oa.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==oa.name||f(oa),f(oa)}})})});return d(e,f),e},removeItem:function(a,b){var c=this;a=l(a);var e=c.ready().then(function(){localStorage.removeItem(c._dbInfo.keyPrefix+a)});return d(e,b),e},clear:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,c=localStorage.length-1;0<=c;c--){var e=localStorage.key(c);0===e.indexOf(a)&&localStorage.removeItem(e)}});
return d(c,a),c},length:function(a){var b=this.keys().then(function(a){return a.length});return d(b,a),b},key:function(a,b){var c=this,e=c.ready().then(function(){var b=c._dbInfo;try{var e=localStorage.key(a)}catch(Ca){e=null}return e&&(e=e.substring(b.keyPrefix.length)),e});return d(e,b),e},keys:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,e=[],d=0;d<c;d++){var f=localStorage.key(d);0===f.indexOf(a.keyPrefix)&&e.push(f.substring(a.keyPrefix.length))}return e});
return d(c,a),c},dropInstance:function(a,b){if(b=n.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name;a.storeName=a.storeName||c.storeName}var e,f=this;return e=a.name?(new t(function(b){b(a.storeName?R(a,f._defaultConfig):a.name+"/")})).then(function(a){for(var b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);0===c.indexOf(a)&&localStorage.removeItem(c)}}):t.reject("Invalid arguments"),d(e,b),e}}};ia=[ja.INDEXEDDB._driver,ja.WEBSQL._driver,
ja.LOCALSTORAGE._driver];var L=["dropInstance"],ca="clear getItem iterate key keys length removeItem setItem".split(" ").concat(L),ka={description:"",driver:ia.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};ia=new (function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var c in ja)if(ja.hasOwnProperty(c)){var e=ja[c],d=e._driver;this[c]=d;ma[d]||this.defineDriver(e)}this._defaultConfig=O({},ka);this._config=O({},
this._defaultConfig,b);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":P(a))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),"version"===b&&"number"!=typeof a[b])return Error("Database version must be a number.");
this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var e=new t(function(b,c){try{var e=a._driver,f=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(f);for(var h=ca.concat("_initStorage"),k=0,g=h.length;k<g;k++){var p=h[k];if((!ha(L,p)||a[p])&&"function"!=typeof a[p])return void c(f)}(function(){for(var b=
function(a){return function(){var b=t.reject(Error("Method "+a+" is not implemented by the current driver"));return d(b,arguments[arguments.length-1]),b}},c=0,e=L.length;c<e;c++){var f=L[c];a[f]||(a[f]=b(f))}})();f=function(c){ma[e]&&console.info("Redefining LocalForage driver: "+e);ma[e]=a;fa[e]=c;b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(f,c):f(!!a._support):f(!0)}catch(ta){c(ta)}});return p(e,b,c),e},a.prototype.driver=function(){return this._driver||null},
a.prototype.getDriver=function(a,b,c){a=ma[a]?t.resolve(ma[a]):t.reject(Error("Driver not found."));return p(a,b,c),a},a.prototype.getSerializer=function(a){var b=t.resolve(V);return p(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return p(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){k._config.driver=k.driver()}function e(a){return k._extend(a),d(),k._ready=k._initStorage(k._config),k._ready}
function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,k._dbInfo=null,k._ready=null,k.getDriver(f).then(e).catch(b)}d();return k._driverSet=t.reject(Error("No available storage method found.")),k._driverSet}var c=0;return b()}}var k=this;ea(a)||(a=[a]);var h=this._getSupportedDrivers(a);return this._driverSet=(null!==this._driverSet?this._driverSet.catch(function(){return t.resolve()}):t.resolve()).then(function(){var a=h[0];return k._dbInfo=null,k._ready=null,k.getDriver(a).then(function(a){k._driver=
a._driver;d();k._wrapLibraryMethodsWithReady();k._initDriver=f(h)})}).catch(function(){d();return k._driverSet=t.reject(Error("No available storage method found.")),k._driverSet}),p(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!fa[a]},a.prototype._extend=function(a){O(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=
0,b=ca.length;a<b;a++)Z(this,ca[a])},a.prototype.createInstance=function(b){return new a(b)},a}());b.exports=ia},{3:3}]},{},[4])(4)});let da,G,Z,N,ua=0,O=new Map;Date.prototype.kUtilFormat=function(a){var b={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getUTCFullYear()+"").substr(4-
RegExp.$1.length)));for(var d in b)(new RegExp("("+d+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[d]:("000"+b[d]).substr(("000"+b[d]).length-RegExp.$1.length)));return a};let P,n=a=>a.join(""),r={a:[80,88,27,82,145,164,199,211],b:[187,87,89,128,150,44,190,213],c:[89,51,74,53,99,72,82,118],d:[99,181,118,158,215,103,76,117],e:[99,51,86,105,100,71,120,108],f:[97,87,49,119,98,51,74,48,83,50,86,53],g:[81,85,86,84,76,85,100,68,84,81,32,32],h:[90,87,53,106,99,110,108,119,100,65,32,32],i:[90,
71,86,106,99,110,108,119,100,65,32,32],j:[97,88,89,32],k:[29,83,122,137,5,180,157,114],l:[100,71,70,110,84,71,86,117,90,51,82,111]},Da=()=>self[n(r.c)][n(r.e)][n(r.f)]("raw",new Uint8Array(r.a.concat(r.b,r.d,r.k)),n(r.g),!0,[n(r.h),n(r.i)]),Ea=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[n(r.c)]&&self[n(r.c)][n(r.e)]&&self[n(r.c)][n(r.e)][n(r.f)]){var b=atob(a),d=new Uint8Array(b.length);for(let a=0;a<b.length;++a)d[a]=b.charCodeAt(a);b=d.subarray(0,12);d=d.subarray(b.length);
P||(P=yield Da());d=yield self[n(r.c)][n(r.e)][n(r.i)]({name:n(r.g),[n(r.j)]:b,[n(r.l)]:128},P,d);return String.fromCharCode.apply(null,new Uint8Array(d))}return yield new Promise((b,d)=>{let f=ua++;O.set(f,a=>{if(a.success)return l&&F(a.txt),b(a.txt);{let b=Error(a.message);b.stack+="\n"+a.stack;return d(b)}});g.postMessage({type:"taskd",taskID:f,txt:a,d:r})})}),ea=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[n(r.c)]&&self[n(r.c)][n(r.e)]&&self[n(r.c)][n(r.e)][n(r.f)]){var b=
new Uint8Array(a.length);for(var d=0;d<a.length;++d)b[d]=a.charCodeAt(d);d=self.crypto.getRandomValues(new Uint8Array(12));P||(P=yield Da());b=yield self[n(r.c)][n(r.e)][n(r.h)]({name:n(r.g),[n(r.j)]:d,[n(r.l)]:128},P,b);b=new Uint8Array(b);let f=new Uint8Array(d.length+b.length);f.set(d);f.set(b,d.length);return btoa(String.fromCharCode.apply(null,f))}return yield new Promise((b,d)=>{let f=ua++;O.set(f,a=>{if(a.success)return l&&F(a.txt),b(a.txt);{let b=Error(a.message);b.stack+="\n"+a.stack;return d(b)}});
g.postMessage({type:"taske",taskID:f,txt:a,d:r})})}),Fa=()=>{let a=new Uint8Array(36);self.crypto.getRandomValues(a);let b="";for(let d=0;36>d;++d){let f=a[d]%36;b=10>f?b+f:b+String.fromCharCode(f+87)}return b},Ga=0,aa=0;const La=a=>{a.length>Ga&&(aa&&Module._free(aa),aa=Module._malloc(a.length),Ga=a.length);Module.HEAPU8.set(a,aa)};(a?global:self).DBRModule=(a?global:self).Module={locateFile:function(b){return"libDynamsoftBarcodeReader.wasm"==b?a?q+"dbr-"+D+".node.wasm":q+"dbr-"+D+(K?".full":"")+
".wasm":q+b},print:a=>{F(a)},printErr:a=>{console.error(a);F(a)},onRuntimeInitialized:function(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){F("wasm initialized, cost "+(Date.now()-xa)+" ms");a||(Module=DBRModule);za=!0;ba()})}};let y=new Map,Ma=0;g.onmessage=function(b){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var f=b.data?b.data:b,d=f.id,p=f.instanceID;const x=f.body;if(M&&ha&&("decodeBuffer"==f.type||"decodeFileInMemory"==f.type)){var r=new Date,na=r.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");
Module.BarcodeReaderWasm.getMaxExpireTime()<na?(yield fa(!0),yield ba()):Module.BarcodeReaderWasm.getMinExpireTime()<na&&(r.setMinutes(r.getMinutes()-6),na=r,r=null,r=na.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),E<r&&fa().then(()=>ba()))}switch(f.type){case "loadWasm":l=f.bd;q=f.engineResourcePath;D=f.version;z=f.pk;R=f.dm;K=f.bUseFullFeature;V=f.browserInfo;W=f.deviceFriendlyName;f.ls&&f.ls.length&&(H=f.ls,1==H.length&&H.push(H[0]));ka=f.sp;pa=f.lm;S=f.cw;F("wasm loading...");xa=Date.now();if(a){d=
Module;Module=require("./dbr-"+D+".node.wasm.js");for(let a in d)Module[a]=d[a]}else importScripts(q+"dbr-"+D+(K?".full":"")+".wasm.js");(M=8==z.length||8<z.length&&!z.startsWith("t")&&!z.startsWith("f")&&!z.startsWith("P")&&!z.startsWith("L"))?(w=z,z="",v=D.split(".")[0],(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){n=a=>atob(String.fromCharCode.apply(null,a).replace(/\n/g,"+").replace(/\s/g,"="));try{yield(yield localforage.createInstance({name:"dbrjshello"})).setItem("dbrjshello",
"available")}catch(k){localforage=function(a){this.dbname=a};localforage.createInstance=function(a){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return new localforage(a.name)})};let a=a=>function(){let b=[];for(let a=0;a<arguments.length;++a)b.push(arguments[a]);return new Promise((d,f)=>{let k=ua++;O.set(k,a=>{if(a.success)return l&&F(a.result),d(a.result);{let b=Error(a.message);b.stack+="\n"+a.stack;return f(b)}});g.postMessage({type:"localforage",taskID:k,dbname:this.dbname,
method:a,paras:b})})};localforage.prototype.setItem=a("setItem");localforage.prototype.getItem=a("getItem");localforage.prototype.removeItem=a("removeItem");localforage.prototype.keys=a("keys")}G=yield localforage.createInstance({name:"dynamltsinfo"});Z=btoa(String.fromCharCode(w.charCodeAt(R.length/2)+1)+String.fromCharCode(w.charCodeAt(2*R.length/3)+7)+btoa(R)+v);N=btoa(String.fromCharCode(w.charCodeAt(0)+10)+btoa(w)+v);try{let a=yield G.getItem(Z);a&&([C,E]=JSON.parse(yield Ea(a)))}catch(k){}try{null==
C&&(C=Fa())}catch(k){}da=yield localforage.createInstance({name:"dynamltsuns"+btoa("dbr"+String.fromCharCode(w.charCodeAt(0)+10)+btoa(w))});try{Q=yield G.getItem(N)}catch(k){}yield fa();ba();T||va(null,!0)}))()):qa=!0;break;case "createInstance":p=Ma++;try{let b=new Module.BarcodeReaderWasm(f.bScanner,p);y.set(p,b);let d=JSON.parse(b.getRuntimeSettings());f.bScanner?(d.localizationModes=[2,0,0,0,0,0,0,0],d.deblurLevel=0):(d.expectedBarcodesCount=512,d.scaleDownThreshold=1E5,d.timeout=1E5);a||K||(d.barcodeFormatIds=
235931647);b.updateRuntimeSettings(JSON.stringify(d))}catch(k){B(k,d);break}g.postMessage({type:"task",id:d,body:{success:!0,instanceID:p}});break;case "destroy":try{y.get(p).delete(),y.delete(p)}catch(k){B(k,d);break}g.postMessage({type:"task",id:d,body:{success:!0}});break;case "decodeBuffer":{f=l?Date.now():0;let a,b,n,q;try{a=l?Date.now():0,La(x.buffer),b=l?Date.now():0,q=JSON.parse(y.get(p).decodeBufferPtr(aa,x.width,x.height,x.stride,x.format)),n=l?Date.now():0}catch(Ia){B(Ia,d);break}g.postMessage({type:"task",
id:d,body:{success:!0,decodeReturn:q,buffer:x.buffer}},[x.buffer.buffer]);Na(["timeWorkerGetMsg: "+f,"timeBeforeSendBufferToWasm: "+a+" "+(a-f),"timeBeforeDecode: "+b+" "+(b-a),"timefinishDecode: "+n+" "+(n-b)].join("\n"));break}case "decodeFileInMemory":{let a;try{a=JSON.parse(y.get(p).decodeFileInMemory(x.bytes))}catch(u){B(u,d);break}g.postMessage({type:"task",id:d,body:{success:!0,decodeReturn:a}});break}case "clearMapDecodeRecord":try{y.get(p).clearMapDecodeRecord()}catch(k){B(k,d);break}g.postMessage({type:"task",
id:d,body:{success:!0}});break;case "getRuntimeSettings":{let a;try{a=y.get(p).getRuntimeSettings()}catch(u){B(u,d);break}g.postMessage({type:"task",id:d,body:{success:!0,results:a}});break}case "updateRuntimeSettings":{let a;try{a=JSON.parse(y.get(p).updateRuntimeSettings(x.settings))}catch(u){B(u,d);break}g.postMessage({type:"task",id:d,body:{success:!0,updateReturn:a}});break}case "resetRuntimeSettings":try{let a=y.get(p);a.resetRuntimeSettings();let b=JSON.parse(a.getRuntimeSettings());a.bScanner?
(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0,b.barcodeZoneMinDistanceToImageBorders=9):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);K||(b.barcodeFormatIds=234883071);a.updateRuntimeSettings(JSON.stringify(b))}catch(k){B(b,d);break}g.postMessage({type:"task",id:d,body:{success:!0}});break;case "outputSettingsToString":{let a;try{a=y.get(p).outputSettingsToString()}catch(u){B(u,d);break}g.postMessage({type:"task",id:d,body:{success:!0,results:a}});break}case "initRuntimeSettingsWithString":{let a;
try{a=JSON.parse(y.get(p).initRuntimeSettingsWithString(x.settings))}catch(u){B(u,d);break}g.postMessage({type:"task",id:d,body:{success:!0,initReturn:a}});break}case "getIntermediateResults":{let a=null;try{var L=y.get(p).getIntermediateResults(),P=JSON.parse(L,(b,d)=>"bytes"===b&&"ptr"in d&&"length"in d?a=Module.BarcodeReaderWasm.getBytes(d.ptr,d.length):d)}catch(u){B(u,d);break}g.postMessage({type:"task",id:d,body:{success:!0,results:P}});y.get(p).freeIntermediateResults();break}case "setModeArgument":{let a;
try{a=JSON.parse(y.get(p).setModeArgument(x.modeName,x.index,x.argumentName,x.argumentValue))}catch(u){B(u,d);break}g.postMessage({type:"task",id:d,body:{success:!0,setReturn:a}});break}case "getModeArgument":{let a;try{a=JSON.parse(y.get(p).getModeArgument(x.modeName,x.index,x.argumentName))}catch(u){B(u,d);break}g.postMessage({type:"task",id:d,body:{success:!0,getReturn:a}});break}case "updateScanSettings":try{let a=y.get(p),b=x.settings;a.duplicateForgetTime=b.duplicateForgetTime;a.oneDRememberFrameCount=
b.oneDRememberFrameCount;a.oneDTrustFrameCount=b.oneDTrustFrameCount;b.frameFilter?a.setFrameFilter(JSON.stringify(b.frameFilter)):a.setFrameFilter("")}catch(k){B(k,d);break}g.postMessage({type:"task",id:d,body:{success:!0}});break;case "getScanSettings":f={};try{let a=y.get(p);f.duplicateForgetTime=a.duplicateForgetTime;f.oneDRememberFrameCount=a.oneDRememberFrameCount;f.oneDTrustFrameCount=a.oneDTrustFrameCount;let b=a.getFrameFilter();b&&(f.frameFilter=JSON.parse(b))}catch(k){B(k,d);break}g.postMessage({type:"task",
id:d,body:{success:!0,results:f}});break;case "task":d=f.id;f=f.body;try{O.get(d)(f),O.delete(d)}catch(k){throw O.delete(d),k;}break;default:console.warn("Unmatched task: ",b)}})};if(a)g.on("message",g.onmessage);let F=a=>{g.postMessage({type:"log",message:a})},Na=a=>{l&&F(a)},B=(a,b)=>{g.postMessage({type:"task",id:b,body:{success:!1,message:a.message,stack:a.stack}});setTimeout(()=>{throw a;},0)},L,fa=b=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){L||(L=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let f=
{hs:w,pd:"dbr",vm:v,dt:a?"server":"browser",ed:"javascript",cu:C,ad:R,os:JSON.stringify(V),fn:W},d={};E&&(d["lts-time"]=E);ka&&(f.sp=ka);pa&&(f.lm=pa);S&&(f.cw=S);Q=yield Promise.race([(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let a=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");E&&(G.setItem(Z,yield ea(JSON.stringify([C,a]))),E=a);let g;var l="auth/?ext="+encodeURIComponent(btoa(JSON.stringify(f)));let n=!1,q=!1,r,k,u=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a&&
!a.ok)try{let b=yield a.text();if(b){r=b;let a=JSON.parse(b);a.errorCode&&(k=a,100<a.errorCode&&200>a.errorCode&&(q=n=!0))}}catch(Oa){}});try{g=yield fetch(H[0]+l,{headers:d,cache:b?"reload":"default"}),yield u(g)}catch(ra){}if(!(E||g&&g.ok||n))try{g=yield fetch(H[1]+l,{headers:d}),yield u(g)}catch(ra){}if(!(E||g&&g.ok||n))try{g=yield fetch(H[0]+l,{headers:d}),yield u(g)}catch(ra){}k&&151==k.errorCode&&(G.removeItem(Z),G.removeItem(N),C=Fa(),f.cu=C,E=void 0,l=encodeURIComponent(btoa(JSON.stringify(f))),
g=yield fetch(H[0]+"auth/?ext="+l,{headers:d}),yield u(g));(()=>{if(!g||!g.ok){q&&G.setItem(N,"").catch(()=>{});let a="Auth failed. ";a=k?a+("Error Code: "+k.errorCode+", message: "+k.message):a+r;throw Error(a);}})();l=yield g.text();try{E||(G.setItem(Z,yield ea(JSON.stringify([C,a]))),E=a),G.setItem(N,l).catch(()=>{})}catch(ra){}return l}))(),new Promise((a,b)=>{setTimeout(()=>b(Error("Network Error. Request timeout.")),Q?3E3:3E4)})])}catch(f){l&&console.error(f),T=f}ya=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");
qa=!0;L=null}))());yield L}),ca,ba=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){qa&&za&&(ca||(ca=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let a={pk:z,dm:R,ls:H[0]};S&&(a.cw=S);V&&(a.os=JSON.stringify(V));w&&(a.hs=w);W&&(a.fn=W);l&&(a.bd=!0);if(M){a.cu=C;l&&F(C);l&&F(Q);if(!Q){ha||(g.postMessage({type:"load",success:!1,message:T.message,stack:l?T.stack:null}),F(T.message));return}try{let b=JSON.parse(yield Ea(Q));b.ba&&(a.ba=b.ba);b.usu&&(a.usu=b.usu);a.ar=b.in}catch(f){}}l&&
F(a);try{Module.BarcodeReaderWasm.init(JSON.stringify(a))}catch(f){}ha||(g.postMessage({type:"load",success:!0,version:Module.BarcodeReaderWasm.getVersion()}),ha=!0);ca=null}))()),yield ca)}),Ha=!1,wa=null;(a?global:self).scsd=(a,b,d,g)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){b=yield ea(b);try{yield da.setItem(d,b)}catch(x){}g&&va(d);wa&&clearTimeout(wa);wa=setTimeout(()=>{va()},18E4)});let va=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){Aa=Aa.then((a,b)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let f=
yield da.keys();b||(Ha?a&&(f=f.filter(b=>b<a)):Ha=!0);for(let a=0;a<f.length/1E3;++a){let b=f.slice(1E3*a,1E3*a+999);var d=[];for(let a=0;a<b.length;++a)d.push(yield da.getItem(b[a]));let g=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");G.setItem(Z,yield ea(JSON.stringify([C,g])));let l=yield fetch(H[0]+"verify",{mode:"cors",method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json","lts-time":E}});if(l.ok){E=g;for(d=0;d<b.length;++d)yield da.removeItem(b[d]);(yield l.json()).handshakeUpdateTime>
ya&&(yield fa(!0),yield ba())}}}catch(p){}}))})})();
