'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,f){a!=Array.prototype&&a!=Object.prototype&&(a[b]=f.value)};
$jscomp.polyfill=function(a,b,f,v){if(b){f=$jscomp.global;a=a.split(".");for(v=0;v<a.length-1;v++){var u=a[v];u in f||(f[u]={});f=f[u]}a=a[a.length-1];v=f[a];b=b(v);b!=v&&null!=b&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+b++,f)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(f){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var f=a.next();$jscomp.generator.ensureIteratorResultIsObject_(f);if(f.done)this.yieldResult=f.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(f.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,f){f?this.finallyContexts_[f]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,f){try{var v=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(v);if(!v.done)return this.context_.stop_(),v;var u=v.value}catch(C){return this.context_.yieldAllIterator_=null,this.context_.throw_(C),this.nextStep_()}this.context_.yieldAllIterator_=null;f.call(this.context_,u);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function f(b){return a.throw(b)}return new Promise(function(v,u){function C(a){a.done?v(a.value):Promise.resolve(a.value).then(b,f).then(C,u)}C(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,f){var b=this;b instanceof String&&(b=String(b));var u=b.length;f=f||0;for(0>f&&(f=Math.max(f+u,0));f<u;f++){var C=b[f];if(C===a||Object.is(C,a))return!0}return!1}},"es7","es3");
(()=>{const a=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);a&&(global.self=global);var b;a&&(b=require("worker_threads"));let f=a?b.parentPort:self,v,u,C,I=!1,W,ca,N,Z=0,X=0;const ya=(a,b)=>{b>Z&&(X&&Module._free(X),X=Module._malloc(b),Z=b);Module.HEAPU8.set(a.subarray(0,b),X)};let ja,za=new Promise(a=>{ja=a});self.KModule=self.Module={locateFile:function(b){return"libDynamsoftBarcodeReader.wasm"==b?a?u+"dbr-"+C+".node.wasm":u+"dbr-"+C+(I?".full":
"")+".wasm":u+b},print:a=>{J(a)},printErr:a=>{console.error(a);J(a)},onRuntimeInitialized:function(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){J("wasm initialized, cost "+(Date.now()-W)+" ms");a||(Module=KModule);ja()})}};let Aa=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){J("wasm loading...");W=Date.now();if(a){let a=Module;Module=require("./dbr-"+C+".node.wasm.js");for(let b in a)Module[b]=a[b]}else importScripts(u+"dbr-"+C+(I?".full":"")+".wasm.js")}),ea=a=>
$jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield za;Module.BarcodeReaderWasm.init(JSON.stringify(a))}),Ba=()=>Module.BarcodeReaderWasm.getMinExpireTime(),$a=()=>Module.BarcodeReaderWasm.getMaxExpireTime(),y=new Map,ab=0;b=function(b){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var n=b.data?b.data:b,p=n.id,A=n.instanceID;const x=n.body;!ca||"decodeBuffer"!=n.type&&"decodeFileInMemory"!=n.type||(yield N.c());switch(n.type){case "loadWasm":try{v=n.bd;u=n.engineResourcePath;
I=n.bUseFullFeature;C=n.version;let a=n.dm,b=n.pk;ca=n.brtk;Aa();ca?(N=(a=>{const b=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);let e=a.dwt?Dynamsoft.Lib.Promise:self.Promise,f=a.btoa||(b?global.btoa||(a=>Buffer.from(a,"binary").toString("base64")):self.btoa),l=a.atob||(b?global.atob||(a=>Buffer.from(a,"base64").toString("binary")):self.atob),p,n=a.product,v,A,x,y,u,B,E,C,da,M=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"],L,J,I,
G,X,Y,W=!1,N=e.resolve(),F=a.lf,fa,H,K,S,ca=a.log||(()=>{}),ka=a.dwt?w=>{try{a.debugLog&&a.debugLog(w)}catch(t){}}:a.debugLog||(()=>{}),T=a.fol,Z,ja,ea,Ca=a.sutlcb;Date.prototype.kUtilFormat=function(a){var b={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getUTCFullYear()+
"").substr(4-RegExp.$1.length)));for(var w in b)(new RegExp("("+w+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[w]:("000"+b[w]).substr(("000"+b[w]).length-RegExp.$1.length)));return a};let aa,m=a=>a.join("");var xa=[80,88,27,82,145,164,199,211],ya=[187,87,89,128,150,44,190,213],O=[89,51,74,53,99,72,82,118],za=[99,181,118,158,215,103,76,117],U=[99,51,86,105,100,71,120,108],Da=[97,87,49,119,98,51,74,48,83,50,86,53],Ea=[81,85,86,84,76,85,100,68,84,81,32,32],Qa=[90,87,53,106,99,110,108,
119,100,65,32,32],Ra=[90,71,86,106,99,110,108,119,100,65,32,32],Sa=[97,88,89,32],Aa=[29,83,122,137,5,180,157,114],Ta=[100,71,70,110,84,71,86,117,90,51,82,111];let Ua=()=>self[m(O)][m(U)][m(Da)]("raw",new Uint8Array(xa.concat(ya,za,Aa)),m(Ea),!0,[m(Qa),m(Ra)]),Fa=a.fdaa||(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[m(O)]&&self[m(O)][m(U)]&&self[m(O)][m(U)][m(Da)]){var b=l(a),w=new Uint8Array(b.length);for(let a=0;a<b.length;++a)w[a]=b.charCodeAt(a);b=w.subarray(0,12);w=w.subarray(b.length);
aa||(aa=yield Ua());w=yield self[m(O)][m(U)][m(Ra)]({name:m(Ea),[m(Sa)]:b,[m(Ta)]:128},aa,w);return String.fromCharCode.apply(null,new Uint8Array(w))}})),ba=a.feab||(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self[m(O)]&&self[m(O)][m(U)]&&self[m(O)][m(U)][m(Da)]){var b=new Uint8Array(a.length);for(var w=0;w<a.length;++w)b[w]=a.charCodeAt(w);w=self.crypto.getRandomValues(new Uint8Array(12));aa||(aa=yield Ua());b=yield self[m(O)][m(U)][m(Qa)]({name:m(Ea),[m(Sa)]:w,[m(Ta)]:128},aa,
b);b=new Uint8Array(b);let e=new Uint8Array(w.length+b.length);e.set(w);e.set(b,w.length);return f(String.fromCharCode.apply(null,e))}})),ha=a.fdaa2||Fa,Ga=a.fdea2||ba,Va,ma=a.gu||(()=>{if(self.crypto){let a=new Uint8Array(36);self.crypto.getRandomValues(a);let b="";for(let w=0;36>w;++w){let e=a[w]%36;b=10>e?b+e:b+String.fromCharCode(e+87)}return b}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}),Za=()=>{F||self.localforage||
(b?(global.localforage=require("node-localstorage").LocalStorage,global.localforage.prototype.keys=function(){let a=[];for(let b=0;b<this.length;++b)a.push(this.key(b));return a},global.localforage.createInstance=function(a){return new F("./dynamsoftverify/"+a.name)}):!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:
this).localforage=a()}(function(){return function pa(a,b,e){function f(k,t){if(!b[k]){if(!a[k]){var D="function"==typeof require&&require;if(!t&&D)return D(k,!0);if(l)return l(k,!0);t=Error("Cannot find module '"+k+"'");throw t.code="MODULE_NOT_FOUND",t;}t=b[k]={exports:{}};a[k][0].call(t.exports,function(b){return f(a[k][1][b]||b)},t,t.exports,pa,a,b,e)}return b[k].exports}for(var l="function"==typeof require&&require,t=0;t<e.length;t++)f(e[t]);return f}({1:[function(a,b,e){(function(a){function e(){n=
!0;for(var a,b,e=p.length;e;){b=p;p=[];for(a=-1;++a<e;)b[a]();e=p.length}n=!1}var f=a.MutationObserver||a.WebKitMutationObserver;if(f){var l=0;f=new f(e);var t=a.document.createTextNode("");f.observe(t,{characterData:!0});var pa=function(){t.data=l=++l%2}}else if(a.setImmediate||void 0===a.MessageChannel)pa="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){e();b.onreadystatechange=null;b.parentNode.removeChild(b);
b=null};a.document.documentElement.appendChild(b)}:function(){setTimeout(e,0)};else{var D=new a.MessageChannel;D.port1.onmessage=e;pa=function(){D.port2.postMessage(0)}}var n,p=[];b.exports=function(a){1!==p.push(a)||n||pa()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,e){function f(){}function k(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=u;this.queue=[];this.outcome=
void 0;a!==f&&D(this,a)}function l(a,b,e){this.promise=a;"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"==typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function t(a,b,e){la(function(){try{var f=b(e)}catch(db){return m.reject(a,db)}f===a?m.reject(a,new TypeError("Cannot resolve promise with itself")):m.resolve(a,f)})}function p(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,
arguments)}}function D(a,b){function e(b){l||(l=!0,m.reject(a,b))}function f(b){l||(l=!0,m.resolve(a,b))}var l=!1,k=n(function(){b(f,e)});"error"===k.status&&e(k.value)}function n(a,b){var e={};try{e.value=a(b),e.status="success"}catch(cb){e.status="error",e.value=cb}return e}var la=a(1),m={},x=["REJECTED"],v=["FULFILLED"],u=["PENDING"];b.exports=k;k.prototype.catch=function(a){return this.then(null,a)};k.prototype.then=function(a,b){if("function"!=typeof a&&this.state===v||"function"!=typeof b&&
this.state===x)return this;var e=new this.constructor(f);this.state!==u?t(e,this.state===v?a:b,this.outcome):this.queue.push(new l(e,a,b));return e};l.prototype.callFulfilled=function(a){m.resolve(this.promise,a)};l.prototype.otherCallFulfilled=function(a){t(this.promise,this.onFulfilled,a)};l.prototype.callRejected=function(a){m.reject(this.promise,a)};l.prototype.otherCallRejected=function(a){t(this.promise,this.onRejected,a)};m.resolve=function(a,b){var e=n(p,b);if("error"===e.status)return m.reject(a,
e.value);if(e=e.value)D(a,e);else{a.state=v;a.outcome=b;e=-1;for(var f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a};m.reject=function(a,b){a.state=x;a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callRejected(b);return a};k.resolve=function(a){return a instanceof this?a:m.resolve(new this(f),a)};k.reject=function(a){var b=new this(f);return m.reject(b,a)};k.all=function(a){function b(a,b){e.resolve(a).then(function(a){t[b]=a;++D!==l||k||(k=!0,m.resolve(n,t))},function(a){k||
(k=!0,m.reject(n,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var l=a.length,k=!1;if(!l)return this.resolve([]);for(var t=Array(l),D=0,p=-1,n=new this(f);++p<l;)b(a[p],p);return n};k.race=function(a){function b(a){e.resolve(a).then(function(a){k||(k=!0,m.resolve(p,a))},function(a){k||(k=!0,m.reject(p,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));
var l=a.length,k=!1;if(!l)return this.resolve([]);for(var t=-1,p=new this(f);++t<l;)b(a[t]);return p}},{1:1}],3:[function(a,b,e){b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"function"!=typeof b.Promise&&(b.Promise=a(2))},{2:2}],4:[function(a,b,p){function t(c,a){c=c||[];a=a||{};try{return new Blob(c,a)}catch(z){if("TypeError"!==z.name)throw z;for(var d=new ("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:
"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<c.length;b+=1)d.append(c[b]);return d.getBlob(a.type)}}function k(c,a){a&&c.then(function(c){a(null,c)},function(c){a(c)})}function m(c,a,g){"function"==typeof a&&c.then(a);"function"==typeof g&&c.catch(g)}function n(a){return"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function D(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-
1]}function la(a){return(new r(function(c){var d=a.transaction(U,T),b=t([""]);d.objectStore(U).put(b,"key");d.onabort=function(a){a.preventDefault();a.stopPropagation();c(!1)};d.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);c(d||!a||43<=parseInt(a[1],10))}})).catch(function(){return!1})}function x(a){return"boolean"==typeof Y?r.resolve(Y):la(a).then(function(a){return Y=a})}function v(a){a=P[a.name];var c={};c.promise=new r(function(a,
d){c.resolve=a;c.reject=d});a.deferredOperations.push(c);a.dbReady?a.dbReady=a.dbReady.then(function(){return c.promise}):a.dbReady=c.promise}function u(a){if(a=P[a.name].deferredOperations.pop())return a.resolve(),a.promise}function A(a,d){if(a=P[a.name].deferredOperations.pop())return a.reject(d),a.promise}function y(a,d){return new r(function(c,b){if(P[a.name]=P[a.name]||H(),a.db){if(!d)return c(a.db);v(a);a.db.close()}var g=[a.name];d&&g.push(a.version);var h=K.open.apply(K,g);d&&(h.onupgradeneeded=
function(c){var d=h.result;try{d.createObjectStore(a.storeName),1>=c.oldVersion&&d.createObjectStore(U)}catch(Q){if("ConstraintError"!==Q.name)throw Q;console.warn('The database "'+a.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+a.storeName+'" already exists.')}});h.onerror=function(a){a.preventDefault();b(h.error)};h.onsuccess=function(){c(h.result);u(a)}})}function B(a,d){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),
b=a.version>a.db.version;return(a.version<a.db.version&&(a.version!==d&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),b||c)?(c&&(d=a.db.version+1,d>a.version&&(a.version=d)),!0):!1}function C(a){return new r(function(c,g){var d=new FileReader;d.onerror=g;d.onloadend=function(d){d=f(d.target.result||"");c({__local_forage_encoded_blob:!0,data:d,type:a.type})};d.readAsBinaryString(a)})}function E(a){for(var c=
l(a.data),g=c.length,b=new ArrayBuffer(g),z=new Uint8Array(b),h=0;h<g;h++)z[h]=c.charCodeAt(h);return t([b],{type:a.type})}function G(a){var c=this,g=c._initReady().then(function(){var a=P[c._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return m(g,a,a),g}function da(a){v(a);for(var c=P[a.name],g=c.forages,b=0;b<g.length;b++){var z=g[b];z._dbInfo.db&&(z._dbInfo.db.close(),z._dbInfo.db=null)}return a.db=null,y(a,!1).then(function(c){return a.db=c,B(a)?y(a,!0):c}).then(function(d){a.db=c.db=d;for(var b=
0;b<g.length;b++)g[b]._dbInfo.db=d}).catch(function(c){throw A(a,c),c;})}function L(a,d,g,b){void 0===b&&(b=1);try{var c=a.db.transaction(a.storeName,d);g(null,c)}catch(h){if(0<b&&(!a.db||"InvalidStateError"===h.name||"NotFoundError"===h.name))return r.resolve().then(function(){if(!a.db||"NotFoundError"===h.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),y(a,!0)}).then(function(){return da(a).then(function(){L(a,d,g,b-1)})}).catch(g);
g(h)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function I(a){var c=.75*a.length;var b=a.length,q=0;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);var z=new ArrayBuffer(c),h=new Uint8Array(z);for(c=0;c<b;c+=4){var e=ia.indexOf(a[c]);var Ya=ia.indexOf(a[c+1]);var Q=ia.indexOf(a[c+2]);var f=ia.indexOf(a[c+3]);h[q++]=e<<2|Ya>>4;h[q++]=(15&Ya)<<4|Q>>2;h[q++]=(3&Q)<<6|63&f}return z}function J(a){var c=new Uint8Array(a),b="";for(a=0;a<c.length;a+=3)b+=ia[c[a]>>2],b+=
ia[(3&c[a])<<4|c[a+1]>>4],b+=ia[(15&c[a+1])<<2|c[a+2]>>6],b+=ia[63&c[a+2]];return 2==c.length%3?b=b.substring(0,b.length-1)+"=":1==c.length%3&&(b=b.substring(0,b.length-2)+"=="),b}function M(a,b,g,q){a.executeSql("CREATE TABLE IF NOT EXISTS "+b.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],g,q)}function F(a,b,g,q,z,h){a.executeSql(g,q,z,function(a,c){c.code===c.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[b.storeName],function(a,d){d.rows.length?
h(a,c):M(a,b,function(){a.executeSql(g,q,z,h)},h)},h):h(a,c)},h)}function O(a,b,g,q){var c=this;a=n(a);var d=new r(function(d,h){c.ready().then(function(){void 0===b&&(b=null);var z=b,e=c._dbInfo;e.serializer.serialize(b,function(b,Q){Q?h(Q):e.db.transaction(function(c){F(c,e,"INSERT OR REPLACE INTO "+e.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){d(z)},function(a,c){h(c)})},function(b){if(b.code===b.QUOTA_ERR){if(0<q)return void d(O.apply(c,[a,z,g,q-1]));h(b)}})})}).catch(h)});return k(d,
g),d}function V(a){return new r(function(c,b){a.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(b,d){b=[];for(var g=0;g<d.rows.length;g++)b.push(d.rows.item(g).name);c({db:a,storeNames:b})},function(a,c){b(c)})},function(a){b(a)})})}function R(a,b){var c=a.name+"/";return a.storeName!==b.storeName&&(c+=a.storeName+"/"),c}function W(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,
c)})}}function N(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var g in b)b.hasOwnProperty(g)&&(ea(b[g])?arguments[0][g]=b[g].slice():arguments[0][g]=b[g])}return arguments[0]}var X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},K=function(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;
if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}();"undefined"==typeof e&&a(3);var r=e,U="local-forage-detect-blob-support",Y=void 0,P={},fa=Object.prototype.toString,T="readwrite";a={_driver:"asyncStorage",_initStorage:function(a){function b(){return r.resolve()}var c=this,q={db:null};if(a)for(var z in a)q[z]=a[z];var h=P[q.name];h||(h=H(),P[q.name]=h);h.forages.push(c);c._initReady||
(c._initReady=c.ready,c.ready=G);a=[];for(z=0;z<h.forages.length;z++){var e=h.forages[z];e!==c&&a.push(e._initReady().catch(b))}var f=h.forages.slice(0);return r.all(a).then(function(){return q.db=h.db,y(q,!1)}).then(function(a){return q.db=a,B(q,c._defaultConfig.version)?y(q,!0):a}).then(function(a){q.db=h.db=a;c._dbInfo=q;for(a=0;a<f.length;a++){var b=f[a];b!==c&&(b._dbInfo.db=q.db,b._dbInfo.version=q.version)}})},_support:function(){try{if(!K)return!1;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&
!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(g){return!1}}(),iterate:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){L(c._dbInfo,"readonly",function(g,h){if(g)return d(g);try{var q=h.objectStore(c._dbInfo.storeName).openCursor(),e=1;q.onsuccess=function(){var c=q.result;if(c){var d=c.value;
d&&d.__local_forage_encoded_blob&&(d=E(d));d=a(d,c.key,e++);void 0!==d?b(d):c.continue()}else b()};q.onerror=function(){d(q.error)}}catch(Ia){d(Ia)}})}).catch(d)});return k(d,b),d},getItem:function(a,b){var c=this;a=n(a);var d=new r(function(b,d){c.ready().then(function(){L(c._dbInfo,"readonly",function(g,h){if(g)return d(g);try{var q=h.objectStore(c._dbInfo.storeName).get(a);q.onsuccess=function(){var a=q.result;void 0===a&&(a=null);a&&a.__local_forage_encoded_blob&&(a=E(a));b(a)};q.onerror=function(){d(q.error)}}catch(qa){d(qa)}})}).catch(d)});
return k(d,b),d},setItem:function(a,b,g){var c=this;a=n(a);var d=new r(function(d,g){var h;c.ready().then(function(){return h=c._dbInfo,"[object Blob]"===fa.call(b)?x(h.db).then(function(a){return a?b:C(b)}):b}).then(function(b){L(c._dbInfo,T,function(h,q){if(h)return g(h);try{var e=q.objectStore(c._dbInfo.storeName);null===b&&(b=void 0);var z=e.put(b,a);q.oncomplete=function(){void 0===b&&(b=null);d(b)};q.onabort=q.onerror=function(){g(z.error?z.error:z.transaction.error)}}catch(Ja){g(Ja)}})}).catch(g)});
return k(d,g),d},removeItem:function(a,b){var c=this;a=n(a);var d=new r(function(b,d){c.ready().then(function(){L(c._dbInfo,T,function(g,h){if(g)return d(g);try{var q=h.objectStore(c._dbInfo.storeName).delete(a);h.oncomplete=function(){b()};h.onerror=function(){d(q.error)};h.onabort=function(){d(q.error?q.error:q.transaction.error)}}catch(qa){d(qa)}})}).catch(d)});return k(d,b),d},clear:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){L(b._dbInfo,T,function(d,g){if(d)return c(d);
try{var h=g.objectStore(b._dbInfo.storeName).clear();g.oncomplete=function(){a()};g.onabort=g.onerror=function(){c(h.error?h.error:h.transaction.error)}}catch(Q){c(Q)}})}).catch(c)});return k(c,a),c},length:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){L(b._dbInfo,"readonly",function(d,g){if(d)return c(d);try{var h=g.objectStore(b._dbInfo.storeName).count();h.onsuccess=function(){a(h.result)};h.onerror=function(){c(h.error)}}catch(Q){c(Q)}})}).catch(c)});return k(c,a),c},
key:function(a,b){var c=this,d=new r(function(b,d){if(0>a)return void b(null);c.ready().then(function(){L(c._dbInfo,"readonly",function(g,h){if(g)return d(g);try{var q=!1,e=h.objectStore(c._dbInfo.storeName).openCursor();e.onsuccess=function(){var c=e.result;if(!c)return void b(null);0===a?b(c.key):q?b(c.key):(q=!0,c.advance(a))};e.onerror=function(){d(e.error)}}catch(Ia){d(Ia)}})}).catch(d)});return k(d,b),d},keys:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){L(b._dbInfo,
"readonly",function(d,g){if(d)return c(d);try{var h=g.objectStore(b._dbInfo.storeName).openCursor(),e=[];h.onsuccess=function(){var b=h.result;if(!b)return void a(e);e.push(b.key);b.continue()};h.onerror=function(){c(h.error)}}catch(qa){c(qa)}})}).catch(c)});return k(c,a),c},dropInstance:function(a,b){b=D.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);a.name?(c=a.name===c.name&&this._dbInfo.db?r.resolve(this._dbInfo.db):
y(a,!1).then(function(b){var c=P[a.name],d=c.forages;c.db=b;for(c=0;c<d.length;c++)d[c]._dbInfo.db=b;return b}),c=a.storeName?c.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;v(a);var d=P[a.name],g=d.forages;b.close();for(b=0;b<g.length;b++){var e=g[b];e._dbInfo.db=null;e._dbInfo.version=c}return(new r(function(b,d){var g=K.open(a.name,c);g.onerror=function(a){g.result.close();d(a)};g.onupgradeneeded=function(){g.result.deleteObjectStore(a.storeName)};g.onsuccess=
function(){var a=g.result;a.close();b(a)}})).then(function(a){d.db=a;for(var b=0;b<g.length;b++){var c=g[b];c._dbInfo.db=a;u(c._dbInfo)}}).catch(function(b){throw(A(a,b)||r.resolve()).catch(function(){}),b;})}}):c.then(function(b){v(a);var c=P[a.name],d=c.forages;b.close();for(b=0;b<d.length;b++)d[b]._dbInfo.db=null;return(new r(function(b,c){var d=K.deleteDatabase(a.name);d.onerror=d.onblocked=function(a){var b=d.result;b&&b.close();c(a)};d.onsuccess=function(){var a=d.result;a&&a.close();b(a)}})).then(function(a){c.db=
a;for(a=0;a<d.length;a++)u(d[a]._dbInfo)}).catch(function(b){throw(A(a,b)||r.resolve()).catch(function(){}),b;})})):c=r.reject("Invalid arguments");return k(c,b),c}};var ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aa=/^~~local_forage_type~([^~]+)~/,ca=Object.prototype.toString,Z={serialize:function(a,b){var c="";if(a&&(c=ca.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===ca.call(a.buffer))){var d,e="__lfsc__:";a instanceof ArrayBuffer?(d=a,e+=
"arbf"):(d=a.buffer,"[object Int8Array]"===c?e+="si08":"[object Uint8Array]"===c?e+="ui08":"[object Uint8ClampedArray]"===c?e+="uic8":"[object Int16Array]"===c?e+="si16":"[object Uint16Array]"===c?e+="ur16":"[object Int32Array]"===c?e+="si32":"[object Uint32Array]"===c?e+="ui32":"[object Float32Array]"===c?e+="fl32":"[object Float64Array]"===c?e+="fl64":b(Error("Failed to get type for BinaryArray")));b(e+J(d))}else if("[object Blob]"===c)c=new FileReader,c.onload=function(){var c="~~local_forage_type~"+
a.type+"~"+J(this.result);b("__lfsc__:blob"+c)},c.readAsArrayBuffer(a);else try{b(JSON.stringify(a))}catch(h){console.error("Couldn't convert value into a JSON string: ",a),b(null,h)}},deserialize:function(a){if("__lfsc__:"!==a.substring(0,9))return JSON.parse(a);var b=a.substring(13);a=a.substring(9,13);if("blob"===a&&aa.test(b)){var c=b.match(aa);var e=c[1];b=b.substring(c[0].length)}b=I(b);switch(a){case "arbf":return b;case "blob":return t([b],{type:e});case "si08":return new Int8Array(b);case "ui08":return new Uint8Array(b);
case "uic8":return new Uint8ClampedArray(b);case "si16":return new Int16Array(b);case "ur16":return new Uint16Array(b);case "si32":return new Int32Array(b);case "ui32":return new Uint32Array(b);case "fl32":return new Float32Array(b);case "fl64":return new Float64Array(b);default:throw Error("Unkown type: "+a);}},stringToBuffer:I,bufferToString:J};p={_driver:"webSQLStorage",_initStorage:function(a){var b=this,c={db:null};if(a)for(var e in a)c[e]="string"!=typeof a[e]?a[e].toString():a[e];a=new r(function(a,
d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(Xa){return d(Xa)}c.db.transaction(function(e){M(e,c,function(){b._dbInfo=c;a()},function(a,b){d(b)})},d)});return c.serializer=Z,a},_support:"function"==typeof openDatabase,iterate:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){F(c,e,"SELECT * FROM "+e.storeName,[],function(c,d){c=d.rows;d=c.length;for(var g=0;g<d;g++){var h=c.item(g),q=h.value;if(q&&
(q=e.serializer.deserialize(q)),void 0!==(q=a(q,h.key,g+1)))return void b(q)}b()},function(a,b){d(b)})})}).catch(d)});return k(d,b),d},getItem:function(a,b){var c=this;a=n(a);var d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){F(c,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){(a=c.rows.length?c.rows.item(0).value:null)&&(a=e.serializer.deserialize(a));b(a)},function(a,b){d(b)})})}).catch(d)});return k(d,b),d},setItem:function(a,
b,e){return O.apply(this,[a,b,e,1])},removeItem:function(a,b){var c=this;a=n(a);var d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){F(c,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return k(d,b),d},clear:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){F(b,d,"DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});
return k(c,a),c},length:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){F(b,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){b=c.rows.item(0).c;a(b)},function(a,b){c(b)})})}).catch(c)});return k(c,a),c},key:function(a,b){var c=this,d=new r(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){F(c,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){a=c.rows.length?
c.rows.item(0).key:null;b(a)},function(a,b){d(b)})})}).catch(d)});return k(d,b),d},keys:function(a){var b=this,c=new r(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){F(b,d,"SELECT key FROM "+d.storeName,[],function(b,c){b=[];for(var d=0;d<c.rows.length;d++)b.push(c.rows.item(d).key);a(b)},function(a,b){c(b)})})}).catch(c)});return k(c,a),c},dropInstance:function(a,b){b=D.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||
c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?(new r(function(b){var d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0);b(a.storeName?{db:d,storeNames:[a.storeName]}:V(d))})).then(function(a){return new r(function(b,c){a.db.transaction(function(d){function e(a){return new r(function(b,c){d.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var g=[],h=0,f=a.storeNames.length;h<f;h++)g.push(e(a.storeNames[h]));r.all(g).then(function(){b()}).catch(function(a){c(a)})},
function(a){c(a)})})}):r.reject("Invalid arguments"),k(d,b),d}};try{var na="undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){na=!1}var ja=function(a,b){for(var c=a.length,d=0;d<c;){var e=a[d],h=b;if(e===h||"number"==typeof e&&"number"==typeof h&&isNaN(e)&&isNaN(h))return!0;d++}return!1},ea=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},S={},ka={},oa={INDEXEDDB:a,WEBSQL:p,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(a){var b=
{};if(a)for(var c in a)b[c]=a[c];b.keyPrefix=R(a,this._defaultConfig);try{var e=(localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1)}catch(z){e=!0}return!e||0<localStorage.length?(this._dbInfo=b,b.serializer=Z,r.resolve()):r.reject()},_support:na,iterate:function(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,e=d.length,g=localStorage.length,f=1,q=0;q<g;q++){var l=localStorage.key(q);if(0===l.indexOf(d)){var k=
localStorage.getItem(l);if(k&&(k=b.serializer.deserialize(k)),void 0!==(k=a(k,l.substring(e),f++)))return k}}});return k(d,b),d},getItem:function(a,b){var c=this;a=n(a);var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return k(d,b),d},setItem:function(a,b,e){var c=this;a=n(a);var d=c.ready().then(function(){void 0===b&&(b=null);var d=b;return new r(function(e,g){var h=c._dbInfo;h.serializer.serialize(b,function(b,c){if(c)g(c);
else try{localStorage.setItem(h.keyPrefix+a,b),e(d)}catch(ra){"QuotaExceededError"!==ra.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==ra.name||g(ra),g(ra)}})})});return k(d,e),d},removeItem:function(a,b){var c=this;a=n(a);var d=c.ready().then(function(){localStorage.removeItem(c._dbInfo.keyPrefix+a)});return k(d,b),d},clear:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,c=localStorage.length-1;0<=c;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});
return k(c,a),c},length:function(a){var b=this.keys().then(function(a){return a.length});return k(b,a),b},key:function(a,b){var c=this,d=c.ready().then(function(){var b=c._dbInfo;try{var d=localStorage.key(a)}catch(Xa){d=null}return d&&(d=d.substring(b.keyPrefix.length)),d});return k(d,b),d},keys:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=[],e=0;e<c;e++){var g=localStorage.key(e);0===g.indexOf(a.keyPrefix)&&d.push(g.substring(a.keyPrefix.length))}return d});
return k(c,a),c},dropInstance:function(a,b){if(b=D.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name;a.storeName=a.storeName||c.storeName}var d,e=this;return d=a.name?(new r(function(b){b(a.storeName?R(a,e._defaultConfig):a.name+"/")})).then(function(a){for(var b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);0===c.indexOf(a)&&localStorage.removeItem(c)}}):r.reject("Invalid arguments"),k(d,b),d}}};na=[oa.INDEXEDDB._driver,oa.WEBSQL._driver,
oa.LOCALSTORAGE._driver];var ba=["dropInstance"],ha="clear getItem iterate key keys length removeItem setItem".split(" ").concat(ba),ma={description:"",driver:na.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};na=new (function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var c in oa)if(oa.hasOwnProperty(c)){var d=oa[c],e=d._driver;this[c]=e;S[e]||this.defineDriver(d)}this._defaultConfig=N({},ma);this._config=N({},
this._defaultConfig,b);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":X(a))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),"version"===b&&"number"!=typeof a[b])return Error("Database version must be a number.");
this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new r(function(b,c){try{var d=a._driver,e=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(e);for(var g=ha.concat("_initStorage"),f=0,h=g.length;f<h;f++){var l=g[f];if((!ja(ba,l)||a[l])&&"function"!=typeof a[l])return void c(e)}(function(){for(var b=
function(a){return function(){var b=r.reject(Error("Method "+a+" is not implemented by the current driver"));return k(b,arguments[arguments.length-1]),b}},c=0,d=ba.length;c<d;c++){var e=ba[c];a[e]||(a[e]=b(e))}})();e=function(c){S[d]&&console.info("Redefining LocalForage driver: "+d);S[d]=a;ka[d]=c;b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(e,c):e(!!a._support):e(!0)}catch(Ja){c(Ja)}});return m(d,b,c),d},a.prototype.driver=function(){return this._driver||null},
a.prototype.getDriver=function(a,b,c){a=S[a]?r.resolve(S[a]):r.reject(Error("Driver not found."));return m(a,b,c),a},a.prototype.getSerializer=function(a){var b=r.resolve(Z);return m(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return m(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){g._config.driver=g.driver()}function e(a){return g._extend(a),d(),g._ready=g._initStorage(g._config),g._ready}
function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(e).catch(b)}d();return g._driverSet=r.reject(Error("No available storage method found.")),g._driverSet}var c=0;return b()}}var g=this;ea(a)||(a=[a]);var l=this._getSupportedDrivers(a);return this._driverSet=(null!==this._driverSet?this._driverSet.catch(function(){return r.resolve()}):r.resolve()).then(function(){var a=l[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=
a._driver;d();g._wrapLibraryMethodsWithReady();g._initDriver=f(l)})}).catch(function(){d();return g._driverSet=r.reject(Error("No available storage method found.")),g._driverSet}),m(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!ka[a]},a.prototype._extend=function(a){N(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=
0,b=ha.length;a<b;a++)W(this,ha[a])},a.prototype.createInstance=function(b){return new a(b)},a}());b.exports=na},{3:3}]},{},[4])(4)}));F=F||self.localforage},Ba=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){Za();b&&(global.fetch=global.fetch||require("node-fetch"),global.crypto=global.crypto||require("crypto").webcrypto);m=a=>l(String.fromCharCode.apply(null,a).replace(/\n/g,"+").replace(/\s/g,"="));try{yield(yield F.createInstance({name:n+"jshello"})).setItem(n+"jshello","available")}catch(w){throw w;
}H=yield F.createInstance({name:"dynamltsinfo"});K=f(String.fromCharCode(B.charCodeAt(B.length/2)+1)+f(B));S=f(String.fromCharCode(x.charCodeAt(0)+10)+f(n)+f(x)+A);try{let a=yield H.getItem(K);a&&([E,G]=JSON.parse(yield ha(a)))}catch(w){}try{null==E&&(E=Va||ma())}catch(w){}fa=yield F.createInstance({name:"dynamltsuns"+f(String.fromCharCode(x.charCodeAt(0)+10)+f(E)+f(n))});try{u=yield H.getItem(S)}catch(w){}}),sa,ta=w=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){sa||(sa=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let a=
{hs:x,og:y,pd:n,vm:A,dt:b?"server":"browser",ed:"javascript",cu:E,ad:B,os:JSON.stringify(C),fn:da},l={};if(G){let a=yield H.getItem(K);a&&([E,G]=JSON.parse(yield ha(a)));l["lts-time"]=G}L&&(a.sp=L);J&&(a.lm=J);I&&(a.cw=I);u=yield e.race([(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let b=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");G&&(H.setItem(K,yield Ga(JSON.stringify([E,b]))),G=b);let e;var k="auth/?ext="+encodeURIComponent(f(JSON.stringify(a)));let t=!1,n=!1,p,m,D=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a&&
!a.ok)try{let b=yield a.text();if(b){p=b;let a=JSON.parse(b);a.errorCode&&(m=a,100<a.errorCode&&200>a.errorCode&&(u=null,n=t=!0))}}catch(eb){}});try{e=yield fetch(M[0]+k,{headers:l,cache:w?"reload":"default",mode:"cors",timeout:3E4}),yield D(e)}catch(Ha){}if(!(G||e&&e.ok||t))try{e=yield fetch(M[1]+k,{headers:l,mode:"cors",timeout:3E4}),yield D(e)}catch(Ha){}if(!(G||e&&e.ok||t))try{e=yield fetch(M[0]+k,{headers:l,mode:"cors",timeout:3E4}),yield D(e)}catch(Ha){}m&&151==m.errorCode&&(H.removeItem(K),
H.removeItem(S),E=ma(),a.cu=E,G=void 0,k=encodeURIComponent(f(JSON.stringify(a))),e=yield fetch(M[0]+"auth/?ext="+k,{headers:l,mode:"cors",timeout:3E4}),yield D(e));(()=>{if(!e||!e.ok){n&&H.setItem(S,"");let a="Auth failed. ";a=m?a+("Error Code: "+m.errorCode+", message: "+m.message):a+(p||"Network connect error.");throw Error(a);}})();k=yield e.text();try{G||(H.setItem(K,yield Ga(JSON.stringify([E,b]))),G=b),H.setItem(S,k)}catch(Ha){}return k}))(),new e((a,b)=>{setTimeout(()=>b(Error("Network Error. Request timeout.")),
u?3E3:3E4)})])}catch(t){p&&(a.dwt?self.console.error(t):console.error(t)),Y=t}X=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");sa=null}))());yield sa}),ua,va=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){ua||(ua=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){ka(E);if(u){Y&&T&&(T(Y),T=null);var b={pd:n,dm:B};p&&(b.bd=!0);b.ls=M[0];b.cu=E;I&&(b.cw=I);C&&(b.os=JSON.stringify(C));x&&(b.hs=x);y&&(b.og=y);da&&(b.fn=da);ka(u);try{if(a.dwt)b.ar=u;else{let a=JSON.parse(yield Fa(u));
a.ba&&(b.ba=a.ba);a.usu&&(b.usu=a.usu);a.its&&(b.its=a.its);b.ar=a.in}}catch(t){}ka(b);try{yield Z(b)}catch(t){}W||(W=!0);ua=null}else if(!W)throw ca(Y.message),Y;}))());yield ua}),Ka=!1,La=null,V=!1,R=new Map,Ma=null,Na=!1,Oa=null,Pa=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(R.size)for(let a of R.entries()){let b=a[0],e=a[1];R.delete(b);try{let a=yield ba(e);yield fa.setItem(b,a)}catch(la){throw R.has(b)||R.set(b,e),la;}}}),wa=(a,b)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){N=
N.then(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{let f=yield fa.keys();b||(Ka?a&&(f=f.filter(b=>b<a)):a&&f.includes(a)?f=[a]:(f=[],ka("Unexpected null key")));if(f.length){Ka||(Ka=!0);for(let a=0;a<f.length/1E3;++a){let b=f.slice(1E3*a,1E3*a+999);var e=[];for(let a=0;a<b.length;++a)e.push(yield fa.getItem(b[a]));let l=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");H.setItem(K,yield Ga(JSON.stringify([E,l])));{let a=yield H.getItem(K);a&&([E,G]=JSON.parse(yield ha(a)))}try{let a=
yield fetch(M[0]+"verify",{mode:"cors",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json","lts-time":G},timeout:3E4});if(a.ok){G=l;for(e=0;e<b.length;++e)yield fa.removeItem(b[e]);(yield a.json()).handshakeUpdateTime>X&&(yield ta(!0),yield va())}else throw Error("verify failed. Status Code: "+a.status);}catch(Wa){throw T&&(T(Wa),T=null),Wa;}}Ca&&Ca()}}catch(la){}}));return yield N});return{i:a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){p=a.bd;v=a.version;
A=v.split(".")[0];B=a.dm;x=a.pk;y=a.og;C=a.browserInfo;da=a.deviceFriendlyName;a.ls&&a.ls.length&&(M=a.ls,1==M.length&&M.push(M[0]));L=a.sp;J=a.lm;I=a.cw;a.lf&&(F=a.lf);a.pu&&(Va=a.pu);a.gu&&(ma=a.gu);a.fdaa&&(Fa=a.fdaa);a.feab&&(ba=a.feab);Z=a.updateLicense;ja=a.getMinExpireTime;ea=a.getMaxExpireTime;a.sutlcb&&(Ca=a.sutlcb);yield Ba();yield ta();yield va();Y||wa(null,!0);return{ar:u,cu:E}}),c:()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){var a=new Date,b=a.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");
let e=ja(),f=ea();f&&f<b?(yield ta(!0),yield va()):e&&e<b&&(a.setMinutes(a.getMinutes()-6),b=a,a=null,a=b.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),G<a&&ta().then(()=>va()))}),s:(b,f,l,m)=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a.dwt&&!f)yield wa(l);else{m&&(Na=!0,Oa=l);var b=!1;if(V)R.set(l,f);else try{V=!0;R.delete(l);try{let a=yield ba(f);yield fa.setItem(l,a)}catch(k){throw R.has(l)||R.set(l,f),k;}yield Pa();b=!0}catch(k){}Na&&b&&(yield wa(Oa),Na=!1,Oa=null);La&&clearTimeout(La);
La=setTimeout(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(!V){V=!0;try{yield Pa()}catch(k){}yield wa();V=!1}}),36E4);b&&(yield new e(a=>{setTimeout(a,300)}),V=!1);Ma&&clearTimeout(Ma);Ma=setTimeout(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(!V){V=!0;try{yield Pa()}catch(k){}V=!1}}),500)}}),gcu:a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){let b=f(String.fromCharCode(a.charCodeAt(a.length/2)+1)+f(a)),e;try{Za();m=a=>l(String.fromCharCode.apply(null,
a).replace(/\n/g,"+").replace(/\s/g,"="));let a=yield(yield F.createInstance({name:"dynamltsinfo"})).getItem(b);a&&([e]=JSON.parse(yield ha(a)))}catch(la){}e||(e=ma());return e})}})({product:"dbr",log:J,debugLog:xa}),self.scsd=N.s,n.updateLicense=ea,n.getMinExpireTime=Ba,n.getMaxExpireTime=$a,yield N.i(n)):(p={pk:b,dm:a},v&&(p.bd=!0),yield ea(p));f.postMessage({type:"load",success:!0,version:Module.BarcodeReaderWasm.getVersion()})}catch(e){f.postMessage({type:"load",success:!1,message:e&&e.message,
stack:v&&e?e.stack:null})}break;case "createInstance":A=ab++;try{let b=new Module.BarcodeReaderWasm(n.bScanner,A);y.set(A,b);let f=JSON.parse(b.getRuntimeSettings());n.bScanner?(f.localizationModes=[2,0,0,0,0,0,0,0],f.deblurLevel=0):(f.expectedBarcodesCount=512,f.scaleDownThreshold=1E5,f.timeout=1E5);a||I||(f.barcodeFormatIds=235931647);b.updateRuntimeSettings(JSON.stringify(f))}catch(e){B(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0,instanceID:A}});break;case "destroy":try{y.get(A).delete(),
y.delete(A)}catch(e){B(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "decodeBuffer":{n=v?Date.now():0;let a,b,u,C;try{a=v?Date.now():0,ya(x.buffer,x.stride*x.height),b=v?Date.now():0,C=JSON.parse(y.get(A).decodeBufferPtr(X,x.width,x.height,x.stride,x.format)),u=v?Date.now():0}catch(bb){B(bb,p);break}f.postMessage({type:"task",id:p,body:{success:!0,decodeReturn:C,buffer:x.buffer}},[x.buffer.buffer]);xa(["timeWorkerGetMsg: "+n,"timeBeforeSendBufferToWasm: "+a+" "+(a-n),"timeBeforeDecode: "+
b+" "+(b-a),"timefinishDecode: "+u+" "+(u-b)].join("\n"));break}case "decodeFileInMemory":{let a;try{a=JSON.parse(y.get(A).decodeFileInMemory(x.bytes))}catch(l){B(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,decodeReturn:a}});break}case "clearMapDecodeRecord":try{y.get(A).clearMapDecodeRecord()}catch(e){B(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "getRuntimeSettings":{let a;try{a=y.get(A).getRuntimeSettings()}catch(l){B(l,p);break}f.postMessage({type:"task",
id:p,body:{success:!0,results:a}});break}case "updateRuntimeSettings":{let a;try{a=JSON.parse(y.get(A).updateRuntimeSettings(x.settings))}catch(l){B(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,updateReturn:a}});break}case "resetRuntimeSettings":try{let a=y.get(A);a.resetRuntimeSettings();let b=JSON.parse(a.getRuntimeSettings());a.bScanner?(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0,b.barcodeZoneMinDistanceToImageBorders=9):(b.expectedBarcodesCount=512,b.scaleDownThreshold=
1E5,b.timeout=1E5);I||(b.barcodeFormatIds=235931647);a.updateRuntimeSettings(JSON.stringify(b))}catch(e){B(b,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "outputSettingsToString":{let a;try{a=y.get(A).outputSettingsToString()}catch(l){B(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:a}});break}case "initRuntimeSettingsWithString":{let a;try{a=JSON.parse(y.get(A).initRuntimeSettingsWithString(x.settings))}catch(l){B(l,p);break}f.postMessage({type:"task",
id:p,body:{success:!0,initReturn:a}});break}case "getIntermediateResults":{let a=[];try{var da=y.get(A).getIntermediateResults(),W=JSON.parse(da,(b,e)=>"bytes"===b&&"ptr"in e&&"length"in e?(b=Module.BarcodeReaderWasm.getBytes(e.ptr,e.length),b=b.slice(0),a.push(b.buffer),b):e)}catch(l){B(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:W}},a);y.get(A).freeIntermediateResults();break}case "setModeArgument":{let a;try{a=JSON.parse(y.get(A).setModeArgument(x.modeName,x.index,x.argumentName,
x.argumentValue))}catch(l){B(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,setReturn:a}});break}case "getModeArgument":{let a;try{a=JSON.parse(y.get(A).getModeArgument(x.modeName,x.index,x.argumentName))}catch(l){B(l,p);break}f.postMessage({type:"task",id:p,body:{success:!0,getReturn:a}});break}case "updateScanSettings":try{let a=y.get(A),b=x.settings;a.duplicateForgetTime=b.duplicateForgetTime;a.oneDRememberFrameCount=b.oneDRememberFrameCount;a.oneDTrustFrameCount=b.oneDTrustFrameCount;
b.frameFilter?a.setFrameFilter(JSON.stringify(b.frameFilter)):a.setFrameFilter("")}catch(e){B(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0}});break;case "getScanSettings":n={};try{let a=y.get(A);n.duplicateForgetTime=a.duplicateForgetTime;n.oneDRememberFrameCount=a.oneDRememberFrameCount;n.oneDTrustFrameCount=a.oneDTrustFrameCount;let b=a.getFrameFilter();b&&(n.frameFilter=JSON.parse(b))}catch(e){B(e,p);break}f.postMessage({type:"task",id:p,body:{success:!0,results:n}});break;default:console.warn("Unmatched task: ",
b)}})};if(a)f.on("message",b);else f.onmessage=b;let J=a=>{f.postMessage({type:"log",message:a})},xa=a=>{v&&J(a)},B=(a,b)=>{f.postMessage({type:"task",id:b,body:{success:!1,message:a.message,stack:a.stack}});setTimeout(()=>{throw a;},0)}})();
